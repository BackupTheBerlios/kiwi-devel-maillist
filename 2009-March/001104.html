<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 6d8a03e081d086a0bd688320a8cd0e8883a3e082
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%206d8a03e081d086a0bd688320a8cd0e8883a3e082&In-Reply-To=%3C200903190759.n2J7xsK6002426%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001103.html">
   <LINK REL="Next"  HREF="001105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 6d8a03e081d086a0bd688320a8cd0e8883a3e082</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%206d8a03e081d086a0bd688320a8cd0e8883a3e082&In-Reply-To=%3C200903190759.n2J7xsK6002426%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 6d8a03e081d086a0bd688320a8cd0e8883a3e082">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Thu Mar 19 08:59:54 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001103.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 11e9984d02e9e5e74c61de8b86351aa49dffdafd
</A></li>
        <LI>Next message: <A HREF="001105.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-164-SuSE-10-3-Devel,	updated. 34635057e28845084d11bec8625567a98eaff1e7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1104">[ date ]</a>
              <a href="thread.html#1104">[ thread ]</a>
              <a href="subject.html#1104">[ subject ]</a>
              <a href="author.html#1104">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, master has been updated
       via  6d8a03e081d086a0bd688320a8cd0e8883a3e082 (commit)
       via  bafe3030fe300295e8d0b5f58d7d8e422514002c (commit)
      from  11e9984d02e9e5e74c61de8b86351aa49dffdafd (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 6d8a03e081d086a0bd688320a8cd0e8883a3e082
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Thu Mar 19 08:59:40 2009 +0100

    - added suse-SLE10-JeOS template

commit bafe3030fe300295e8d0b5f58d7d8e422514002c
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Thu Mar 19 08:58:53 2009 +0100

    - v3.34
    - fixed ignore element validation
    - added suse-SLE10-JeOS template

-----------------------------------------------------------------------

Summary of changes:
diff --git a/kiwi.pl b/kiwi.pl
index 3867725..3c6599c 100755
--- a/kiwi.pl
+++ b/kiwi.pl
@@ -44,7 +44,7 @@ use KIWITest;
 #============================================
 # Globals (Version)
 #--------------------------------------------
-our $Version       = &quot;3.33&quot;;
+our $Version       = &quot;3.34&quot;;
 our $Publisher     = &quot;SUSE LINUX Products GmbH&quot;;
 our $Preparer      = &quot;KIWI - <A HREF="http://kiwi.berlios.de">http://kiwi.berlios.de</A>&quot;;
 our $openSUSE      = &quot;<A HREF="http://download.opensuse.org">http://download.opensuse.org</A>&quot;;
diff --git a/modules/KIWIConfig.sh b/modules/KIWIConfig.sh
index bb37229..6d3f310 100644
--- a/modules/KIWIConfig.sh
+++ b/modules/KIWIConfig.sh
@@ -942,7 +942,7 @@ function suseStripInitrd {
 		ldd driveready checkmedia splashy bzip2 hexdump
 		pvchange pvresize pvscan vgscan vgchange vgextend vgdisplay
 		lvchange lvresize lvextend lvcreate grub dcounter tty
-		dmsetup
+		dmsetup dialog
 	&quot;
 	tools=&quot;$tools $@&quot;
 	for path in /sbin /usr/sbin /usr/bin /bin;do
diff --git a/modules/KIWIXML.pm b/modules/KIWIXML.pm
index 82508ec..78f7a43 100644
--- a/modules/KIWIXML.pm
+++ b/modules/KIWIXML.pm
@@ -2487,7 +2487,7 @@ sub getList {
 			push @ignorelist,$ignore;
 		}
 		if (@ignorelist) {
-			my %keylist = ();
+			my @newlist = ();
 			foreach my $element (@result) {
 				my $pass = 1;
 				foreach my $ignore (@ignorelist) {
@@ -2498,9 +2498,9 @@ sub getList {
 				if (! $pass) {
 					next;
 				}
-				$keylist{$element} = $element;
+				push @newlist,$element;
 			}
-			@result = keys %keylist;
+			@result = @newlist;
 		}
 	}
 	#==========================================
diff --git a/rpm/kiwi.changes b/rpm/kiwi.changes
index 404d06a..235589f 100644
--- a/rpm/kiwi.changes
+++ b/rpm/kiwi.changes
@@ -1,4 +1,11 @@
 -------------------------------------------------------------------
+Wed Mar 18 12:28:01 CET 2009 - <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>
+
+- v3.34
+- fixed ignore element validation
+- added suse-SLE10-JeOS template
+
+-------------------------------------------------------------------
 Tue Mar 17 18:05:05 CET 2009 - <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">mbarringer at suse.de</A>
 
 - Ported the new imagewriter UI to MacOS
diff --git a/rpm/kiwi.spec b/rpm/kiwi.spec
index 9142e87..f40e97d 100644
--- a/rpm/kiwi.spec
+++ b/rpm/kiwi.spec
@@ -1,5 +1,5 @@
 #
-# spec file for package kiwi (Version 3.33)
+# spec file for package kiwi (Version 3.34)
 #
 # Copyright (c) 2008 SUSE LINUX Products GmbH, Nuernberg, Germany.
 # This file and all modifications and additions to the pristine
@@ -43,7 +43,7 @@ Requires:       satsolver-tools
 Summary:        OpenSuSE - KIWI Image System
 Provides:       kiwi2 &lt;= 2.14
 Obsoletes:      kiwi2 &lt;= 2.14
-Version:        3.33
+Version:        3.34
 Release:        80
 Group:          System/Management
 License:        GPL v2 or later
@@ -418,6 +418,7 @@ rm -rf $RPM_BUILD_ROOT
 %dir %{_datadir}/kiwi
 %dir %{_datadir}/kiwi/image
 %exclude %{_datadir}/kiwi/image/suse-11.1-JeOS
+%exclude %{_datadir}/kiwi/image/suse-SLE10-JeOS
 %exclude %{_datadir}/kiwi/image/suse-SLE11-JeOS
 %{_datadir}/kiwi/.revision
 %{_datadir}/kiwi/modules
@@ -559,7 +560,9 @@ rm -rf $RPM_BUILD_ROOT
 %files -n kiwi-templates
 %defattr(-, root, root)
 %dir %{_datadir}/kiwi/image/suse-11.1-JeOS
+%dir %{_datadir}/kiwi/image/suse-SLE10-JeOS
 %dir %{_datadir}/kiwi/image/suse-SLE11-JeOS
 %{_datadir}/kiwi/image/suse-11.1-JeOS
+%{_datadir}/kiwi/image/suse-SLE10-JeOS
 %{_datadir}/kiwi/image/suse-SLE11-JeOS
 %endif
diff --git a/template/suse-SLE11-JeOS/config.sh b/template/suse-SLE10-JeOS/config.sh
similarity index 93%
copy from template/suse-SLE11-JeOS/config.sh
copy to template/suse-SLE10-JeOS/config.sh
index f88326b..fb24888 100755
--- a/template/suse-SLE11-JeOS/config.sh
+++ b/template/suse-SLE10-JeOS/config.sh
@@ -53,11 +53,11 @@ rm -rf /opt/kde3
 suseConfig
 
 #======================================
-# Add 11.1 repo
+# Add 10.1 repo
 #--------------------------------------
-baseRepo=&quot;<A HREF="http://download.opensuse.org/distribution/11.1/repo/oss">http://download.opensuse.org/distribution/11.1/repo/oss</A>&quot;
-baseName=&quot;suse-11.1&quot;
-zypper ar $baseRepo $baseName
+baseRepo=&quot;<A HREF="ftp://ftp.suse.com/pub/suse/i386/10.1/SUSE-Linux10.1-GM-Extra">ftp://ftp.suse.com/pub/suse/i386/10.1/SUSE-Linux10.1-GM-Extra</A>&quot;
+baseName=&quot;suse-10.1&quot;
+zypper sa $baseRepo $baseName
 
 #======================================
 # Remove unneeded packages
diff --git a/template/suse-SLE10-JeOS/config.xml b/template/suse-SLE10-JeOS/config.xml
new file mode 100644
index 0000000..8f44985
--- /dev/null
+++ b/template/suse-SLE10-JeOS/config.xml
@@ -0,0 +1,135 @@
+&lt;?xml version=&quot;1.0&quot;?&gt;
+&lt;image schemeversion=&quot;2.4&quot; name=&quot;LimeJeOS-SLE10&quot;&gt;
+	&lt;!-- Base Information --&gt;
+	&lt;description type=&quot;system&quot;&gt;
+		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
+		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
+		&lt;specification&gt;
+			SUSE SLE10 JeOS, is a small text based image which
+			allows editing of files as well as upgrading to a full
+			distro by using zypper with the pre-defined repository 
+		&lt;/specification&gt;
+	&lt;/description&gt;
+	&lt;!-- Image Type and Preferences --&gt;
+	&lt;preferences&gt;
+		&lt;type 
+			primary=&quot;true&quot;
+			filesystem=&quot;reiserfs&quot;
+			boot=&quot;vmxboot/suse-SLES10&quot;
+		&gt;vmx&lt;/type&gt;
+		&lt;type 
+			filesystem=&quot;reiserfs&quot;
+			boot=&quot;oemboot/suse-SLES10&quot;
+			format=&quot;iso&quot;
+		&gt;oem&lt;/type&gt;
+		&lt;type 
+			boot=&quot;isoboot/suse-SLES10&quot;
+		&gt;iso&lt;/type&gt;
+		&lt;type 
+			filesystem=&quot;reiserfs&quot;
+			boot=&quot;xenboot/suse-SLES10&quot;
+		&gt;xen&lt;/type&gt;
+		&lt;version&gt;1.10.1&lt;/version&gt;
+		&lt;packagemanager&gt;smart&lt;/packagemanager&gt;
+		&lt;locale&gt;en_US.UTF-8&lt;/locale&gt;
+		&lt;keytable&gt;de-latin1-nodeadkeys.map.gz&lt;/keytable&gt;
+		&lt;timezone&gt;Europe/Berlin&lt;/timezone&gt;
+		&lt;rpm-excludedocs&gt;yes&lt;/rpm-excludedocs&gt;
+	&lt;/preferences&gt;
+	&lt;!-- Users setup --&gt;
+	&lt;users group=&quot;root&quot;&gt;
+		&lt;user 
+			pwd=&quot;$1$wYJUgpM5$RXMMeASDc035eX.NbYWFl0&quot;
+			home=&quot;/root&quot;
+			name=&quot;root&quot;
+		/&gt;
+	&lt;/users&gt;
+	&lt;!-- Package Repositories --&gt;
+	&lt;repository type=&quot;yast2&quot;&gt;
+		&lt;!-- you need to setup your SLE10 source here --&gt;
+		&lt;source path=&quot;/image/CDs/full-sles10-sp2-i386&quot;/&gt;
+	&lt;/repository&gt;
+	&lt;repository type=&quot;rpm-dir&quot;&gt;
+		&lt;source path=&quot;/usr/share/kiwi/repo/suse-repo/suse-sle10-repo&quot;/&gt;
+	&lt;/repository&gt;
+	&lt;!-- Packages and Patterns --&gt;
+	&lt;packages type=&quot;image&quot; patternType=&quot;plusRecommended&quot; patternPackageType=&quot;plusRecommended&quot;&gt;
+		&lt;package name=&quot;kernel-default&quot; replaces=&quot;kernel-xen&quot;/&gt;
+		&lt;package name=&quot;bootsplash&quot;/&gt;
+		&lt;package name=&quot;bootsplash-theme-SuSE-SLES&quot;/&gt;
+		&lt;package name=&quot;ifplugd&quot;/&gt;
+		&lt;package name=&quot;dhcp-client&quot;/&gt;
+		&lt;package name=&quot;vim&quot;/&gt;
+		&lt;package name=&quot;grub&quot;/&gt;
+		&lt;opensusePattern name=&quot;base&quot;/&gt;
+		&lt;ignore name=&quot;855resolution&quot;/&gt;
+		&lt;ignore name=&quot;xbsql&quot;/&gt;
+		&lt;ignore name=&quot;xbase&quot;/&gt;
+		&lt;ignore name=&quot;wv2-devel&quot;/&gt;
+		&lt;ignore name=&quot;thinkfinger&quot;/&gt;
+		&lt;ignore name=&quot;steak&quot;/&gt;
+		&lt;ignore name=&quot;sles-release&quot;/&gt;
+		&lt;ignore name=&quot;release-notes-sles&quot;/&gt;
+		&lt;ignore name=&quot;raptor&quot;/&gt;
+		&lt;ignore name=&quot;raptor-devel&quot;/&gt;
+		&lt;ignore name=&quot;qtc&quot;/&gt;
+		&lt;ignore name=&quot;mpg321&quot;/&gt;
+		&lt;ignore name=&quot;libyaz-devel&quot;/&gt;
+		&lt;ignore name=&quot;libpqxx-devel&quot;/&gt;
+		&lt;ignore name=&quot;liblrdf-devel&quot;/&gt;
+		&lt;ignore name=&quot;libdar-devel&quot;/&gt;
+		&lt;ignore name=&quot;libchipcard-devel&quot;/&gt;
+		&lt;ignore name=&quot;lib3ds&quot;/&gt;
+		&lt;ignore name=&quot;lame&quot;/&gt;
+		&lt;ignore name=&quot;krpmbuilder&quot;/&gt;
+		&lt;ignore name=&quot;kdbg&quot;/&gt;
+		&lt;ignore name=&quot;hk_classes&quot;/&gt;
+		&lt;ignore name=&quot;hk_classes-devel&quot;/&gt;
+		&lt;ignore name=&quot;gambas&quot;/&gt;
+		&lt;ignore name=&quot;ffmpeg-devel&quot;/&gt;
+		&lt;ignore name=&quot;eric&quot;/&gt;
+		&lt;ignore name=&quot;dclib-devel&quot;/&gt;
+		&lt;ignore name=&quot;colorgcc&quot;/&gt;
+		&lt;ignore name=&quot;bootsplash-theme-SuSE-SLES&quot;/&gt;
+		&lt;ignore name=&quot;amarok-helix&quot;/&gt;
+		&lt;ignore name=&quot;agg-devel&quot;/&gt;
+		&lt;ignore name=&quot;smtp_daemon&quot;/&gt;
+		&lt;ignore name=&quot;pdisk&quot;/&gt;
+		&lt;ignore name=&quot;pfmon&quot;/&gt;
+		&lt;ignore name=&quot;powerpc32&quot;/&gt;
+		&lt;ignore name=&quot;s390-32&quot;/&gt;
+		&lt;ignore name=&quot;s390-tools&quot;/&gt;
+		&lt;ignore name=&quot;salinfo&quot;/&gt;
+		&lt;ignore name=&quot;sles-preparation-power_en&quot;/&gt;
+		&lt;ignore name=&quot;sles-preparation-zseries_en&quot;/&gt;
+		&lt;ignore name=&quot;libpfm&quot;/&gt;
+		&lt;ignore name=&quot;gnome2-SLES&quot;/&gt;
+		&lt;ignore name=&quot;mcelog&quot;/&gt;
+		&lt;ignore name=&quot;numactl&quot;/&gt;
+		&lt;ignore name=&quot;bootloader-theme-NLD&quot;/&gt;
+		&lt;ignore name=&quot;evolution-caldav&quot;/&gt;
+		&lt;ignore name=&quot;gstreamer010-plugins-good-oil&quot;/&gt;
+		&lt;ignore name=&quot;linux32&quot;/&gt;
+		&lt;ignore name=&quot;mDNSResponder&quot;/&gt;
+		&lt;ignore name=&quot;neo&quot;/&gt;
+		&lt;ignore name=&quot;novfs-kmp&quot;/&gt;
+		&lt;ignore name=&quot;openh323-devel&quot;/&gt;
+		&lt;ignore name=&quot;texinfo&quot;/&gt;
+	&lt;/packages&gt;
+	&lt;packages type=&quot;xen&quot;&gt;
+		&lt;package name=&quot;kernel-xen&quot; replaces=&quot;kernel-default&quot;/&gt;
+		&lt;package name=&quot;xen&quot;/&gt;
+	&lt;/packages&gt;
+	&lt;packages type=&quot;bootstrap&quot;&gt;
+		&lt;package name=&quot;filesystem&quot;/&gt;
+		&lt;package name=&quot;glibc-locale&quot;/&gt;
+	&lt;/packages&gt;
+	&lt;!-- Virtual Machine configurations --&gt;
+	&lt;vmwareconfig memory=&quot;256&quot; guestOS=&quot;suse&quot; HWversion=&quot;4&quot;&gt;
+		&lt;vmwaredisk controller=&quot;scsi&quot; id=&quot;0&quot;/&gt;
+		&lt;vmwarenic driver=&quot;e1000&quot; interface=&quot;0&quot; mode=&quot;bridged&quot;/&gt;
+	&lt;/vmwareconfig&gt;
+	&lt;xenconfig memory=&quot;256&quot;&gt;
+		&lt;xendisk device=&quot;/dev/sda&quot;/&gt;
+	&lt;/xenconfig&gt;
+&lt;/image&gt;
diff --git a/doc/examples/suse-11.1/suse-live-stick/root/etc/X11/xorg.conf b/template/suse-SLE10-JeOS/root/etc/X11/xorg.conf
similarity index 96%
copy from doc/examples/suse-11.1/suse-live-stick/root/etc/X11/xorg.conf
copy to template/suse-SLE10-JeOS/root/etc/X11/xorg.conf
index 5181a87..0059a32 100644
--- a/doc/examples/suse-11.1/suse-live-stick/root/etc/X11/xorg.conf
+++ b/template/suse-SLE10-JeOS/root/etc/X11/xorg.conf
@@ -1,10 +1,10 @@
 # generic XFree86 4.x configuration file
 
 Section &quot;Files&quot;
-  FontPath		&quot;/usr/share/fonts/truetype/&quot;
-  FontPath		&quot;/usr/share/fonts/uni/&quot;
-  FontPath		&quot;/usr/share/fonts/misc/&quot;
-  ModulePath		&quot;/usr/lib/xorg/modules&quot;
+  FontPath		&quot;/usr/X11R6/lib/X11/fonts/truetype/&quot;
+  FontPath		&quot;/usr/X11R6/lib/X11/fonts/uni/&quot;
+  FontPath		&quot;/usr/X11R6/lib/X11/fonts/misc/&quot;
+  ModulePath	&quot;/usr/X11R6/lib/modules&quot;
   InputDevices	&quot;/dev/ttyS0&quot;
   InputDevices	&quot;/dev/ttyS1&quot;
   InputDevices	&quot;/dev/ttyS2&quot;
@@ -225,6 +225,6 @@ Section &quot;ServerLayout&quot;
   InputDevice	&quot;Keyboard[0]&quot;	&quot;CoreKeyboard&quot;
   InputDevice  &quot;Mouse[1]&quot; &quot;CorePointer&quot;
   Option		&quot;Xinerama&quot;		&quot;off&quot;
-  Screen   &quot;Screen[vesa]&quot;
+  Screen   &quot;Screen[fbdev]&quot;
 EndSection
 
diff --git a/template/suse-SLE11-JeOS/root/etc/motd b/template/suse-SLE10-JeOS/root/etc/motd
similarity index 56%
copy from template/suse-SLE11-JeOS/root/etc/motd
copy to template/suse-SLE10-JeOS/root/etc/motd
index 85afcd2..93cef2e 100644
--- a/template/suse-SLE11-JeOS/root/etc/motd
+++ b/template/suse-SLE10-JeOS/root/etc/motd
@@ -1,7 +1,7 @@
-This is the Lime-JeOS SLE11 SuSE Linux System.
+This is the Lime-JeOS SLE10 SuSE Linux System.
 To upgrade your system call:
 
-    zypper addrepo &lt;SLE-Source&gt; suse-SLE11
+    zypper sa &lt;SLE-Source&gt; suse-SLE10
     zypper refresh
     zypper install -t product &lt;product-name&gt;
 
diff --git a/doc/examples/suse-10.3/suse-live-iso/root/etc/sysconfig/network/ifcfg-eth0 b/template/suse-SLE10-JeOS/root/etc/sysconfig/network/ifcfg-eth0
similarity index 100%
copy from doc/examples/suse-10.3/suse-live-iso/root/etc/sysconfig/network/ifcfg-eth0
copy to template/suse-SLE10-JeOS/root/etc/sysconfig/network/ifcfg-eth0


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001103.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 11e9984d02e9e5e74c61de8b86351aa49dffdafd
</A></li>
	<LI>Next message: <A HREF="001105.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-164-SuSE-10-3-Devel,	updated. 34635057e28845084d11bec8625567a98eaff1e7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1104">[ date ]</a>
              <a href="thread.html#1104">[ thread ]</a>
              <a href="subject.html#1104">[ subject ]</a>
              <a href="author.html#1104">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
