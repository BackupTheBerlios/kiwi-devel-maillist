<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. 7d3b3cf4942ed1321b790e65414fa7931f0d3422
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-374-SuSE-11-1-SLE-SP-Devel%2C%0A%09updated.%207d3b3cf4942ed1321b790e65414fa7931f0d3422&In-Reply-To=%3C200910281601.n9SG1uT1012437%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001562.html">
   <LINK REL="Next"  HREF="001564.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. 7d3b3cf4942ed1321b790e65414fa7931f0d3422</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-374-SuSE-11-1-SLE-SP-Devel%2C%0A%09updated.%207d3b3cf4942ed1321b790e65414fa7931f0d3422&In-Reply-To=%3C200910281601.n9SG1uT1012437%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. 7d3b3cf4942ed1321b790e65414fa7931f0d3422">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Wed Oct 28 17:01:56 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001562.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-2-Devel,	updated. 7d3b3cf4942ed1321b790e65414fa7931f0d3422
</A></li>
        <LI>Next message: <A HREF="001564.html">[Kiwi-devel] New function to set the runlevel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1563">[ date ]</a>
              <a href="thread.html#1563">[ thread ]</a>
              <a href="subject.html#1563">[ subject ]</a>
              <a href="author.html#1563">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, KIWI-374-SuSE-11-1-SLE-SP-Devel has been updated
       via  7d3b3cf4942ed1321b790e65414fa7931f0d3422 (commit)
       via  79b3627680c340dffacb3010a162723da25f0ea2 (commit)
       via  c427a8a7e2671a4ffb44a8ff2cb342ecc813d72a (commit)
       via  20c43c5841daca8a7273b3d9f26f3826a79f5008 (commit)
       via  38ecfd58c9933e8ffb0175357b8e494617e17c88 (commit)
      from  5d2a67713859f055cf3d50130a1ab836b649975d (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 7d3b3cf4942ed1321b790e65414fa7931f0d3422
Merge: 79b3627680c340dffacb3010a162723da25f0ea2 5d2a67713859f055cf3d50130a1ab836b649975d
Author: Adrian Schr&#195;&#182;ter &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">adrian at scherben.</A>(none)&gt;
Date:   Wed Oct 28 13:51:52 2009 +0100

    Merge branch 'master' of <A HREF="ssh://git.berlios.de/gitroot/kiwi">ssh://git.berlios.de/gitroot/kiwi</A>
    
    Conflicts:
    	modules/KIWICollect.pm

commit 79b3627680c340dffacb3010a162723da25f0ea2
Author: Adrian Schr&#195;&#182;ter &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">adrian at scherben.</A>(none)&gt;
Date:   Wed Oct 28 10:25:35 2009 +0100

    use true/false instead of yes/no to harmonize with rest of kiwi

commit c427a8a7e2671a4ffb44a8ff2cb342ecc813d72a
Author: Adrian Schr&#195;&#182;ter &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">adrian at scherben.</A>(none)&gt;
Date:   Wed Oct 28 10:16:49 2009 +0100

    use yes/no in REPO_ONLY to harmonize with MULTIPLE_MEDIA

commit 20c43c5841daca8a7273b3d9f26f3826a79f5008
Author: Adrian Schr&#195;&#182;ter &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">adrian at scherben.</A>(none)&gt;
Date:   Wed Oct 28 08:24:21 2009 +0100

    remove not used KIWI_COLLECT_TERMINAL_LOG enviroment variable, we use the --logfile switch since 11.1

commit 38ecfd58c9933e8ffb0175357b8e494617e17c88
Author: Adrian Schr&#195;&#182;ter &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">adrian at scherben.</A>(none)&gt;
Date:   Wed Oct 28 07:28:36 2009 +0100

    cleanup log states (lots of Warning -&gt; Information) and drop obsolete code.

-----------------------------------------------------------------------

Summary of changes:
diff --git a/modules/KIWICollect.pm b/modules/KIWICollect.pm
index 2accb86..71abb68 100644
--- a/modules/KIWICollect.pm
+++ b/modules/KIWICollect.pm
@@ -136,11 +136,6 @@ sub new {
 
   $this-&gt;{m_startUpTime}  = time();
 
-  if($this-&gt;{m_debug} &gt;= 2 || $ENV{'KIWI_COLLECT_TERMINAL_LOG'} ) {
-    # We will just print out, instead using the logger by default.
-    $this-&gt;{m_logStdOut} = 1;
-  }
-  
   # create second logger object to log only the data relevant
   # for repository creation:
 
@@ -182,7 +177,7 @@ sub new {
 
 
 #=================
-# my own log mechanism, very primitive, much faster for stdout.
+# my own log mechanism, very primitive, much faster if --logfile terminal is set
 #-----------------
 sub logMsg
 {
@@ -435,7 +430,7 @@ sub Init
   my @media = $this-&gt;getMediaNumbers();
   my $mult = $this-&gt;{m_proddata}-&gt;getVar(&quot;MULTIPLE_MEDIA&quot;, &quot;yes&quot;);
   my $dirext = undef;
-  if($mult eq &quot;no&quot;) {
+  if($mult eq &quot;no&quot; || $mult eq &quot;false&quot;) {
     if(scalar(@media) == 1) { 
       $dirext = 1;
     }
@@ -521,15 +516,15 @@ sub Init
   # create local directories as download targets. Normalising special chars (slash, dot, ...) by replacing with second param.
   foreach my $r(keys(%{$this-&gt;{m_repos}})) {
     #if($this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'} =~ m{^obs:.*}) {
-      $this-&gt;logMsg(&quot;W&quot;, &quot;[Init] resolving URL $this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'}...&quot;) if $this-&gt;{m_debug};
+      $this-&gt;logMsg(&quot;I&quot;, &quot;[Init] resolving URL $this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'}...&quot;) if $this-&gt;{m_debug};
       $this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'} = $this-&gt;{m_urlparser}-&gt;normalizePath($this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'});
-      $this-&gt;logMsg(&quot;W&quot;, &quot;[Init] resolved URL: $this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'}&quot;) if $this-&gt;{m_debug};
+      $this-&gt;logMsg(&quot;I&quot;, &quot;[Init] resolved URL: $this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'}&quot;) if $this-&gt;{m_debug};
     #}
     $this-&gt;{m_repos}-&gt;{$r}-&gt;{'basedir'} = $this-&gt;{m_basedir}.&quot;/&quot;.$this-&gt;{m_util}-&gt;normaliseDirname($this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'}, '-');
 
     $this-&gt;{m_dirlist}-&gt;{&quot;$this-&gt;{m_repos}-&gt;{$r}-&gt;{'basedir'}&quot;} = 1;
 
-    $this-&gt;logMsg(&quot;W&quot;, &quot;STEP 1.2 -- Expand path names for all repositories&quot;) if $this-&gt;{m_debug};
+    $this-&gt;logMsg(&quot;I&quot;, &quot;STEP 1.2 -- Expand path names for all repositories&quot;) if $this-&gt;{m_debug};
     $this-&gt;{m_repos}-&gt;{$r}-&gt;{'source'} =~ s{(.*)/$}{$1};  # strip off trailing slash in each repo (robust++)
     my @tmp;
 
@@ -592,16 +587,16 @@ sub mainTask
   $this-&gt;createMetadata();
 
   ## We create iso files by default, but keep this for manual override
-  if(defined $ENV{'KIWI_NO_ISO'}) {
-    $this-&gt;logMsg(&quot;W&quot;, &quot;Skipping ISO generation because of \$KIWI_NO_ISO&quot;);
+  if($this-&gt;{m_proddata}-&gt;getVar(&quot;REPO_ONLY&quot;) eq &quot;true&quot;) {
+    $this-&gt;logMsg(&quot;I&quot;, &quot;Skipping ISO generation due to REPO_ONLY setting&quot;);
     return 0;
   }
-  if($this-&gt;{m_proddata}-&gt;getVar(&quot;FLAVOR&quot;) eq &quot;ftp&quot;) {
-    $this-&gt;logMsg(&quot;I&quot;, &quot;Skipping ISO generation for FLAVOR ftp&quot;);
+  if(!$ENV{'KIWI_NO_ISO'}) { #to be removed
+    $this-&gt;logMsg(&quot;W&quot;, &quot;Skipping ISO generation due to KIWI_NO_ISO enviroment variable&quot;);
     return 0;
   }
-  if($this-&gt;{m_proddata}-&gt;getVar(&quot;REPO_ONLY&quot;, &quot;0&quot;) eq &quot;1&quot;) {
-    $this-&gt;logMsg(&quot;I&quot;, &quot;Skipping ISO generation because of repo_only&quot;);
+  if($this-&gt;{m_proddata}-&gt;getVar(&quot;FLAVOR&quot;) eq &quot;ftp&quot;) {
+    $this-&gt;logMsg(&quot;W&quot;, &quot;Skipping ISO generation for FLAVOR ftp, please use REPO_ONLY flag instead !&quot;);
     return 0;
   }
 
@@ -620,7 +615,7 @@ sub mainTask
       my $attr = &quot;-R -J -f -pad -joliet-long&quot;;
       $cdname =~ s{.*/(.*)/*$}{$1};
       my $checkmedia;
-      $checkmedia = &quot;checkmedia&quot; if ( $this-&gt;{m_proddata}-&gt;getVar(&quot;RUN_MEDIA_CHECK&quot;, &quot;0&quot;) ne &quot;0&quot; );
+      $checkmedia = &quot;checkmedia&quot; if ( defined($this-&gt;{m_proddata}-&gt;getVar(&quot;RUN_MEDIA_CHECK&quot;)) and $this-&gt;{m_proddata}-&gt;getVar(&quot;RUN_MEDIA_CHECK&quot;) ne &quot;0&quot; and $this-&gt;{m_proddata}-&gt;getVar(&quot;RUN_MEDIA_CHECK&quot;) ne &quot;false&quot;   );
       $iso = new KIWIIsoLinux($this-&gt;{m_logger}, $this-&gt;{m_basesubdir}-&gt;{$cd}, $this-&gt;{m_united}.&quot;/$cdname.iso&quot;,$attr,$checkmedia);
       if(!$iso-&gt;callBootMethods()) {
         $this-&gt;logMsg(&quot;W&quot;, &quot;Creating boot methods failed, medium maybe not be bootable&quot;);
@@ -753,29 +748,29 @@ sub setupPackageFiles
   	$this-&gt;logMsg(&quot;I&quot;, &quot;  process $usedPackages-&gt;{_name}-&gt;{label} package links: ($count_packs/$num_packs), running $str minutes&quot;);
         $last_progress_time = time() + 5;
       }
-      $this-&gt;logMsg(&quot;W&quot;, &quot;Evaluate package $packName for @archs&quot;) if $this-&gt;{m_debug} &gt;= 4;
+      $this-&gt;logMsg(&quot;I&quot;, &quot;Evaluate package $packName for @archs&quot;) if $this-&gt;{m_debug} &gt;= 4;
     }
 
     ARCH:foreach my $requestedArch(@archs) {
-      $this-&gt;logMsg(&quot;W&quot;, &quot;  Evaluate package $packName for requested arch $requestedArch&quot;) if $this-&gt;{m_debug} &gt;= 5;
+      $this-&gt;logMsg(&quot;I&quot;, &quot;  Evaluate package $packName for requested arch $requestedArch&quot;) if $this-&gt;{m_debug} &gt;= 5;
 
       my @fallbacklist;
       if($nofallback==0 &amp;&amp; $mode != 2) {
 	@fallbacklist = $this-&gt;{m_archlist}-&gt;fallbacks($requestedArch);
-        $this-&gt;logMsg(&quot;W&quot;, &quot; Look for fallbacks fallbacks&quot;) if $this-&gt;{m_debug} &gt;= 6;
+        $this-&gt;logMsg(&quot;I&quot;, &quot; Look for fallbacks fallbacks&quot;) if $this-&gt;{m_debug} &gt;= 6;
       }
       if ( ! @fallbacklist ) {
         $nofallback = 1;
 	@fallbacklist = ($requestedArch);
-        $this-&gt;logMsg(&quot;W&quot;, &quot;    Run without fallbacks&quot;) if $this-&gt;{m_debug} &gt;= 6;
+        $this-&gt;logMsg(&quot;I&quot;, &quot;    Run without fallbacks&quot;) if $this-&gt;{m_debug} &gt;= 6;
       }
-      $this-&gt;logMsg(&quot;W&quot;, &quot;    Use as expanded architectures &gt;&quot;.join(&quot; &quot;, @fallbacklist).&quot;&lt;&quot;) if $this-&gt;{m_debug} &gt;= 5;
+      $this-&gt;logMsg(&quot;I&quot;, &quot;    Use as expanded architectures &gt;&quot;.join(&quot; &quot;, @fallbacklist).&quot;&lt;&quot;) if $this-&gt;{m_debug} &gt;= 5;
       my $fb_available = 0;
       FA:foreach my $arch(@fallbacklist) {
-        $this-&gt;logMsg(&quot;W&quot;, &quot;    check architecture $arch &quot;) if $this-&gt;{m_debug} &gt;= 5;
+        $this-&gt;logMsg(&quot;I&quot;, &quot;    check architecture $arch &quot;) if $this-&gt;{m_debug} &gt;= 5;
         PACKKEY:foreach my $packKey( sort{$poolPackages-&gt;{$a}-&gt;{priority} &lt;=&gt; $poolPackages-&gt;{$b}-&gt;{priority}} keys(%{$poolPackages})) {
         # FIXME: check for forcerepo
-          $this-&gt;logMsg(&quot;W&quot;, &quot;    check $packKey &quot;) if $this-&gt;{m_debug} &gt;= 5;
+          $this-&gt;logMsg(&quot;I&quot;, &quot;    check $packKey &quot;) if $this-&gt;{m_debug} &gt;= 5;
 
           my $packPointer = $poolPackages-&gt;{$packKey};
 	  if ( $packPointer-&gt;{arch} ne $arch ) {
@@ -812,9 +807,9 @@ sub setupPackageFiles
             $this-&gt;logMsg(&quot;I&quot;, &quot;  linked file $packPointer-&gt;{'localfile'} to $packOptions-&gt;{'newpath'}/$packOptions-&gt;{'newfile'}&quot;) if $this-&gt;{m_debug} &gt;= 4;
             if ($this-&gt;{m_debug} &gt;= 2) {
               if ($arch eq $requestedArch) {
-                $this-&gt;logMsg(&quot;D&quot;, &quot;  package $packName found for architecture $arch as $packKey&quot;);
+                $this-&gt;logMsg(&quot;I&quot;, &quot;  package $packName found for architecture $arch as $packKey&quot;);
               }else{
-                $this-&gt;logMsg(&quot;D&quot;, &quot;  package $packName found for architecture $arch (fallback of $requestedArch) as $packKey&quot;);
+                $this-&gt;logMsg(&quot;I&quot;, &quot;  package $packName found for architecture $arch (fallback of $requestedArch) as $packKey&quot;);
               }
             }
             if ( $mode == 1 &amp;&amp; $packPointer-&gt;{sourcepackage} ) {
@@ -854,7 +849,7 @@ sub setupPackageFiles
 	}
 	$this-&gt;logMsg(&quot;W&quot;, &quot;     =&gt; package $packName not available for arch $arch in any repo&quot;) if $this-&gt;{m_debug} &gt;= 4;
       } # /@fallbackarch
-      $this-&gt;logMsg(&quot;W&quot;, &quot;    =&gt; package $packName not available for $requestedArch nor its fallbacks&quot;) if $this-&gt;{m_debug} &gt;= 3;
+      $this-&gt;logMsg(&quot;W&quot;, &quot;    =&gt; package $packName not available for $requestedArch nor its fallbacks&quot;) if $this-&gt;{m_debug} &gt;= 1;
     } # /@archs
   }
   return $retval;
@@ -1042,7 +1037,7 @@ sub unpackMetapackages
           next PACKKEY if(!$packPointer-&gt;{'localfile'}); # should not be needed
           next PACKKEY if($packPointer-&gt;{arch} ne $arch);
 
-          $this-&gt;logMsg(&quot;W&quot;, &quot;unpack $packPointer-&gt;{'localfile'} &quot;);
+          $this-&gt;logMsg(&quot;I&quot;, &quot;unpack $packPointer-&gt;{'localfile'} &quot;);
           $this-&gt;{m_util}-&gt;unpac_package($packPointer-&gt;{'localfile'}, &quot;$tmp&quot;);
           ## all metapackages contain at least a CD1 dir and _may_ contain another /usr/share/&lt;name&gt; dir
           if ( -d &quot;$tmp/CD1&quot;) {
@@ -1071,13 +1066,13 @@ sub unpackMetapackages
           for(2..10) {
             if(-d &quot;$tmp/CD$_&quot; and defined $this-&gt;{m_basesubdir}-&gt;{$_}) {
               qx(cp -a $tmp/CD$_/* $this-&gt;{m_basesubdir}-&gt;{$_});
-              $this-&gt;logMsg(&quot;W&quot;, &quot;Unpack CD$_ for $packPointer-&gt;{name} &quot;);
+              $this-&gt;logMsg(&quot;I&quot;, &quot;Unpack CD$_ for $packPointer-&gt;{name} &quot;);
             }
             ## add handling for &quot;DVD&lt;i&gt;&quot; subdirs if necessary FIXME
           }
 
           ## THEMING
-          $this-&gt;logMsg(&quot;W&quot;, &quot;Handling theming for package $metapack&quot;) if $this-&gt;{m_debug};
+          $this-&gt;logMsg(&quot;I&quot;, &quot;Handling theming for package $metapack&quot;) if $this-&gt;{m_debug};
           my $thema = $this-&gt;{m_proddata}-&gt;getVar(&quot;PRODUCT_THEME&quot;);
 
           $this-&gt;logMsg(&quot;I&quot;, &quot;\ttarget theme $thema&quot;);
@@ -1092,7 +1087,7 @@ sub unpackMetapackages
             my $found=0;
             foreach my $d(@themes) {
               if($d =~ m{$thema}i) {
-                $this-&gt;logMsg(&quot;W&quot;, &quot;Using thema $d&quot;);
+                $this-&gt;logMsg(&quot;I&quot;, &quot;Using thema $d&quot;);
                 $thema = $d;	# changed after I saw that yast2-slideshow has a thema &quot;SuSE-SLES&quot; (matches &quot;SuSE&quot;, but not in line 831)
                 $found=1;
                 last;
@@ -1134,7 +1129,7 @@ sub unpackMetapackages
 
             # TODO I don't like this. Not at all. use chroot in next version!
             qx(chmod u+x &quot;$this-&gt;{m_scriptbase}/$scriptfile&quot;);
-            $this-&gt;logMsg(&quot;W&quot;, &quot;[executeScripts] Execute script $this-&gt;{m_scriptbase}/$scriptfile:&quot;);
+            $this-&gt;logMsg(&quot;I&quot;, &quot;[executeScripts] Execute script $this-&gt;{m_scriptbase}/$scriptfile:&quot;);
             if(-f &quot;$this-&gt;{m_scriptbase}/$scriptfile&quot; and -x &quot;$this-&gt;{m_scriptbase}/$scriptfile&quot;) {
               my $status = qx($this-&gt;{m_scriptbase}/$scriptfile);
               my $retcode = $? &gt;&gt; 8;
@@ -1216,15 +1211,11 @@ sub executeMetafileScripts
 
       # TODO I don't like this. Not at all. use chroot in next version!
       qx(chmod u+x &quot;$this-&gt;{m_scriptbase}/$scriptfile&quot;);
-      $this-&gt;logMsg(&quot;W&quot;, &quot;[executeScripts] Execute script $this-&gt;{m_scriptbase}/$scriptfile:&quot;);
+      $this-&gt;logMsg(&quot;I&quot;, &quot;[executeScripts] Execute script $this-&gt;{m_scriptbase}/$scriptfile:&quot;);
       if(-f &quot;$this-&gt;{m_scriptbase}/$scriptfile&quot; and -x &quot;$this-&gt;{m_scriptbase}/$scriptfile&quot;) {
 	my $status = qx($this-&gt;{m_scriptbase}/$scriptfile);
 	my $retcode = $? &gt;&gt; 8;
-	print &quot;STATUS:\n$status\n&quot;;
-	print &quot;RETURNED:\n$retcode\n&quot;;
-        if ($retcode) {
-		$ret = 1;
-        }
+        $this-&gt;logMsg(&quot;I&quot;, &quot;[executeScripts] Script $this-&gt;{m_scriptbase}/$scriptfile returned with $status($retcode).&quot;);
       }
       else {
 	$this-&gt;logMsg(&quot;W&quot;, &quot;[executeScripts] script $this-&gt;{m_scriptbase}/$scriptfile for metafile $metafile could not be executed successfully!&quot;);
@@ -1503,25 +1494,6 @@ sub getArchList
 }
 
 
-sub failedPackagesWarning
-{
-  my $this = shift;
-  my $call = shift;
-  my $numf = shift;
-  my $flist = shift;
-
-  goto all_ok if($numf == 0);
-
-  $this-&gt;logMsg(&quot;W&quot;, &quot;$call: $numf packages not found&quot;);
-  foreach my $pack(@{$flist}) {
-    $this-&gt;logMsg(&quot;E&quot;, &quot;[collectPackages]\t$pack&quot;);
-  }
-
-  all_ok:
-  return;
-}
-
-
 
 #==========================================
 # createMetadata
@@ -1539,7 +1511,7 @@ sub createMetadata
   # create required directories if necessary:
   foreach my $i(keys(%plugins)) {
     my $p = $plugins{$i};
-    $this-&gt;logMsg(&quot;W&quot;, &quot;Processing plugin &quot;.$p-&gt;name().&quot;&quot;);
+    $this-&gt;logMsg(&quot;I&quot;, &quot;Processing plugin &quot;.$p-&gt;name().&quot;&quot;);
     my @requireddirs = $p-&gt;requiredDirs();
     # this may be a list and each entry may look like &quot;/foo/bar/baz/&quot; in the worst case.
     foreach my $dir(@requireddirs) {
@@ -1554,10 +1526,10 @@ sub createMetadata
   }
   # that should be all, bit by bit and in order ;)
   $this-&gt;createDirectoryStructure();
-  #$this-&gt;logMsg(&quot;W&quot;, &quot;Enabling all plugins...&quot;);
+  #$this-&gt;logMsg(&quot;I&quot;, &quot;Enabling all plugins...&quot;);
   #$this-&gt;{m_metacreator}-&gt;enableAllPlugins();
 
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Executing all plugins...&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Executing all plugins...&quot;);
   $this-&gt;{m_metacreator}-&gt;createMetadata();
   # creates the patters file. Rest will follow later
 
@@ -1566,21 +1538,21 @@ sub createMetadata
 
 # moved to beginnig after diffing with autobuild:
   ## STEP 11: ChangeLog file
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Running mk_changelog for base directory&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Running mk_changelog for base directory&quot;);
   my $mk_cl = &quot;/usr/bin/mk_changelog&quot;;
   if(! (-f $mk_cl or -x $mk_cl)) {
-    $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] excutable `$mk_cl` not found. Maybe package `inst-source-utils` is not installed?&quot;);
+    $this-&gt;logMsg(&quot;E&quot;, &quot;[createMetadata] excutable `$mk_cl` not found. Maybe package `inst-source-utils` is not installed?&quot;);
     return;
   }
   my @data = qx($mk_cl $this-&gt;{m_basesubdir}-&gt;{'1'});
   my $res = $? &gt;&gt; 8;
   if($res == 0) {
-    $this-&gt;logMsg(&quot;W&quot;, &quot;$mk_cl finished successfully.&quot;);
+    $this-&gt;logMsg(&quot;I&quot;, &quot;$mk_cl finished successfully.&quot;);
   }
   else {
-    $this-&gt;logMsg(&quot;W&quot;, &quot;$mk_cl finished with errors: returncode was $res&quot;);
+    $this-&gt;logMsg(&quot;E&quot;, &quot;$mk_cl finished with errors: returncode was $res&quot;);
   }
-  $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] $mk_cl output:&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;[createMetadata] $mk_cl output:&quot;);
   foreach(@data) {
     chomp $_;
     $this-&gt;logMsg(&quot;I&quot;, &quot;\t$_&quot;);
@@ -1590,7 +1562,7 @@ sub createMetadata
 
 
   ## step 5: media file
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Creating media file in all media:&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Creating media file in all media:&quot;);
   my $manufacturer = $this-&gt;{m_proddata}-&gt;getVar(&quot;VENDOR&quot;);
   if($manufacturer) {
     my @media = $this-&gt;getMediaNumbers();
@@ -1627,11 +1599,10 @@ sub createMetadata
   }
   else { 
     $this-&gt;logMsg(&quot;E&quot;, &quot;[createMetadata] required variable \&quot;VENDOR\&quot; not set&quot;);
-    $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] skipping media file due to error!&quot;);
   }
 
   ## step 5b: create info.txt for Beta releases.
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Handling Beta information on media:&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Handling Beta information on media:&quot;);
   my $beta_version = $this-&gt;{m_proddata}-&gt;getOpt(&quot;BETA_VERSION&quot;);
   if (defined($beta_version)) {
     my $dist_string = $this-&gt;{m_proddata}-&gt;getVar(&quot;DISTNAME&quot;).&quot; &quot;.$this-&gt;{m_proddata}-&gt;getVar(&quot;PRODUCT_VERSION&quot;).&quot; &quot;.${beta_version};
@@ -1651,7 +1622,7 @@ sub createMetadata
   }
 
   ## step 6: products file
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Creating products file in all media:&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Creating products file in all media:&quot;);
   my $proddir  = $this-&gt;{m_proddata}-&gt;getVar(&quot;PRODUCT_DIR&quot;);
   my $prodname = $this-&gt;{m_proddata}-&gt;getVar(&quot;PRODUCT_NAME&quot;);
   my $summary = $this-&gt;{m_proddata}-&gt;getInfo(&quot;LABEL&quot;);
@@ -1675,18 +1646,13 @@ sub createMetadata
     }
   }
   else {
-    $this-&gt;logMsg(&quot;E&quot;, &quot;[createMetadata] one or more of the following  variables are missing:&quot;);
-    $this-&gt;logMsg(&quot;E&quot;,&quot;\tPRODUCT_DIR&quot;);
-    $this-&gt;logMsg(&quot;E&quot;,&quot;\tPRODUCT_NAME&quot;);
-    $this-&gt;logMsg(&quot;E&quot;,&quot;\tPRODUCT_VERSION&quot;);
-    $this-&gt;logMsg(&quot;E&quot;,&quot;\tLABEL&quot;);
-    $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] skipping products file due to missing vars!&quot;);
+    $this-&gt;logMsg(&quot;E&quot;, &quot;[createMetadata] one or more of the following  variables are missing: PRODUCT_DIR|PRODUCT_NAME|PRODUCT_VERSION|LABEL&quot;);
   }
 
   $this-&gt;createBootPackageLinks();
 
   ## step 9: LISTINGS
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Calling mk_listings:&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Calling mk_listings:&quot;);
   my $listings = &quot;/usr/bin/mk_listings&quot;;
   if(! (-f $listings or -x $listings)) {
     $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] excutable `$listings` not found. Maybe package `inst-source-utils` is not installed?&quot;);
@@ -1695,7 +1661,7 @@ sub createMetadata
   my $cmd = &quot;$listings &quot;.$this-&gt;{m_basesubdir}-&gt;{'1'};
   @data = qx($cmd);
   undef $cmd;
-  $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] $listings output:&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;[createMetadata] $listings output:&quot;);
   foreach(@data) {
     chomp $_;
     $this-&gt;logMsg(&quot;I&quot;, &quot;\t$_&quot;);
@@ -1705,7 +1671,7 @@ sub createMetadata
 
 
   ## step 7: SHA1SUMS
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Calling create_sha1sums:&quot;);
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Calling create_sha1sums:&quot;);
   my $csha1sum = &quot;/usr/bin/create_sha1sums&quot;;
   my $s1sum_opts = $this-&gt;{m_proddata}-&gt;getVar(&quot;SHA1OPT&quot;);
   if(not defined($s1sum_opts)) {
@@ -1719,8 +1685,9 @@ sub createMetadata
     my @data = qx($csha1sum $s1sum_opts $this-&gt;{m_basesubdir}-&gt;{$sd});
     if ($? &gt;&gt; 8 != 0) {
 	$this-&gt;logMsg(&quot;E&quot;, &quot;[createMetadata] $csha1sum failed&quot;);
+    }else{
+        $this-&gt;logMsg(&quot;I&quot;, &quot;[createMetadata] $csha1sum output:&quot;);
     }
-    $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] $csha1sum output:&quot;);
     foreach(@data) {
       chomp $_;
       $this-&gt;logMsg(&quot;I&quot;, &quot;\t$_&quot;);
@@ -1728,32 +1695,8 @@ sub createMetadata
   }
 
 
-  ### step 8: MD5SUMS
-  #$this-&gt;logMsg(&quot;W&quot;, &quot;Calling create_md5sums:&quot;);
-  #my $md5sums = &quot;/usr/bin/create_md5sums&quot;;
-  #my $md5opt = $this-&gt;{m_proddata}-&gt;getVar(&quot;MD5OPT&quot;);
-  ## available option: '--meta'
-  #if(not defined($md5opt)) {
-  #  $md5opt = &quot;&quot;;
-  #}
-  #if(! (-f $md5sums or -x $md5sums)) {
-  #  $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] excutable `$md5sums` not found. Maybe package `inst-source-utils` is not installed?&quot;);
-  #  return;
-  #}
-  #my $cmd = &quot;$md5sums $md5opt &quot;;
-  #$cmd .= $this-&gt;{m_basesubdir}-&gt;{1}.&quot;/&quot;.$this-&gt;{m_proddata}-&gt;getInfo(&quot;DATADIR&quot;);
-  #my @data = qx($cmd);
-  #undef $cmd;
-  #$this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] $md5sums output:&quot;);
-  #foreach(@data) {
-  #  chomp $_;
-  #  $this-&gt;logMsg(&quot;I&quot;, &quot;\t$_\n&quot;);
-  #}
-  #@data = (); # clear list
-
-
-  ## step 10: DIRECTORY.YAST FILES
-  $this-&gt;logMsg(&quot;W&quot;, &quot;Calling create_directory.yast:&quot;);
+  ## step 8: DIRECTORY.YAST FILES
+  $this-&gt;logMsg(&quot;I&quot;, &quot;Calling create_directory.yast:&quot;);
   my $dy = &quot;/usr/bin/create_directory.yast&quot;;
   if(! (-f $dy or -x $dy)) {
     $this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] excutable `$dy` not found. Maybe package `inst-source-utils` is not installed?&quot;);
@@ -1787,7 +1730,7 @@ sub createMetadata
     foreach (@dlist) {
       if(-d $_) {
 	@data = qx($dy $_);
-	$this-&gt;logMsg(&quot;W&quot;, &quot;[createMetadata] $dy output for directory $_:&quot;);
+	$this-&gt;logMsg(&quot;I&quot;, &quot;[createMetadata] $dy output for directory $_:&quot;);
 	foreach(@data) {
 	  chomp $_;
 	  $this-&gt;logMsg(&quot;I&quot;, &quot;\t$_&quot;);
@@ -1875,30 +1818,6 @@ sub rpmlist_find_cb
 
 
 
-#sub getSrcList
-#{
-#  my $this = shift;
-#  my $p = shift;
-#
-#  return undef if(!$p);
-#
-#  my %src;
-#  foreach my $a(keys(%{$this-&gt;{m_packages}-&gt;{$p}})) {
-#    next if($a =~ m{(arch|addarch|removearch|onlyarch|source|script|medium)});
-#    if(!$this-&gt;{m_packages}-&gt;{$p}-&gt;{$a}-&gt;{'localfile'}) {
-#      # pack without source is b&#195;&#164;h!
-#      goto error;
-#    }
-#    $src{$a} = $this-&gt;{m_packages}-&gt;{$p}-&gt;{$a}-&gt;{'localfile'}
-#  }
-#  return %src;
-#
-#  error:
-#  $this-&gt;logMsg(&quot;W&quot;, &quot;[getSrcList] source not defined, method called before downloads complete!&quot;);
-#  return undef;
-#}
-#
-
 
 #==========================================
 # createDirecotryStructure
@@ -1929,7 +1848,7 @@ sub createDirectoryStructure
       $errors++;
     }
     else {
-      $this-&gt;logMsg(&quot;W&quot;, &quot;created directory $d&quot;) if $this-&gt;{m_debug};
+      $this-&gt;logMsg(&quot;I&quot;, &quot;created directory $d&quot;) if $this-&gt;{m_debug};
       $dirs{$d} = 0;
     }
   }


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001562.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-2-Devel,	updated. 7d3b3cf4942ed1321b790e65414fa7931f0d3422
</A></li>
	<LI>Next message: <A HREF="001564.html">[Kiwi-devel] New function to set the runlevel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1563">[ date ]</a>
              <a href="thread.html#1563">[ thread ]</a>
              <a href="subject.html#1563">[ subject ]</a>
              <a href="author.html#1563">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
