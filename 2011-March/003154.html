<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-480-SuSE-11.4-Devel,	updated. a22464de7ec1df6b9d31e6878d8751d7b7fd464b
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-480-SuSE-11.4-Devel%2C%0A%09updated.%20a22464de7ec1df6b9d31e6878d8751d7b7fd464b&In-Reply-To=%3C20110303135218.1A35B480D40%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003164.html">
   <LINK REL="Next"  HREF="003157.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-480-SuSE-11.4-Devel,	updated. a22464de7ec1df6b9d31e6878d8751d7b7fd464b</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-480-SuSE-11.4-Devel%2C%0A%09updated.%20a22464de7ec1df6b9d31e6878d8751d7b7fd464b&In-Reply-To=%3C20110303135218.1A35B480D40%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-480-SuSE-11.4-Devel,	updated. a22464de7ec1df6b9d31e6878d8751d7b7fd464b">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Thu Mar  3 14:52:17 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003164.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 6adaa13315762334ed5f330c6dfb723b427622d8
</A></li>
        <LI>Next message: <A HREF="003157.html">[Kiwi-devel] Setting the number of CPUs for a VM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3154">[ date ]</a>
              <a href="thread.html#3154">[ thread ]</a>
              <a href="subject.html#3154">[ subject ]</a>
              <a href="author.html#3154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, KIWI-480-SuSE-11.4-Devel has been updated
       via  a22464de7ec1df6b9d31e6878d8751d7b7fd464b (commit)
       via  3b7881a1e9bede8a594f64565b6892abd4c4fd3b (commit)
       via  712a2ab4b20a9f00da365ec2c4d0a092ff36a5aa (commit)
      from  87624d99bdc33a24729d967e136eed085aac7bab (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit a22464de7ec1df6b9d31e6878d8751d7b7fd464b
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Thu Mar 3 13:02:17 2011 +0100

    - fixed xsl stylesheet convert47to48.xsl. existing lvmvolumes
      section wasn't translated into systemdisk section

commit 3b7881a1e9bede8a594f64565b6892abd4c4fd3b
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Thu Mar 3 09:50:52 2011 +0100

    - update RNG schema ec2region comment

commit 712a2ab4b20a9f00da365ec2c4d0a092ff36a5aa
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Thu Mar 3 09:45:08 2011 +0100

    - added support for the new EC2 Japan region

-----------------------------------------------------------------------

Summary of changes:
diff --git a/modules/KIWIEC2Region.txt b/modules/KIWIEC2Region.txt
index a21a26f..133c7f6 100644
--- a/modules/KIWIEC2Region.txt
+++ b/modules/KIWIEC2Region.txt
@@ -1,6 +1,8 @@
 # /.../
 # Ec2 region table for correct Amazon kernel (aki) assignment
 # ----
+AP-Japan-i386=aki-d209a2d3
+AP-Japan-x86_64=aki-d409a2d5
 AP-Singapore-i386=aki-13d5aa41
 AP-Singapore-x86_64=aki-11d5aa43
 EU-West-i386=aki-4deec439
diff --git a/modules/KIWISchema.rnc b/modules/KIWISchema.rnc
index da16355..0fabdf8 100644
--- a/modules/KIWISchema.rnc
+++ b/modules/KIWISchema.rnc
@@ -292,7 +292,7 @@ div {
 		db:para [
 			&quot;Specify the region/availability zone in EC2 for this image.\x{a}&quot;~
 			&quot;Values are limited to the EC2 recognized zones:\x{a}&quot;~
-			&quot;AP-Singapore, EU-West, US-East, and US-West&quot;
+			&quot;AP-Japan, AP-Singapore, EU-West, US-East, and US-West&quot;
 		]
 		]
 		element ec2region {
diff --git a/modules/KIWISchema.rng b/modules/KIWISchema.rng
index b8ec028..91b9e8f 100644
--- a/modules/KIWISchema.rng
+++ b/modules/KIWISchema.rng
@@ -444,7 +444,7 @@ cert-*.pem&lt;/a:documentation&gt;
         &lt;a:documentation&gt;Specify the region/availability zone&lt;/a:documentation&gt;
         &lt;db:para&gt;Specify the region/availability zone in EC2 for this image.
 Values are limited to the EC2 recognized zones:
-AP-Singapore, EU-West, US-East, and US-West&lt;/db:para&gt;
+AP-Japan, AP-Singapore, EU-West, US-East, and US-West&lt;/db:para&gt;
         &lt;ref name=&quot;k.ec2region.attlist&quot;/&gt;
         &lt;text/&gt;
       &lt;/element&gt;
diff --git a/modules/KIWIXMLValidator.pm b/modules/KIWIXMLValidator.pm
index 730a21c..2f4c803 100644
--- a/modules/KIWIXMLValidator.pm
+++ b/modules/KIWIXMLValidator.pm
@@ -247,7 +247,7 @@ sub __checkEC2Regions {
 		return 1;
 	}
 	my @regions = $ec2ConfNodes[0] -&gt; getElementsByTagName('ec2region');
-	my @supportedRegions = qw /AP-Singapore EU-West US-East US-West/;
+	my @supportedRegions = qw /AP-Japan AP-Singapore EU-West US-East US-West/;
 	my @selectedRegions = ();
 	for my $region (@regions) {
 		my $regionStr = $region -&gt; textContent();
diff --git a/tests/unit/lib/Test/xmlValidator.pm b/tests/unit/lib/Test/xmlValidator.pm
index e4661d4..26d10a3 100644
--- a/tests/unit/lib/Test/xmlValidator.pm
+++ b/tests/unit/lib/Test/xmlValidator.pm
@@ -276,11 +276,12 @@ sub test_ec2Regions {
 		my $kiwi = $this -&gt; {kiwi};
 		my $msg = $kiwi -&gt; getMessage();
 		my $expectedMsg;
+		my @supportedRegions=qw /AP-Japan AP-Singapore EU-West US-East US-West/;
 		if ( $iConfFile =~ 'ec2RegionInvalid_1.xml' ) {
 			$expectedMsg = 'Specified region EU-West not unique';
 		} else {
-			$expectedMsg = 'Only one of AP-Singapore EU-West US-East US-West '
-			. 'may be specified as ec2region';
+			$expectedMsg = &quot;Only one of @supportedRegions may be specified &quot;
+			. 'as ec2region';
 		}
 		$this -&gt; assert_str_equals($expectedMsg, $msg);
 		my $msgT = $kiwi -&gt; getMessageType();
diff --git a/xsl/convert47to48.xsl b/xsl/convert47to48.xsl
index 6ee70f3..3662022 100644
--- a/xsl/convert47to48.xsl
+++ b/xsl/convert47to48.xsl
@@ -16,7 +16,7 @@
 	&lt;xsl:choose&gt;
 		&lt;xsl:when test=&quot;$content = 'true'&quot;&gt;
 			&lt;systemdisk name=&quot;kiwiVG&quot;&gt;
-			&lt;volume name=&quot;/home&quot; freespace=&quot;200M&quot;/&gt;
+				&lt;volume name=&quot;/home&quot; freespace=&quot;200M&quot;/&gt;
 			&lt;/systemdisk&gt;
 		&lt;/xsl:when&gt;
 		&lt;xsl:otherwise&gt;
@@ -59,13 +59,11 @@
 		&lt;xsl:copy-of select=&quot;@*[not(local-name(.) = 'lvm')]&quot;/&gt;
 		&lt;xsl:choose&gt;
 			&lt;xsl:when test=&quot;lvmvolumes&quot;&gt;
+				&lt;xsl:variable name=&quot;content&quot;
+					select=&quot;translate(normalize-space(oemconfig/oem-home), 
+							&uppercase;, &lowercase;)&quot;
+				/&gt;
 				&lt;xsl:choose&gt;
-					&lt;xsl:when test=&quot;oemconfig/oem-home&quot;&gt;
-					&lt;xsl:variable name=&quot;content&quot;
-						select=&quot;translate(normalize-space(oemconfig/oem-home), 
-								&uppercase;, &lowercase;)&quot;
-					/&gt;
-					&lt;xsl:choose&gt;
 					&lt;xsl:when test=&quot;$content = 'true'&quot;&gt;
 						&lt;xsl:apply-templates
 							select=&quot;*[not(self::lvmvolumes)]&quot; mode=&quot;conv47to48&quot;
@@ -74,8 +72,9 @@
 							mode=&quot;mode-volumes&quot;
 						/&gt;
 					&lt;/xsl:when&gt;
-					&lt;/xsl:choose&gt;
-					&lt;/xsl:when&gt;
+					&lt;xsl:otherwise&gt;
+						&lt;xsl:apply-templates mode=&quot;conv47to48&quot;/&gt;
+					&lt;/xsl:otherwise&gt;
 				&lt;/xsl:choose&gt;
 			&lt;/xsl:when&gt;
 			&lt;xsl:otherwise&gt;


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003164.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 6adaa13315762334ed5f330c6dfb723b427622d8
</A></li>
	<LI>Next message: <A HREF="003157.html">[Kiwi-devel] Setting the number of CPUs for a VM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3154">[ date ]</a>
              <a href="thread.html#3154">[ thread ]</a>
              <a href="subject.html#3154">[ subject ]</a>
              <a href="author.html#3154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
