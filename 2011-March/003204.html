<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, ppc,	updated. b5a3effa576a0a65629ff6395dc06836b2370e6b
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20ppc%2C%0A%09updated.%20b5a3effa576a0a65629ff6395dc06836b2370e6b&In-Reply-To=%3C20110316095333.DD27648140F%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003201.html">
   <LINK REL="Next"  HREF="003207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, ppc,	updated. b5a3effa576a0a65629ff6395dc06836b2370e6b</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20ppc%2C%0A%09updated.%20b5a3effa576a0a65629ff6395dc06836b2370e6b&In-Reply-To=%3C20110316095333.DD27648140F%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, ppc,	updated. b5a3effa576a0a65629ff6395dc06836b2370e6b">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Wed Mar 16 10:53:32 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003201.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. e2f8e2ebb35f68598a067d785c31ecc489d9a6e1
</A></li>
        <LI>Next message: <A HREF="003207.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 3d8962c28abf12ccd15ad715db1c2fe90e2d75a6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3204">[ date ]</a>
              <a href="thread.html#3204">[ thread ]</a>
              <a href="subject.html#3204">[ subject ]</a>
              <a href="author.html#3204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, ppc has been updated
       via  b5a3effa576a0a65629ff6395dc06836b2370e6b (commit)
       via  6d21468e6ef9d2c2a05971ab11598f5032456fdd (commit)
       via  e2f8e2ebb35f68598a067d785c31ecc489d9a6e1 (commit)
      from  1b726d5a8c529ae7e3fc6dd15160764a800bfac4 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit b5a3effa576a0a65629ff6395dc06836b2370e6b
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Wed Mar 16 10:52:36 2011 +0100

    - added support for vmx image type on ppc architecture
    - added suse-SLE11-JeOS template for ppc architecture

commit 6d21468e6ef9d2c2a05971ab11598f5032456fdd
Merge: 1b726d5 e2f8e2e
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Wed Mar 16 10:43:59 2011 +0100

    Merge remote branch 'origin/master' into ppc

-----------------------------------------------------------------------

Summary of changes:
diff --git a/doc/examples/suse-11.2/suse-vm-guest/config.sh b/doc/examples/suse-11.2/suse-vm-guest/config.sh
index d5a159e..7785932 100755
--- a/doc/examples/suse-11.2/suse-vm-guest/config.sh
+++ b/doc/examples/suse-11.2/suse-vm-guest/config.sh
@@ -40,9 +40,6 @@ suseInsertService boot.device-mapper
 #======================================
 # SuSEconfig
 #--------------------------------------
-baseUpdateSysConfig /etc/sysconfig/windowmanager DEFAULT_WM kde
-baseUpdateSysConfig /etc/sysconfig/displaymanager DISPLAYMANAGER kdm
-baseSetRunlevel 5
 suseConfig
 
 #======================================
diff --git a/doc/examples/suse-11.3/suse-vm-guest/config.sh b/doc/examples/suse-11.3/suse-vm-guest/config.sh
index d5a159e..7785932 100755
--- a/doc/examples/suse-11.3/suse-vm-guest/config.sh
+++ b/doc/examples/suse-11.3/suse-vm-guest/config.sh
@@ -40,9 +40,6 @@ suseInsertService boot.device-mapper
 #======================================
 # SuSEconfig
 #--------------------------------------
-baseUpdateSysConfig /etc/sysconfig/windowmanager DEFAULT_WM kde
-baseUpdateSysConfig /etc/sysconfig/displaymanager DISPLAYMANAGER kdm
-baseSetRunlevel 5
 suseConfig
 
 #======================================
diff --git a/doc/examples/suse-11.4/suse-vm-guest/config.sh b/doc/examples/suse-11.4/suse-vm-guest/config.sh
index d5a159e..7785932 100755
--- a/doc/examples/suse-11.4/suse-vm-guest/config.sh
+++ b/doc/examples/suse-11.4/suse-vm-guest/config.sh
@@ -40,9 +40,6 @@ suseInsertService boot.device-mapper
 #======================================
 # SuSEconfig
 #--------------------------------------
-baseUpdateSysConfig /etc/sysconfig/windowmanager DEFAULT_WM kde
-baseUpdateSysConfig /etc/sysconfig/displaymanager DISPLAYMANAGER kdm
-baseSetRunlevel 5
 suseConfig
 
 #======================================
diff --git a/modules/KIWISchema.rnc b/modules/KIWISchema.rnc
index e5bb43a..7117c64 100644
--- a/modules/KIWISchema.rnc
+++ b/modules/KIWISchema.rnc
@@ -1396,7 +1396,7 @@ div {
 		## Specifies the bootloader used for booting the image.&quot;
 		## At the moment grub, zipl and sys|extlinux are supported
 		attribute bootloader {
-			&quot;extlinux&quot; | &quot;grub&quot; | &quot;syslinux&quot; | &quot;zipl&quot;
+			&quot;extlinux&quot; | &quot;grub&quot; | &quot;syslinux&quot; | &quot;zipl&quot; | &quot;lilo&quot;
 		}
 	k.type.bootprofile.attribute =
 		## Specifies the boot profile defined in the boot image
diff --git a/modules/KIWISchema.rng b/modules/KIWISchema.rng
index a886ed6..a039921 100644
--- a/modules/KIWISchema.rng
+++ b/modules/KIWISchema.rng
@@ -1874,6 +1874,7 @@ At the moment grub, zipl and sys|extlinux are supported&lt;/a:documentation&gt;
           &lt;value&gt;grub&lt;/value&gt;
           &lt;value&gt;syslinux&lt;/value&gt;
           &lt;value&gt;zipl&lt;/value&gt;
+          &lt;value&gt;lilo&lt;/value&gt;
         &lt;/choice&gt;
       &lt;/attribute&gt;
     &lt;/define&gt;
diff --git a/rpm/kiwi.spec b/rpm/kiwi.spec
index 7258cc2..47d4eb0 100644
--- a/rpm/kiwi.spec
+++ b/rpm/kiwi.spec
@@ -183,7 +183,7 @@ Authors:
     Marcus Schaefer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
 %endif
 
-%ifarch %ix86 x86_64 s390 s390x
+%ifarch %ix86 x86_64 ppc ppc64 s390 s390x
 
 %package -n kiwi-desc-vmxboot
 License:        GPLv2+
@@ -273,7 +273,7 @@ Authors:
     Marcus Schaefer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
 %endif
 
-%ifarch %ix86 x86_64 s390 s390x
+%ifarch %ix86 x86_64 ppc ppc64 s390 s390x
 
 %package -n kiwi-templates
 License:        GPL v2.0 or later
@@ -455,7 +455,7 @@ rm -rf $RPM_BUILD_ROOT
 %{_datadir}/kiwi/image/isoboot/rhel*
 %endif
 
-%ifarch %ix86 x86_64 s390 s390x
+%ifarch %ix86 x86_64 ppc ppc64 s390 s390x
 
 %files -n kiwi-desc-vmxboot
 %defattr(-, root, root)
@@ -482,10 +482,10 @@ rm -rf $RPM_BUILD_ROOT
 %{_datadir}/kiwi/image/oemboot/suse*
 %endif
 
-%ifarch %ix86 x86_64
 
 %files -n kiwi-templates
 %defattr(-, root, root)
+%ifarch %ix86 x86_64
 %{_datadir}/kiwi/image/suse-11.4-JeOS
 %{_datadir}/kiwi/image/suse-11.3-JeOS
 %{_datadir}/kiwi/image/suse-11.2-JeOS
@@ -497,5 +497,8 @@ rm -rf $RPM_BUILD_ROOT
 %ifarch s390 s390x
 %{_datadir}/kiwi/image/suse-SLE11-JeOS
 %endif
+%ifarch ppc ppc64
+%{_datadir}/kiwi/image/suse-SLE11-JeOS
+%endif
 
 %changelog
diff --git a/system/boot/ppc/oemboot/suse-SLES11/config.xml b/system/boot/ppc/oemboot/suse-SLES11/config.xml
index 7895ef5..96b698a 100644
--- a/system/boot/ppc/oemboot/suse-SLES11/config.xml
+++ b/system/boot/ppc/oemboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;4.7&quot; name=&quot;initrd-oemboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
@@ -95,10 +95,10 @@
 		&lt;package name=&quot;kernel-rt&quot;/&gt;
 		&lt;package name=&quot;kernel-rt-base&quot;/&gt;
 	&lt;/packages&gt;
-        &lt;packages type=&quot;image&quot; profiles=&quot;ppc64&quot;&gt;
+	&lt;packages type=&quot;image&quot; profiles=&quot;ppc64&quot;&gt;
 		&lt;package name=&quot;kernel-ppc64&quot;/&gt;
 		&lt;package name=&quot;kernel-ppc64-base&quot;/&gt;
-        &lt;/packages&gt;
+	&lt;/packages&gt;
 	&lt;packages type=&quot;image&quot;&gt;
 		&lt;package name=&quot;curl&quot;/&gt;
 		&lt;package name=&quot;atftp&quot;/&gt;
diff --git a/system/boot/ppc/oemboot/suse-dump b/system/boot/ppc/oemboot/suse-dump
index a389cd1..11eb409 100755
--- a/system/boot/ppc/oemboot/suse-dump
+++ b/system/boot/ppc/oemboot/suse-dump
@@ -331,12 +331,13 @@ function OEMInstall {
 				count=0
 				for i in /dev/mapper/${loop}*;do
 					psize=`partitionSize $i`
+					psize=$((psize / 1024))
 					partid=$(partitionID /dev/$loop $(nd $i))
 					partname=Root
 					if [ $reqpart -eq 2 ] &amp;&amp; [ $count = 0 ];then
 						partname=Boot
 					fi
-					echo &quot;* $partname partition requires at least $psize KB&quot; \
+					echo &quot;* $partname partition requires at least $psize MB&quot; \
 						&gt;&gt; $info
 					echo &quot;  Partition Type: 0x$partid&quot; &gt;&gt; $info
 					count=$((count + 1))
diff --git a/system/boot/ppc/oemboot/suse-linuxrc b/system/boot/ppc/oemboot/suse-linuxrc
index 5dcbceb..a48f59d 100755
--- a/system/boot/ppc/oemboot/suse-linuxrc
+++ b/system/boot/ppc/oemboot/suse-linuxrc
@@ -485,7 +485,6 @@ if [ ! -z &quot;$KIWI_RECOVERY&quot; ];then
 		if [ -e /mnt/etc/zypp.backup ];then
 			rm -rf /mnt/etc/zypp &amp;&amp;	mv /mnt/etc/zypp.backup /mnt/etc/zypp
 		fi
-		rm -rf /mnt/var/lib/rpm.backup
 	fi
 	#======================================
 	# 16.5) restore boot files 1
@@ -561,34 +560,7 @@ fi
 # 18) setup ird/kernel links for union
 #--------------------------------------
 if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ];then 
-	if [ &quot;$OEM_KIWI_INITRD&quot; = &quot;yes&quot; ] || isFSTypeReadOnly;then
-		# /.../
-		# we are using a special root setup with aufs. In this case
-		# we can't use the SuSE Linux initrd but must stick to the
-		# kiwi boot system.
-		# ----
-		mountCalled=no
-		if [ -e &quot;$imageRWDevice&quot; ];then
-			kiwiMount $imageRWDevice &quot;/mnt&quot;
-			mountCalled=yes
-		fi
-		pushd /mnt/boot &gt;/dev/null
-		IFS=&quot;,&quot; ; for i in $KERNEL_LIST;do
-			if test -z &quot;$i&quot;;then
-				continue
-			fi
-			kernel=`echo $i | cut -f1 -d:`
-			initrd=`echo $i | cut -f2 -d:`
-			rm -f $initrd &amp;&amp; ln -s initrd.vmx $initrd
-			rm -f $kernel &amp;&amp; ln -s linux.vmx  $kernel
-			break
-		done
-		IFS=$IFS_ORIG
-		popd &gt;/dev/null
-		if [ &quot;$mountCalled&quot; = &quot;yes&quot; ];then
-			umount /mnt
-		fi
-	fi
+	setupKernelLinks
 fi
 
 #======================================
@@ -608,6 +580,8 @@ if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ];then
 		updateClicBootDeviceFstab /config $imageBootDevice
 	elif [ &quot;$haveBtrFS&quot; = &quot;yes&quot; ];then
 		updateBtrBootDeviceFstab /config $imageBootDevice
+	elif [ &quot;$haveXFS&quot; = &quot;yes&quot; ];then
+		updateXfsBootDeviceFstab /config $imageBootDevice
 	elif [ &quot;$loader&quot; = &quot;syslinux&quot; ] || [ &quot;$loader&quot; = &quot;extlinux&quot; ];then
 		updateSyslinuxBootDeviceFstab /config $imageBootDevice
 	elif [ &quot;$haveLuks&quot; = &quot;yes&quot; ];then
diff --git a/system/boot/ppc/oemboot/suse-preinit b/system/boot/ppc/oemboot/suse-preinit
index 82d085f..80535f8 100755
--- a/system/boot/ppc/oemboot/suse-preinit
+++ b/system/boot/ppc/oemboot/suse-preinit
@@ -67,41 +67,14 @@ else
 fi
 
 #======================================
-# 7) Check FAT requires on syslinux
-#--------------------------------------
-if [ &quot;$loader&quot; = &quot;syslinux&quot; ];then
-	# /.../
-	# if syslinux is used we need to make sure that the
-	# filename on the boot partition is correct 8+3
-	# ----
-	count=1
-	IFS=&quot;,&quot; ; for i in $KERNEL_LIST;do
-		if test -z &quot;$i&quot;;then
-			continue
-		fi
-		kernel=`echo $i | cut -f1 -d:`
-		initrd=`echo $i | cut -f2 -d:`
-		mv /boot/$kernel /boot/linux.$count
-		mv /boot/$initrd /boot/initrd.$count
-		running=$(uname -r)
-		rlinux=vmlinuz-$running
-		rinitrd=initrd-$running
-		ln -s /boot/linux.$count  /boot/$rlinux
-		ln -s /boot/initrd.$count /boot/$rinitrd
-		count=`expr $count + 1`
-	done
-	IFS=$IFS_ORIG
-fi
-
-#======================================
-# 8) Install boot loader if ok
+# 7) Install boot loader if ok
 #--------------------------------------
 if [ $bootLoaderOK = 1 ];then
 	installBootLoader
 fi
 
 #======================================
-# 9) copy recovery related files
+# 8) copy recovery related files
 #--------------------------------------
 if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ] &amp;&amp; [ ! -z &quot;$OEM_RECOVERY&quot; ];then
 	IFS=$IFS_ORIG
@@ -136,7 +109,7 @@ if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ] &amp;&amp; [ ! -z &quot;$OEM_RECOVERY&quot; ];then
 fi
 
 #======================================
-# 10) create /etc/ImagePackages
+# 9) create /etc/ImagePackages
 #--------------------------------------
 if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ];then
 	if [ -x /bin/rpm ];then
@@ -146,12 +119,12 @@ if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ];then
 fi
 
 #======================================
-# 11) setup console
+# 10) setup console
 #--------------------------------------
 setupConsole
 
 #======================================
-# Run user script
+# 11) Run user script
 #--------------------------------------
 runHook preCallInit
 
diff --git a/system/boot/ppc/oemboot/suse-repart b/system/boot/ppc/oemboot/suse-repart
index 22d2fa3..f9ce498 100755
--- a/system/boot/ppc/oemboot/suse-repart
+++ b/system/boot/ppc/oemboot/suse-repart
@@ -128,10 +128,7 @@ function OEMRepartStandard {
 		if [ ! -z &quot;$OEM_RECOVERY&quot; ];then
 			newparts=$((newparts + 1))
 		fi
-		if [ ! -z &quot;$bootKBytes&quot; ];then
-			newparts=$((newparts + 1))
-		fi
-		if [ -z &quot;$OEM_WITHOUTHOME&quot; ];then
+		if [ ! -z &quot;$bootXMBytes&quot; ];then
 			newparts=$((newparts + 1))
 		fi
 
diff --git a/system/boot/s390/vmxboot/README b/system/boot/ppc/vmxboot/README
similarity index 100%
copy from system/boot/s390/vmxboot/README
copy to system/boot/ppc/vmxboot/README
diff --git a/system/boot/ix86/isoboot/suse-11.1/config.sh b/system/boot/ppc/vmxboot/suse-SLES11/config.sh
similarity index 100%
copy from system/boot/ix86/isoboot/suse-11.1/config.sh
copy to system/boot/ppc/vmxboot/suse-SLES11/config.sh
diff --git a/system/boot/s390/vmxboot/suse-SLES11/config.xml b/system/boot/ppc/vmxboot/suse-SLES11/config.xml
similarity index 92%
copy from system/boot/s390/vmxboot/suse-SLES11/config.xml
copy to system/boot/ppc/vmxboot/suse-SLES11/config.xml
index 7ca72b7..6d8359f 100644
--- a/system/boot/s390/vmxboot/suse-SLES11/config.xml
+++ b/system/boot/ppc/vmxboot/suse-SLES11/config.xml
@@ -7,18 +7,17 @@
 		&lt;specification&gt;boot/initrd image for virtual machines&lt;/specification&gt;
 	&lt;/description&gt;
 	&lt;preferences&gt;
-		&lt;type image=&quot;cpio&quot; bootprofile=&quot;default&quot; bootkernel=&quot;std&quot;/&gt;
+		&lt;type image=&quot;cpio&quot; bootprofile=&quot;default&quot; bootkernel=&quot;ppc64&quot;/&gt;
 		&lt;version&gt;2.7.1&lt;/version&gt;
 		&lt;packagemanager&gt;zypper&lt;/packagemanager&gt;
 		&lt;rpm-check-signatures&gt;false&lt;/rpm-check-signatures&gt;
 	&lt;/preferences&gt;
 	&lt;profiles&gt;
 		&lt;profile name=&quot;default&quot; description=&quot;Boot with default setup&quot;/&gt;
-		&lt;profile name=&quot;std&quot; description=&quot;KERNEL: Default&quot;/&gt;
+		&lt;profile name=&quot;ppc64&quot; description=&quot;KERNEL: ppc64 kernel&quot;/&gt;
 	&lt;/profiles&gt;
 	&lt;drivers type=&quot;drivers&quot;&gt;
 		&lt;file name=&quot;crypto/*&quot;/&gt;
-		&lt;file name=&quot;drivers/s390/*&quot;/&gt;
 		&lt;file name=&quot;drivers/virtio/*&quot;/&gt;
 		&lt;file name=&quot;drivers/char/*&quot;/&gt;
 		&lt;file name=&quot;drivers/net/*&quot;/&gt;
@@ -49,10 +48,14 @@
 	&lt;repository type=&quot;rpm-dir&quot; status=&quot;fixed&quot;&gt;
 		&lt;source path=&quot;/usr/share/kiwi/repo/suse-repo/suse-sle11-repo&quot;/&gt;
 	&lt;/repository&gt;
-	&lt;packages type=&quot;image&quot; profiles=&quot;std&quot;&gt;
+	&lt;packages type=&quot;image&quot; profiles=&quot;default&quot;&gt;
 		&lt;package name=&quot;kernel-default&quot;/&gt;
 		&lt;package name=&quot;kernel-default-base&quot;/&gt;
 	&lt;/packages&gt;
+	&lt;packages type=&quot;image&quot; profiles=&quot;ppc64&quot;&gt;
+		&lt;package name=&quot;kernel-ppc64&quot;/&gt;
+		&lt;package name=&quot;kernel-ppc64-base&quot;/&gt;
+	&lt;/packages&gt;
 	&lt;packages type=&quot;image&quot;&gt;
 		&lt;package name=&quot;psmisc&quot;/&gt;
 		&lt;package name=&quot;bind-libs&quot;/&gt;
@@ -68,7 +71,6 @@
 		&lt;package name=&quot;sysconfig&quot;/&gt;
 		&lt;package name=&quot;sysfsutils&quot;/&gt;
 		&lt;package name=&quot;util-linux&quot;/&gt;
-		&lt;package name=&quot;s390-tools&quot;/&gt;
 		&lt;package name=&quot;fribidi&quot;/&gt;
 		&lt;package name=&quot;make&quot;/&gt;
 		&lt;package name=&quot;tar&quot;/&gt;
diff --git a/system/boot/s390/vmxboot/suse-SLES11/images.sh b/system/boot/ppc/vmxboot/suse-SLES11/images.sh
similarity index 97%
copy from system/boot/s390/vmxboot/suse-SLES11/images.sh
copy to system/boot/ppc/vmxboot/suse-SLES11/images.sh
index e9b9382..8306eff 100755
--- a/system/boot/s390/vmxboot/suse-SLES11/images.sh
+++ b/system/boot/ppc/vmxboot/suse-SLES11/images.sh
@@ -12,7 +12,7 @@ suseStripKernel
 #==========================================
 # setup gfxboot
 #------------------------------------------
-suseGFXBoot SLES grub
+suseGFXBoot SLES lilo 
 
 #==========================================
 # remove unneeded packages
diff --git a/system/boot/ix86/isoboot/rhel-05.4/root/include b/system/boot/ppc/vmxboot/suse-SLES11/root/include
similarity index 100%
copy from system/boot/ix86/isoboot/rhel-05.4/root/include
copy to system/boot/ppc/vmxboot/suse-SLES11/root/include
diff --git a/system/boot/ix86/isoboot/suse-11.1/root/linuxrc b/system/boot/ppc/vmxboot/suse-SLES11/root/linuxrc
similarity index 100%
copy from system/boot/ix86/isoboot/suse-11.1/root/linuxrc
copy to system/boot/ppc/vmxboot/suse-SLES11/root/linuxrc
diff --git a/system/boot/ix86/isoboot/suse-11.1/root/preinit b/system/boot/ppc/vmxboot/suse-SLES11/root/preinit
similarity index 100%
copy from system/boot/ix86/isoboot/suse-11.1/root/preinit
copy to system/boot/ppc/vmxboot/suse-SLES11/root/preinit
diff --git a/system/boot/s390/vmxboot/suse-linuxrc b/system/boot/ppc/vmxboot/suse-linuxrc
similarity index 95%
copy from system/boot/s390/vmxboot/suse-linuxrc
copy to system/boot/ppc/vmxboot/suse-linuxrc
index 5cc1d1d..d08022f 100755
--- a/system/boot/s390/vmxboot/suse-linuxrc
+++ b/system/boot/ppc/vmxboot/suse-linuxrc
@@ -127,7 +127,7 @@ selectLanguage
 #--------------------------------------
 Echo &quot;Searching for boot device...&quot;
 if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ];then
-	searchBIOSBootDevice
+	searchOFBootDevice
 	if [ ! -e &quot;$biosBootDevice&quot; ];then
 		searchBusIDBootDevice
 	fi
@@ -143,9 +143,9 @@ Echo &quot;Found boot device: $imageDiskDevice&quot;
 #======================================
 # 9) Setup device names...
 #--------------------------------------
-export imageRootDevice=$(ddn $imageDiskDevice 1)
-export imageRWDevice=$(ddn $imageDiskDevice 2)
-export imageRODevice=$(ddn $imageDiskDevice 1)
+export imageRootDevice=$(ddn $imageDiskDevice 2)
+export imageRWDevice=$(ddn $imageDiskDevice 3)
+export imageRODevice=$(ddn $imageDiskDevice 2)
 if [ -z &quot;$imageDiskDevice&quot; ];then
 	systemException \
 		&quot;Couldn't find any boot device... abort&quot; \
@@ -160,7 +160,7 @@ if searchVolumeGroup; then
 	fi
 	export imageRWDevice=/dev/$VGROUP/LVRoot
 	export imageRODevice=/dev/$VGROUP/LVComp
-	export imageBootDevice=$(ddn $imageDiskDevice 1)
+	export imageBootDevice=$(ddn $imageDiskDevice 2)
 fi
 
 #======================================
@@ -215,7 +215,7 @@ fi
 if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ];then
 	setupDefaultFstab /config
 	updateRootDeviceFstab /config $imageRootDevice
-	if [ &quot;$haveLVM&quot; = &quot;yes&quot; ];then
+	if [ ! &quot;$arch&quot; = &quot;ppc64&quot; &amp;&amp; &quot;$haveLVM&quot; = &quot;yes&quot; ];then
 		updateLVMBootDeviceFstab /config $imageBootDevice
 	elif [ &quot;$haveClicFS&quot; = &quot;yes&quot; ];then
 		updateClicBootDeviceFstab /config $imageBootDevice
@@ -234,7 +234,7 @@ if [ &quot;$LOCAL_BOOT&quot; = &quot;no&quot; ];then
 	if [ ! -z &quot;$COMBINED_IMAGE&quot; ]; then
 		export KIWI_INITRD_PARAMS=&quot;COMBINED_IMAGE=local&quot;
 	fi
-	setupBootLoader /mnt /config $(($bootid - 1)) $imageRootDevice VMX
+	setupBootLoader /mnt /config 1 $imageRootDevice VMX
 	setupKernelModules /config
 fi
 
diff --git a/system/boot/s390/vmxboot/suse-preinit b/system/boot/ppc/vmxboot/suse-preinit
similarity index 97%
copy from system/boot/s390/vmxboot/suse-preinit
copy to system/boot/ppc/vmxboot/suse-preinit
index ffbbee3..a089c63 100755
--- a/system/boot/s390/vmxboot/suse-preinit
+++ b/system/boot/ppc/vmxboot/suse-preinit
@@ -54,9 +54,6 @@ createFramebufferDevices
 if isVirtioDevice;then
 	runPreinitServices virtio
 fi
-if isDASDDevice;then
-	runPreinitServices dasd
-fi
 
 #======================================
 # 7) create /etc/ImagePackages
diff --git a/template/s390/suse-SLE11-JeOS/README b/template/ppc/suse-SLE11-JeOS/README
similarity index 73%
copy from template/s390/suse-SLE11-JeOS/README
copy to template/ppc/suse-SLE11-JeOS/README
index d3cad9e..d098ae7 100644
--- a/template/s390/suse-SLE11-JeOS/README
+++ b/template/ppc/suse-SLE11-JeOS/README
@@ -10,28 +10,18 @@ Build instructions for local build
        --add-repo /usr/share/kiwi/repo/suse-repo/suse-sle11-repo/ \
        --add-repotype rpm-dir
 
-* call kiwi create for DASD device:
+* call kiwi create for physical device:
   kiwi --create /tmp/kiwi-sle11 --ignore-repos \
 	   --add-repo /path/to/SLE11/repo \
        --add-repotype yast2 \
        --add-repo /usr/share/kiwi/repo/suse-repo/suse-sle11-repo/ \
        --add-repotype rpm-dir \
-	   -d /tmp/myimage --type vmx --targetDevice /dev/dasdX
+	   -d /tmp/myimage --type vmx --targetDevice /dev/sdaX
 
-* call kiwi create for virtio device (KVM):
+* call kiwi create for virtio device (VIO image):
   kiwi --create /tmp/kiwi-sle11 --ignore-repos \
        --add-repo /path/to/SLE11/repo \
        --add-repotype yast2 \
        --add-repo /usr/share/kiwi/repo/suse-repo/suse-sle11-repo/ \
        --add-repotype rpm-dir \
        -d /tmp/myimage --type vmx
-
-
-Kernel paramters to configure the image:
-========================================
-busid=0.0.0530
-qeth_port=VSWL2
-qeth_read=0.0.0800
-qeth_write=0.0.0801
-qeth_ctrl=0.0.0802
-qeth_up=1
diff --git a/template/s390/suse-SLE11-JeOS/config.sh b/template/ppc/suse-SLE11-JeOS/config.sh
similarity index 100%
copy from template/s390/suse-SLE11-JeOS/config.sh
copy to template/ppc/suse-SLE11-JeOS/config.sh
diff --git a/template/s390/suse-SLE11-JeOS/config.xml b/template/ppc/suse-SLE11-JeOS/config.xml
similarity index 92%
copy from template/s390/suse-SLE11-JeOS/config.xml
copy to template/ppc/suse-SLE11-JeOS/config.xml
index b613665..c430830 100644
--- a/template/s390/suse-SLE11-JeOS/config.xml
+++ b/template/ppc/suse-SLE11-JeOS/config.xml
@@ -15,7 +15,7 @@
 		&lt;keytable&gt;us.map.gz&lt;/keytable&gt;
 		&lt;timezone&gt;Europe/Berlin&lt;/timezone&gt;
 		&lt;hwclock&gt;utc&lt;/hwclock&gt;
-		&lt;type image=&quot;vmx&quot; filesystem=&quot;ext3&quot; boot=&quot;vmxboot/suse-SLES11&quot; bootloader=&quot;zipl&quot; primary=&quot;true&quot;/&gt;
+		&lt;type image=&quot;vmx&quot; filesystem=&quot;ext3&quot; boot=&quot;vmxboot/suse-SLES11&quot; bootloader=&quot;lilo&quot; primary=&quot;true&quot;/&gt;
 	&lt;/preferences&gt;
 	&lt;users group=&quot;root&quot;&gt;
 		&lt;user pwd=&quot;$1$wYJUgpM5$RXMMeASDc035eX.NbYWFl0&quot; home=&quot;/root&quot; name=&quot;root&quot;/&gt;
@@ -26,11 +26,10 @@
 	&lt;packages type=&quot;image&quot;&gt;
 		&lt;opensusePattern name=&quot;base&quot;/&gt;
 		&lt;opensuseProduct name=&quot;SUSE_SLES&quot;/&gt;
-		&lt;package name=&quot;kernel-default&quot;/&gt;
+		&lt;package name=&quot;kernel-ppc64&quot;/&gt;
 		&lt;package name=&quot;ifplugd&quot;/&gt;
 		&lt;package name=&quot;iputils&quot;/&gt;
 		&lt;package name=&quot;vim&quot;/&gt;
-		&lt;package name=&quot;s390-tools&quot;/&gt;
 		&lt;package name=&quot;syslog-ng&quot;/&gt;
 	&lt;/packages&gt;
 	&lt;packages type=&quot;bootstrap&quot;&gt;
diff --git a/template/ix86/rhel-05.4-JeOS/root/etc/X11/xorg.conf b/template/ppc/suse-SLE11-JeOS/root/etc/X11/xorg.conf
similarity index 100%
copy from template/ix86/rhel-05.4-JeOS/root/etc/X11/xorg.conf
copy to template/ppc/suse-SLE11-JeOS/root/etc/X11/xorg.conf
diff --git a/template/s390/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/01-console.sh b/template/ppc/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/01-console.sh
similarity index 100%
copy from template/s390/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/01-console.sh
copy to template/ppc/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/01-console.sh
diff --git a/template/s390/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/inittab b/template/ppc/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/inittab
similarity index 100%
copy from template/s390/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/inittab
copy to template/ppc/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/inittab
diff --git a/template/s390/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/securetty b/template/ppc/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/securetty
similarity index 100%
copy from template/s390/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/securetty
copy to template/ppc/suse-SLE11-JeOS/root/etc/init.d/kiwi/virtio/securetty
diff --git a/template/ix86/suse-SLE11-JeOS/root/etc/motd b/template/ppc/suse-SLE11-JeOS/root/etc/motd
similarity index 100%
copy from template/ix86/suse-SLE11-JeOS/root/etc/motd
copy to template/ppc/suse-SLE11-JeOS/root/etc/motd
diff --git a/doc/examples/suse-11.2/suse-ec2-guest/root/etc/sysconfig/network/ifcfg-eth0 b/template/ppc/suse-SLE11-JeOS/root/etc/sysconfig/network/ifcfg-eth0
similarity index 100%
copy from doc/examples/suse-11.2/suse-ec2-guest/root/etc/sysconfig/network/ifcfg-eth0
copy to template/ppc/suse-SLE11-JeOS/root/etc/sysconfig/network/ifcfg-eth0
diff --git a/template/s390/suse-SLE11-JeOS/root/etc/sysconfig/syslog b/template/ppc/suse-SLE11-JeOS/root/etc/sysconfig/syslog
similarity index 100%
copy from template/s390/suse-SLE11-JeOS/root/etc/sysconfig/syslog
copy to template/ppc/suse-SLE11-JeOS/root/etc/sysconfig/syslog
diff --git a/template/ix86/suse-SLE11-JeOS/suse-SLE11-JeOS.kiwi b/template/ppc/suse-SLE11-JeOS/suse-SLE11-JeOS.kiwi
similarity index 100%
copy from template/ix86/suse-SLE11-JeOS/suse-SLE11-JeOS.kiwi
copy to template/ppc/suse-SLE11-JeOS/suse-SLE11-JeOS.kiwi


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003201.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. e2f8e2ebb35f68598a067d785c31ecc489d9a6e1
</A></li>
	<LI>Next message: <A HREF="003207.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 3d8962c28abf12ccd15ad715db1c2fe90e2d75a6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3204">[ date ]</a>
              <a href="thread.html#3204">[ thread ]</a>
              <a href="subject.html#3204">[ subject ]</a>
              <a href="author.html#3204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
