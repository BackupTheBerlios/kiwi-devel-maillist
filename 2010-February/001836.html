<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] XML auto upgrade
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20XML%20auto%20upgrade&In-Reply-To=%3C4B689439.3020805%40novell.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001837.html">
   <LINK REL="Next"  HREF="001844.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] XML auto upgrade</H1>
    <B>Robert Schweikert</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20XML%20auto%20upgrade&In-Reply-To=%3C4B689439.3020805%40novell.com%3E"
       TITLE="[Kiwi-devel] XML auto upgrade">rschweikert at novell.com
       </A><BR>
    <I>Tue Feb  2 22:08:09 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001837.html">[PATCH] support auto upgrade of XML to 4.1 version
</A></li>
        <LI>Next message: <A HREF="001844.html">[Kiwi-devel] XML auto upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1836">[ date ]</a>
              <a href="thread.html#1836">[ thread ]</a>
              <a href="subject.html#1836">[ subject ]</a>
              <a href="author.html#1836">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Attached is a patch that enables auto upgrade of config.xml across the 
3.x to 4.1 boundary.

The upgrade from 3.8 happens in 2 steps,
1.) 3.8 -&gt; 3.9 collect all oem-* into oemconfig (non released schema 
version)
2.) 3.9 -&gt; 4.1 collect all *config and other elements and use them as 
children of &lt;type&gt;; also modifies type to use the previous value as the 
value of the new image attribute.

Step 1 is basically the same as a previous patch that collided with the 
schema re-org. Since I had the code and there was not auto upgrade for 
3.8 -&gt; 4.1 previously I reused it. This also reduces the complexity of 
the upgrade to 4.1 bye a bit.

In master.xsl I disabled the pretty printer for now as it swallows the 
comments, at least on my machine (see separate thread on the list). All 
previous convertXXtoYY.xsl files are being re-instated with this patch. 
Also the file convert41toXX.xsl is being removed as it was just a place 
holder.

I am also working on moving the ec2* attributes into an ec2config 
element, this would then be a 41 -&gt; 42 conversion. Stuck with a strange 
XSLT issue, Thomas is helping with that.

Hope the patch can be applied, it should make live easier for users. The 
premise was preservation of functionality across the 3.x version to 4.1 
version transition. Therefore, some blocks now show up twice. See the 
thread &quot;New schema&quot; on the list for details about the decision made.

Happy Hacking,
Robert

-- 
Robert Schweikert                           MAY THE SOURCE BE WITH YOU
Software Engineer Consultant                          LINUX
<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>
781-464-8147

Novell
Making IT Work As One
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001837.html">[PATCH] support auto upgrade of XML to 4.1 version
</A></li>
	<LI>Next message: <A HREF="001844.html">[Kiwi-devel] XML auto upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1836">[ date ]</a>
              <a href="thread.html#1836">[ thread ]</a>
              <a href="subject.html#1836">[ subject ]</a>
              <a href="author.html#1836">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
