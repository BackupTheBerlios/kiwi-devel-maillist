<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. f7ff479713ad1a891f1675b9db2b12362a17bac5
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2010-August/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20f7ff479713ad1a891f1675b9db2b12362a17bac5&In-Reply-To=%3C20100810110531.C94EB480E8B%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002540.html">
   <LINK REL="Next"  HREF="002542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. f7ff479713ad1a891f1675b9db2b12362a17bac5</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20f7ff479713ad1a891f1675b9db2b12362a17bac5&In-Reply-To=%3C20100810110531.C94EB480E8B%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. f7ff479713ad1a891f1675b9db2b12362a17bac5">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Tue Aug 10 13:05:31 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002540.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 538c6fc2668486956533034534be5e76b465f8a9
</A></li>
        <LI>Next message: <A HREF="002542.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 4847491e895a4554b90b07d902646fc84bcd0309
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2541">[ date ]</a>
              <a href="thread.html#2541">[ thread ]</a>
              <a href="subject.html#2541">[ subject ]</a>
              <a href="author.html#2541">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, master has been updated
       via  f7ff479713ad1a891f1675b9db2b12362a17bac5 (commit)
       via  0108f49b16cc8645c8367a06e2e1e40d621b9831 (commit)
      from  538c6fc2668486956533034534be5e76b465f8a9 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit f7ff479713ad1a891f1675b9db2b12362a17bac5
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Tue Aug 10 13:03:11 2010 +0200

    - fixed hybrid persistent feature. The check for the bios
      protection was broken which caused the creation of the
      persistent write partition to be skipped.
    - added support for the kernel option wipecow=1. This option
      allows to wipe an eventually existing cow file on a hybrid
      iso image to start from scratch

commit 0108f49b16cc8645c8367a06e2e1e40d621b9831
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Tue Aug 10 13:01:41 2010 +0200

    - changed suse-11.3/suse-live-stick example to use the hybrid
      iso technology

-----------------------------------------------------------------------

Summary of changes:
diff --git a/doc/examples/suse-11.3/suse-live-stick/config.xml b/doc/examples/suse-11.3/suse-live-stick/config.xml
index 1066054..60cb012 100644
--- a/doc/examples/suse-11.3/suse-live-stick/config.xml
+++ b/doc/examples/suse-11.3/suse-live-stick/config.xml
@@ -7,15 +7,7 @@
 		&lt;specification&gt;openSUSE 11.3 live stick system 1GB&lt;/specification&gt;
 	&lt;/description&gt;
 	&lt;preferences&gt;
-		&lt;type image=&quot;usb&quot; filesystem=&quot;clicfs&quot; boot=&quot;usbboot/suse-11.3&quot;/&gt;
-		&lt;type image=&quot;oem&quot; filesystem=&quot;clicfs&quot; boot=&quot;oemboot/suse-11.3&quot;&gt;
-			&lt;oemconfig&gt;
-				&lt;oem-swap&gt;false&lt;/oem-swap&gt;
-				&lt;oem-kiwi-initrd&gt;true&lt;/oem-kiwi-initrd&gt;
-				&lt;oem-boot-title&gt;USB&lt;/oem-boot-title&gt;
-			&lt;/oemconfig&gt;
-		&lt;/type&gt;
-		&lt;type image=&quot;vmx&quot; filesystem=&quot;clicfs&quot; boot=&quot;vmxboot/suse-11.3&quot;/&gt;
+		&lt;type image=&quot;iso&quot; boot=&quot;isoboot/suse-11.3&quot; hybrid=&quot;true&quot; hybridpersistent=&quot;true&quot; flags=&quot;clic&quot;/&gt;
 		&lt;version&gt;1.1.2&lt;/version&gt;
 		&lt;packagemanager&gt;zypper&lt;/packagemanager&gt;
 		&lt;rpm-check-signatures&gt;false&lt;/rpm-check-signatures&gt;
@@ -84,6 +76,15 @@
 		&lt;package name=&quot;OpenOffice_org-calc-extensions&quot;/&gt;
 		&lt;package name=&quot;OpenOffice_org-help-en-US&quot;/&gt;
 		&lt;package name=&quot;OpenOffice_org-impress-extensions&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-thesaurus-en-US&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-icon-theme-crystal&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-LanguageTool&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-icon-theme-hicontrast&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-kde4&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-base-drivers-mysql&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-icon-theme-oxygen&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-LanguageTool-en&quot;/&gt;
+		&lt;package name=&quot;OpenOffice_org-icon-theme-galaxy&quot;/&gt;
 		&lt;package name=&quot;kdegames4-carddecks-other&quot;/&gt;
 		&lt;package name=&quot;kdegames4-carddecks-default&quot;/&gt;
 		&lt;package name=&quot;libkdegames4&quot;/&gt;
@@ -95,5 +96,6 @@
 		&lt;package name=&quot;koffice&quot;/&gt;
 		&lt;package name=&quot;koffice-illustration&quot;/&gt;
 		&lt;package name=&quot;MozillaFirefox-branding-openSUSE&quot;/&gt;
+		&lt;package name=&quot;MozillaFirefox-theme-oxygen&quot;/&gt;
 	&lt;/packages&gt;
 &lt;/image&gt;
diff --git a/modules/KIWILinuxRC.sh b/modules/KIWILinuxRC.sh
index 9125cfb..68527a2 100644
--- a/modules/KIWILinuxRC.sh
+++ b/modules/KIWILinuxRC.sh
@@ -2782,9 +2782,12 @@ function CDMount {
 		# by the isohybrid tool :(
 		# ----
 		PARTITIONER=sfdisk
-		if [ &quot;x$kiwi_hybridpersistent&quot; = &quot;xyes&quot; -a \
-		     $(cat /sys/block/$biosBootDevice/ro) = &quot;0&quot; ]; then
-			createHybridPersistent $biosBootDevice
+		if [ &quot;x$kiwi_hybridpersistent&quot; = &quot;xyes&quot; ];then
+			protectedDevice=$(echo $biosBootDevice | sed -e s@/dev/@@)
+			protectedDisk=$(cat /sys/block/$protectedDevice/ro)
+			if [ $protectedDisk = &quot;0&quot; ];then
+				createHybridPersistent $biosBootDevice
+			fi
 		fi
 		Echo -n &quot;Mounting hybrid live boot drive...&quot;
 		cddev=$(ddn $biosBootDevice 1)
@@ -3774,6 +3777,8 @@ function mountSystemClicFS {
 				resetReadWrite=1
 			elif ! mount $rwDevice $HYBRID_PERSISTENT_DIR;then
 				resetReadWrite=1
+			elif [ ! -z &quot;$wipecow&quot; ];then
+				resetReadWrite=1
 			fi
 			if [ $resetReadWrite = 1 ];then
 				if ! setupReadWrite; then


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002540.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 538c6fc2668486956533034534be5e76b465f8a9
</A></li>
	<LI>Next message: <A HREF="002542.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 4847491e895a4554b90b07d902646fc84bcd0309
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2541">[ date ]</a>
              <a href="thread.html#2541">[ thread ]</a>
              <a href="subject.html#2541">[ subject ]</a>
              <a href="author.html#2541">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
