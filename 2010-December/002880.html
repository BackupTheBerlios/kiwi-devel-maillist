<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. a902bf41a47b0a98d655dd1b51791ab4d095b047
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20a902bf41a47b0a98d655dd1b51791ab4d095b047&In-Reply-To=%3C20101203083259.9CABF480AA5%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002879.html">
   <LINK REL="Next"  HREF="002881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. a902bf41a47b0a98d655dd1b51791ab4d095b047</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20a902bf41a47b0a98d655dd1b51791ab4d095b047&In-Reply-To=%3C20101203083259.9CABF480AA5%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. a902bf41a47b0a98d655dd1b51791ab4d095b047">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Fri Dec  3 09:32:57 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002879.html">[Kiwi-devel] XML processing - patch two
</A></li>
        <LI>Next message: <A HREF="002881.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. ab97f69b976fd7bb699ef17c8b0ddf7c9e6b760a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2880">[ date ]</a>
              <a href="thread.html#2880">[ thread ]</a>
              <a href="subject.html#2880">[ subject ]</a>
              <a href="author.html#2880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, master has been updated
       via  a902bf41a47b0a98d655dd1b51791ab4d095b047 (commit)
       via  a160d622a42d5edb113e4c33e6153a79ed8ae7b2 (commit)
       via  24194be1658a2ee49f65a860eeb1975550f058e7 (commit)
      from  5ed60fd02bb587489629def7792065cb612954cb (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit a902bf41a47b0a98d655dd1b51791ab4d095b047
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Fri Dec 3 09:02:31 2010 +0100

    - make addDefaultSplitNode() a private helper method
      called __addDefaultSplitNode(). Also fixed that function to
      work correctly. It should add the default split mode for all
      relevant types (iso and split) and add the section only if
      those types doesn't already implement a split section

commit a160d622a42d5edb113e4c33e6153a79ed8ae7b2
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Thu Dec 2 17:08:44 2010 +0100

    - cleanup KIWIImage and main kiwi code. The global variables
      ForeignRepo and ImageName has been removed. Additionally the
      KIWIXML constructor doesn't have the ForeignRepo hash in
      its parameter list. Inside KIWIXML the entire foreign data
      setup has been changed into methods creating and applying
      a changeset. Therefore a temporary global hash XMLChangeSet
      has been introduced. After apply of the changeset it will
      be removed directly. Along with the cleanup the creation
      and check for boot and prebuilt images has been moved into
      functions. The preparation step of kiwi now also writes back
      the internal XML changes into the XML file. Last but not
      least the global variable ImageDescription has been introduced
      which stores in prepare and create mode the path to the
      base image description which is required to know the location
      of bootincluded archives and <A HREF="this://">this://</A> repos

commit 24194be1658a2ee49f65a860eeb1975550f058e7
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Wed Dec 1 12:09:23 2010 +0100

    - removed xml inheritance. This feature was never used

-----------------------------------------------------------------------

Summary of changes:
diff --git a/doc/examples/suse-11.2/suse-euca-cloud/cloud-cloud-node/config.xml b/doc/examples/suse-11.2/suse-euca-cloud/cloud-cloud-node/config.xml
index 2d3aa42..99ec64e 100644
--- a/doc/examples/suse-11.2/suse-euca-cloud/cloud-cloud-node/config.xml
+++ b/doc/examples/suse-11.2/suse-euca-cloud/cloud-cloud-node/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;Eucalyptus-Cloud-Node&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;Eucalyptus-Cloud-Node&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-euca-cloud/cloud-head-node/config.xml b/doc/examples/suse-11.2/suse-euca-cloud/cloud-head-node/config.xml
index 197e06e..cc4925e 100644
--- a/doc/examples/suse-11.2/suse-euca-cloud/cloud-head-node/config.xml
+++ b/doc/examples/suse-11.2/suse-euca-cloud/cloud-head-node/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;Eucalyptus-Head-Node&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;Eucalyptus-Head-Node&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-live-iso/config.xml b/doc/examples/suse-11.2/suse-live-iso/config.xml
index add648a..783aa66 100644
--- a/doc/examples/suse-11.2/suse-live-iso/config.xml
+++ b/doc/examples/suse-11.2/suse-live-iso/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.2-live-iso&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.2-live-iso&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-live-stick/config.xml b/doc/examples/suse-11.2/suse-live-stick/config.xml
index b1a8062..a2e53f0 100644
--- a/doc/examples/suse-11.2/suse-live-stick/config.xml
+++ b/doc/examples/suse-11.2/suse-live-stick/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.2-live-stick&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.2-live-stick&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-min-gnome/config.xml b/doc/examples/suse-11.2/suse-min-gnome/config.xml
index aa3643e..a5ef417 100644
--- a/doc/examples/suse-11.2/suse-min-gnome/config.xml
+++ b/doc/examples/suse-11.2/suse-min-gnome/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.2-gnome-demo&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.2-gnome-demo&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-oem-preload/config.xml b/doc/examples/suse-11.2/suse-oem-preload/config.xml
index 19cc88a..46ff092 100644
--- a/doc/examples/suse-11.2/suse-oem-preload/config.xml
+++ b/doc/examples/suse-11.2/suse-oem-preload/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.2-oem-preload&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.2-oem-preload&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-pxe-client/config.xml b/doc/examples/suse-11.2/suse-pxe-client/config.xml
index 9a1608b..ad786d1 100644
--- a/doc/examples/suse-11.2/suse-pxe-client/config.xml
+++ b/doc/examples/suse-11.2/suse-pxe-client/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.2-pxe-client&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.2-pxe-client&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-vm-guest/config.xml b/doc/examples/suse-11.2/suse-vm-guest/config.xml
index 5b1741a..30efac2 100644
--- a/doc/examples/suse-11.2/suse-vm-guest/config.xml
+++ b/doc/examples/suse-11.2/suse-vm-guest/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.2-vm-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.2-vm-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.2/suse-xen-guest/config.xml b/doc/examples/suse-11.2/suse-xen-guest/config.xml
index cfd6cc4..510ab01 100644
--- a/doc/examples/suse-11.2/suse-xen-guest/config.xml
+++ b/doc/examples/suse-11.2/suse-xen-guest/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.2-xen-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.2-xen-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-euca-cloud/cloud-cloud-node/config.xml b/doc/examples/suse-11.3/suse-euca-cloud/cloud-cloud-node/config.xml
index 90a8e5c..ed0cd41 100644
--- a/doc/examples/suse-11.3/suse-euca-cloud/cloud-cloud-node/config.xml
+++ b/doc/examples/suse-11.3/suse-euca-cloud/cloud-cloud-node/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;Eucalyptus-Cloud-Node&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;Eucalyptus-Cloud-Node&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-euca-cloud/cloud-head-node/config.xml b/doc/examples/suse-11.3/suse-euca-cloud/cloud-head-node/config.xml
index 47183fa..837a008 100644
--- a/doc/examples/suse-11.3/suse-euca-cloud/cloud-head-node/config.xml
+++ b/doc/examples/suse-11.3/suse-euca-cloud/cloud-head-node/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;Eucalyptus-Head-Node&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;Eucalyptus-Head-Node&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-live-iso/config.xml b/doc/examples/suse-11.3/suse-live-iso/config.xml
index b9a2521..033af95 100644
--- a/doc/examples/suse-11.3/suse-live-iso/config.xml
+++ b/doc/examples/suse-11.3/suse-live-iso/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-live-iso&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-live-iso&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-live-stick/config.xml b/doc/examples/suse-11.3/suse-live-stick/config.xml
index b037fac..ba6c88a 100644
--- a/doc/examples/suse-11.3/suse-live-stick/config.xml
+++ b/doc/examples/suse-11.3/suse-live-stick/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-live-stick&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-live-stick&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-min-gnome/config.xml b/doc/examples/suse-11.3/suse-min-gnome/config.xml
index 6cdfc61..a361c33 100644
--- a/doc/examples/suse-11.3/suse-min-gnome/config.xml
+++ b/doc/examples/suse-11.3/suse-min-gnome/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-gnome-demo&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-gnome-demo&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-oem-preload/config.xml b/doc/examples/suse-11.3/suse-oem-preload/config.xml
index aa8016c..29e28b3 100644
--- a/doc/examples/suse-11.3/suse-oem-preload/config.xml
+++ b/doc/examples/suse-11.3/suse-oem-preload/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-oem-preload&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-oem-preload&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-pxe-client/config.xml b/doc/examples/suse-11.3/suse-pxe-client/config.xml
index d8b3c40..e532984 100644
--- a/doc/examples/suse-11.3/suse-pxe-client/config.xml
+++ b/doc/examples/suse-11.3/suse-pxe-client/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-pxe-client&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-pxe-client&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-vm-guest/config.xml b/doc/examples/suse-11.3/suse-vm-guest/config.xml
index eaad78b..932eecc 100644
--- a/doc/examples/suse-11.3/suse-vm-guest/config.xml
+++ b/doc/examples/suse-11.3/suse-vm-guest/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-vm-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-vm-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.3/suse-xen-guest/config.xml b/doc/examples/suse-11.3/suse-xen-guest/config.xml
index 93cc9e2..8af7b3b 100644
--- a/doc/examples/suse-11.3/suse-xen-guest/config.xml
+++ b/doc/examples/suse-11.3/suse-xen-guest/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-xen-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-xen-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-euca-cloud/cloud-cloud-node/config.xml b/doc/examples/suse-11.4/suse-euca-cloud/cloud-cloud-node/config.xml
index bbf801f..fb36aeb 100644
--- a/doc/examples/suse-11.4/suse-euca-cloud/cloud-cloud-node/config.xml
+++ b/doc/examples/suse-11.4/suse-euca-cloud/cloud-cloud-node/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;Eucalyptus-Cloud-Node&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;Eucalyptus-Cloud-Node&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-euca-cloud/cloud-head-node/config.xml b/doc/examples/suse-11.4/suse-euca-cloud/cloud-head-node/config.xml
index 74dc13d..fe7d439 100644
--- a/doc/examples/suse-11.4/suse-euca-cloud/cloud-head-node/config.xml
+++ b/doc/examples/suse-11.4/suse-euca-cloud/cloud-head-node/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;Eucalyptus-Head-Node&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;Eucalyptus-Head-Node&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-live-iso/config.xml b/doc/examples/suse-11.4/suse-live-iso/config.xml
index c84d16b..f5d6c62 100644
--- a/doc/examples/suse-11.4/suse-live-iso/config.xml
+++ b/doc/examples/suse-11.4/suse-live-iso/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.4-live-iso&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.4-live-iso&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-live-stick/config.xml b/doc/examples/suse-11.4/suse-live-stick/config.xml
index cd87b43..c42b2f9 100644
--- a/doc/examples/suse-11.4/suse-live-stick/config.xml
+++ b/doc/examples/suse-11.4/suse-live-stick/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.4-live-stick&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.4-live-stick&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-min-gnome/config.xml b/doc/examples/suse-11.4/suse-min-gnome/config.xml
index d4ada42..7f8073e 100644
--- a/doc/examples/suse-11.4/suse-min-gnome/config.xml
+++ b/doc/examples/suse-11.4/suse-min-gnome/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.4-gnome-demo&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.4-gnome-demo&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Robert Schweikert&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-oem-preload/config.xml b/doc/examples/suse-11.4/suse-oem-preload/config.xml
index 9eeb536..7fc7c5f 100644
--- a/doc/examples/suse-11.4/suse-oem-preload/config.xml
+++ b/doc/examples/suse-11.4/suse-oem-preload/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.4-oem-preload&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.4-oem-preload&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-pxe-client/config.xml b/doc/examples/suse-11.4/suse-pxe-client/config.xml
index 23bc53c..c5fb6c9 100644
--- a/doc/examples/suse-11.4/suse-pxe-client/config.xml
+++ b/doc/examples/suse-11.4/suse-pxe-client/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.4-pxe-client&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.4-pxe-client&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-vm-guest/config.xml b/doc/examples/suse-11.4/suse-vm-guest/config.xml
index eab7786..b42cf39 100644
--- a/doc/examples/suse-11.4/suse-vm-guest/config.xml
+++ b/doc/examples/suse-11.4/suse-vm-guest/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.4-vm-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.4-vm-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/doc/examples/suse-11.4/suse-xen-guest/config.xml b/doc/examples/suse-11.4/suse-xen-guest/config.xml
index 308d28c..148d3b3 100644
--- a/doc/examples/suse-11.4/suse-xen-guest/config.xml
+++ b/doc/examples/suse-11.4/suse-xen-guest/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.4-xen-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.4-xen-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/kiwi.pl b/kiwi.pl
index 8afadd6..05ba3e1 100755
--- a/kiwi.pl
+++ b/kiwi.pl
@@ -165,8 +165,6 @@ our $InstallStickSystem;    # virtual disk system image to be installed on disk
 our $StripImage;            # strip shared objects and binaries
 our $CreateHash;            # create .checksum.md5 for given description
 our $SetupSplash;           # setup splash screen (bootsplash or splashy)
-our $ImageName;             # filename of current image, used in Modules
-our %ForeignRepo;           # may contain XML::LibXML::Element objects
 our @AddRepository;         # add repository for building physical extend
 our @AddRepositoryType;     # add repository type
 our @AddRepositoryAlias;    # alias name for the repository
@@ -218,6 +216,8 @@ our $Convert;               # convert image into given format/configuration
 our $Format;                # format to convert to, vmdk, ovf, etc...
 our $defaultAnswer;         # default answer to any questions
 our $targetDevice;          # alternative device instead of a loop device
+our %XMLChangeSet;          # internal data set for update of XML objects
+our $ImageDescription;      # uniq path to image description due to caller opts
 our $kiwi;                  # global logging handler object
 
 #============================================
@@ -363,7 +363,7 @@ sub main {
 		# Process system image description
 		#------------------------------------------
 		$kiwi -&gt; info (&quot;Reading image description [Cache]...\n&quot;);
-		my $xml = new KIWIXML ($kiwi,$InitCache,\%ForeignRepo,undef,\@Profiles);
+		my $xml = new KIWIXML ($kiwi,$InitCache,undef,undef,\@Profiles);
 		if (! defined $xml) {
 			my $code = kiwiExit (1); return $code;
 		}
@@ -397,7 +397,7 @@ sub main {
 		# Process system image description
 		#------------------------------------------
 		$kiwi -&gt; info (&quot;Reading image description [Prepare]...\n&quot;);
-		my $xml = new KIWIXML ( $kiwi,$Prepare,\%ForeignRepo,undef,\@Profiles );
+		my $xml = new KIWIXML ( $kiwi,$Prepare,undef,\@Profiles );
 		if (! defined $xml) {
 			my $code = kiwiExit (1); return $code;
 		}
@@ -478,12 +478,6 @@ sub main {
 			$xml -&gt; addRemovePackages (@RemovePackage);
 		}
 		#==========================================
-		# Check for inheritance
-		#------------------------------------------
-		if (! $xml -&gt; setupImageInheritance()) {
-			my $code = kiwiExit (1); return $code;
-		}
-		#==========================================
 		# Select cache if requested and exists
 		#------------------------------------------
 		if ($ImageCache) {
@@ -558,6 +552,14 @@ sub main {
 			undef $root;
 			my $code = kiwiExit (1); return $code;
 		}
+		if (! $xml -&gt; writeXMLDescription ($root-&gt;getRootPath())) {
+			$kiwi -&gt; error (&quot;Couldn't write XML description&quot;);
+			$kiwi -&gt; failed ();
+			$root -&gt; cleanMount ();
+			$root -&gt; copyBroken();
+			undef $root;
+			my $code = kiwiExit (1); return $code;
+		}
 		#==========================================
 		# Clean up
 		#------------------------------------------
@@ -584,7 +586,7 @@ sub main {
 		#------------------------------------------
 		$kiwi -&gt; info (&quot;Reading image description [Create]...\n&quot;);
 		my $xml = new KIWIXML (
-			$kiwi,&quot;$Create/image&quot;,\%ForeignRepo,$SetImageType,\@Profiles
+			$kiwi,&quot;$Create/image&quot;,$SetImageType,\@Profiles
 		);
 		if (! defined $xml) {
 			my $code = kiwiExit (1); return $code;
@@ -694,18 +696,17 @@ sub main {
 			if (@deleteList) {
 				$kiwi -&gt; info (&quot;--&gt; Remove: @deleteList\n&quot;);
 			}
+			my $resetVariables   = createResetClosure();
 			$main::Survive       = &quot;yes&quot;;
 			$main::Upgrade       = $main::Create;
 			@main::AddPackage    = @addonList;
 			@main::RemovePackage = @deleteList;
-			my $backupCreate     = $main::Create;
 			undef $main::Create;
 			if (! defined main::main()) {
-				$main::Survive = &quot;default&quot;;
+				&amp;{$resetVariables};
 				my $code = kiwiExit (1); return $code;
 			}
-			$main::Survive = &quot;default&quot;;
-			$main::Create  = $backupCreate;
+			&amp;{$resetVariables};
 			undef $main::Upgrade;
 		}
 		#==========================================
@@ -1200,7 +1201,7 @@ sub main {
 	# Create a virtual disk image
 	#------------------------------------------
 	if (defined $BootVMDisk) {
-		$kiwi -&gt; info (&quot;Creating boot VM disk from: $BootVMDisk...\n&quot;);
+		$kiwi -&gt; info (&quot;--&gt; Creating boot VM disk from: $BootVMDisk...\n&quot;);
 		if (! defined $BootVMSystem) {
 			$kiwi -&gt; error  (&quot;No VM system image specified&quot;);
 			$kiwi -&gt; failed ();
@@ -1358,6 +1359,38 @@ sub init {
 		$Destination = File::Spec-&gt;rel2abs ($Destination);
 	}
 	#========================================
+	# check prepare/create/cache paths
+	#----------------------------------------
+	if (defined $CacheRoot) {
+		if (($CacheRoot !~ /^\//) &amp;&amp; (! -d $CacheRoot)) {
+			$CacheRoot = $System.&quot;/&quot;.$CacheRoot;
+		}
+		$CacheRoot =~ s/\/$//;
+	}
+	if (defined $Prepare) {
+		if (($Prepare !~ /^\//) &amp;&amp; (! -d $Prepare)) {
+			$Prepare = $System.&quot;/&quot;.$Prepare;
+		}
+		$Prepare =~ s/\/$//;
+	}
+	if (defined $Create) {
+		if (($Create !~ /^\//) &amp;&amp; (! -d $Create)) {
+			$Create = $System.&quot;/&quot;.$Create;
+		}
+		$Create =~ s/\/$//;
+	}
+	#========================================
+	# store uniq path to image description
+	#----------------------------------------
+	if (defined $Prepare) {
+		$ImageDescription = $Prepare;
+	}
+	if (defined $Create) {
+		if (open FD,&quot;$Create/image/main::Prepare&quot;) {
+			$ImageDescription = &lt;FD&gt;; close FD;
+		}
+	}
+	#========================================
 	# store original value of Profiles
 	#----------------------------------------
 	@ProfilesOrig = @Profiles;
@@ -3097,27 +3130,7 @@ sub createCache {
 	# Variable setup and reset function
 	#------------------------------------------
 	$ENV{MKCLICFS_COMPRESSION} = 0;
-	sub reset_sub {
-		my $backupSurvive      = $main::Survive;
-		my @backupProfiles     = @main::Profiles;
-		my $backupCreate       = $main::Create;
-		my $backupPrepare      = $main::Prepare;
-		my $backupRootTree     = $main::RootTree;
-		my $backupForceNewRoot = $main::ForceNewRoot;
-		my @backupPatterns     = @main::AddPattern;
-		my @backupPackages     = @main::AddPackage;
-		return sub {
-			@main::Profiles     = @backupProfiles;
-			$main::Prepare      = $backupPrepare;
-			$main::Create       = $backupCreate;
-			$main::ForceNewRoot = $backupForceNewRoot;
-			@main::AddPattern   = @backupPatterns;
-			@main::AddPackage   = @backupPackages;
-			$main::RootTree     = $backupRootTree;
-			$main::Survive      = $backupSurvive;
-		}
-	}
-	my $resetVariables     = reset_sub();
+	my $resetVariables     = createResetClosure();
 	my $CacheDistro        = $init-&gt;[0];
 	my @CachePatterns      = @{$init-&gt;[1]};
 	my @CachePackages      = @{$init-&gt;[2]};
@@ -3194,7 +3207,7 @@ sub createCache {
 		if (! $image -&gt; createImageClicFS ()) {
 			&amp;{$resetVariables}; return undef;
 		}
-		my $name = $imageCacheDir.&quot;/&quot;.$image -&gt; buildImageName();
+		my $name = $imageCacheDir.&quot;/&quot;.$xml -&gt; buildImageName();
 		qxx (&quot;mv $name $main::RootTree.clicfs&quot;);
 		qxx (&quot;rm $name.clicfs $name.md5&quot;);
 		qxx (&quot;rm -f  $imageCacheDir/initrd-*&quot;);
@@ -3212,6 +3225,32 @@ sub createCache {
 	return $imageCacheDir;
 }
 
+#==========================================
+# createResetClosure
+#------------------------------------------
+sub createResetClosure {
+	my $backupSurvive       = $main::Survive;
+	my @backupProfiles      = @main::Profiles;
+	my $backupCreate        = $main::Create;
+	my $backupPrepare       = $main::Prepare;
+	my $backupRootTree      = $main::RootTree;
+	my $backupForceNewRoot  = $main::ForceNewRoot;
+	my @backupPatterns      = @main::AddPattern;
+	my @backupPackages      = @main::AddPackage;
+	my @backupRemovePackages= @main::RemovePackage;
+	return sub {
+		@main::Profiles     = @backupProfiles;
+		$main::Prepare      = $backupPrepare;
+		$main::Create       = $backupCreate;
+		$main::ForceNewRoot = $backupForceNewRoot;
+		@main::AddPattern   = @backupPatterns;
+		@main::AddPackage   = @backupPackages;
+		@main::RemovePackage= @backupRemovePackages;
+		$main::RootTree     = $backupRootTree;
+		$main::Survive      = $backupSurvive;
+	}
+}
+
 main();
 
 # vim: set noexpandtab:
diff --git a/modules/KIWIBoot.pm b/modules/KIWIBoot.pm
index e461f2c..be53508 100644
--- a/modules/KIWIBoot.pm
+++ b/modules/KIWIBoot.pm
@@ -196,7 +196,7 @@ sub new {
 	if (defined $system) {
 		if (-d $system) {
 			$xml = new KIWIXML (
-				$kiwi,$system.&quot;/image&quot;,undef,$main::SetImageType,$profile
+				$kiwi,$system.&quot;/image&quot;,$main::SetImageType,$profile
 			);
 		} else {
 			my %fsattr = main::checkFileSystem ($system);
@@ -241,7 +241,7 @@ sub new {
 				# read disk image XML description
 				#------------------------------------------
 				$xml = new KIWIXML (
-					$kiwi,$tmpdir.&quot;/image&quot;,undef,$main::SetImageType,$profile
+					$kiwi,$tmpdir.&quot;/image&quot;,$main::SetImageType,$profile
 				);
 				#==========================================
 				# clean up
@@ -258,7 +258,7 @@ sub new {
 				# read disk image XML description
 				#------------------------------------------
 				$xml = new KIWIXML (
-					$kiwi,$tmpdir.&quot;/image&quot;,undef,$main::SetImageType,$profile
+					$kiwi,$tmpdir.&quot;/image&quot;,$main::SetImageType,$profile
 				);
 				#==========================================
 				# clean up
@@ -1544,7 +1544,7 @@ sub setupBootDisk {
 			$kiwi -&gt; failed ();
 			return undef;
 		}
-		$xml = new KIWIXML ( $kiwi,$system.&quot;/image&quot;,undef,$imgtype,$profile );
+		$xml = new KIWIXML ( $kiwi,$system.&quot;/image&quot;,$imgtype,$profile );
 		if (! defined $xml) {
 			return undef;
 		}
@@ -1562,7 +1562,7 @@ sub setupBootDisk {
 		if (-f &quot;$tmpdir/rootfs.tar&quot;) {
 			$imgtype = &quot;split&quot;;
 		}
-		$xml = new KIWIXML ( $kiwi,$tmpdir.&quot;/image&quot;,undef,$imgtype,$profile );
+		$xml = new KIWIXML ( $kiwi,$tmpdir.&quot;/image&quot;,$imgtype,$profile );
 		main::umount();
 		if (! defined $xml) {
 			return undef;
@@ -2448,7 +2448,7 @@ sub setupBootDisk {
 			if ($haveDiskDevice) {
 				$this -&gt; {system} = $this-&gt;{loop};
 			}
-			$kiwi -&gt; info (&quot;Creating install ISO image\n&quot;);
+			$kiwi -&gt; info (&quot;--&gt; Creating install ISO image\n&quot;);
 			$this -&gt; cleanLoop ();
 			if (! $this -&gt; setupInstallCD()) {
 				return undef;
diff --git a/modules/KIWICache.kiwi b/modules/KIWICache.kiwi
index 7c4d389..40ad732 100644
--- a/modules/KIWICache.kiwi
+++ b/modules/KIWICache.kiwi
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;cache-builder&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;cache-builder&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/modules/KIWIImage.pm b/modules/KIWIImage.pm
index 01b31fb..927dd84 100644
--- a/modules/KIWIImage.pm
+++ b/modules/KIWIImage.pm
@@ -108,6 +108,31 @@ sub new {
 	my $arch = qxx (&quot;uname -m&quot;); chomp ( $arch );
 	$arch = &quot;.$arch&quot;;
 	#==========================================
+	# Store initial values of main variables
+	#------------------------------------------
+	sub reset_sub {
+		my @backupProfiles     = @main::Profiles;
+		my $backupCreate       = $main::Create;
+		my $backupPrepare      = $main::Prepare;
+		my $backupRootTree     = $main::RootTree;
+		my $backupForceNewRoot = $main::ForceNewRoot;
+		my @backupPatterns     = @main::AddPattern;
+		my @backupPackages     = @main::AddPackage;
+		my $backupSetImageType = $main::SetImageType;
+		return sub {
+			@main::Profiles     = @backupProfiles;
+			$main::Prepare      = $backupPrepare;
+			$main::Create       = $backupCreate;
+			$main::ForceNewRoot = $backupForceNewRoot;
+			@main::AddPattern   = @backupPatterns;
+			@main::AddPackage   = @backupPackages;
+			$main::RootTree     = $backupRootTree;
+			$main::SetImageType = $backupSetImageType;
+			$main::Survive      = &quot;default&quot;;
+			undef %main::XMLChangeSet;
+		}
+	}
+	#==========================================
 	# Store object data
 	#------------------------------------------
 	$this-&gt;{kiwi}       = $kiwi;
@@ -117,6 +142,7 @@ sub new {
 	$this-&gt;{imageStrip} = $imageStrip;
 	$this-&gt;{baseSystem} = $baseSystem;
 	$this-&gt;{arch}       = $arch;
+	$this-&gt;{resetvars}  = reset_sub();
 	#==========================================
 	# Mount overlay tree if required...
 	#------------------------------------------
@@ -146,6 +172,181 @@ sub getImageTree {
 }
 
 #==========================================
+# updateDescription
+#------------------------------------------
+sub updateDescription {
+	# ...
+	# Create change set hash from the given XML object
+	# to be integrated into another XML object at a later
+	# point in the process.
+	# ---
+	my $this      = shift;
+	my $src_xml   = shift;
+	my %src_type  = %{$src_xml-&gt;getImageTypeAndAttributes()};
+	my %changeset = ();
+	#==========================================
+	# Store general data
+	#------------------------------------------
+	if ($src_type{hybrid}) {
+		$changeset{&quot;hybrid&quot;}= $src_type{hybrid};
+	}
+	if ($src_type{hybridpersistent}) {
+		$changeset{&quot;hybridpersistent&quot;} = $src_type{hybridpersistent};
+	}
+	if ($src_type{cmdline}) {
+		$changeset{&quot;kernelcmdline&quot;} = $src_type{cmdline};
+	}
+	if ($src_type{lvm}) {
+		$changeset{&quot;lvm&quot;} = $src_type{lvm};
+	}
+	if ($src_type{bootloader}) {
+		$changeset{&quot;bootloader&quot;} = $src_type{bootloader};
+	}
+	if ($src_type{installboot}) {
+		$changeset{&quot;installboot&quot;} = $src_type{installboot};
+	}
+	if ($src_type{bootprofile}) {
+		$changeset{&quot;bootprofile&quot;} = $src_type{bootprofile};
+	}
+	if ($src_type{bootkernel}) {
+		$changeset{&quot;bootkernel&quot;} = $src_type{bootkernel};
+	}
+	$changeset{&quot;xmlobj&quot;}         = $src_xml;
+	$changeset{&quot;xmlnode&quot;}        = $src_xml-&gt;getNodeList();
+	$changeset{&quot;xmlpacnode&quot;}     = $src_xml-&gt;getPackageNodeList();
+	$changeset{&quot;packagemanager&quot;} = $src_xml-&gt;getPackageManager();
+	$changeset{&quot;domain&quot;}         = $src_xml-&gt;getXenDomain();
+	$changeset{&quot;displayname&quot;}    = $src_xml-&gt;getImageDisplayName();
+	$changeset{&quot;locale&quot;}         = $src_xml-&gt;getLocale();
+	$changeset{&quot;boot-theme&quot;}     = $src_xml-&gt;getBootTheme();
+	#==========================================
+	# Store OEM data
+	#------------------------------------------
+	$changeset{&quot;oem-partition-install&quot;}    = $src_xml-&gt;getOEMPartitionInstall();
+	$changeset{&quot;oem-swap&quot;}                 = $src_xml-&gt;getOEMSwap();
+	$changeset{&quot;oem-align-partition&quot;}      = $src_xml-&gt;getOEMAlignPartition();
+	$changeset{&quot;oem-swapsize&quot;}             = $src_xml-&gt;getOEMSwapSize();
+	$changeset{&quot;oem-systemsize&quot;}           = $src_xml-&gt;getOEMSystemSize();
+	$changeset{&quot;oem-boot-title&quot;}           = $src_xml-&gt;getOEMBootTitle();
+	$changeset{&quot;oem-kiwi-initrd&quot;}          = $src_xml-&gt;getOEMKiwiInitrd();
+	$changeset{&quot;oem-reboot&quot;}               = $src_xml-&gt;getOEMReboot();
+	$changeset{&quot;oem-reboot-interactive&quot;}   = $src_xml-&gt;getOEMRebootInter();
+	$changeset{&quot;oem-shutdown&quot;}             = $src_xml-&gt;getOEMShutdown();
+	$changeset{&quot;oem-shutdown-interactive&quot;} = $src_xml-&gt;getOEMShutdownInter();
+	$changeset{&quot;oem-bootwait&quot;}             = $src_xml-&gt;getOEMBootWait();
+	$changeset{&quot;oem-unattended&quot;}           = $src_xml-&gt;getOEMUnattended();
+	$changeset{&quot;oem-recovery&quot;}             = $src_xml-&gt;getOEMRecovery();
+	$changeset{&quot;oem-recoveryID&quot;}           = $src_xml-&gt;getOEMRecoveryID();
+	$changeset{&quot;oem-inplace-recovery&quot;}     = $src_xml-&gt;getOEMRecoveryInPlace();
+	#==========================================
+	# Return changeset hash
+	#------------------------------------------
+	return %changeset;
+}
+
+#==========================================
+# checkAndSetupPrebuiltBootImage
+#------------------------------------------
+sub checkAndSetupPrebuiltBootImage {
+	# ...
+	# check the xml if a prebuild boot image was requested.
+	# if yes check if that boot image exists and if yes
+	# copy it to the destination directory for this build
+	# ---
+	my $this = shift;
+	my $ixml = shift;
+	my $kiwi = $this-&gt;{kiwi};
+	my %type = %{$ixml-&gt;getImageTypeAndAttributes()};
+	my $pblt = $type{checkprebuilt};
+	my $boot = $type{boot};
+	my $ok   = 0;
+	#==========================================
+	# open boot image XML object
+	#------------------------------------------
+	my $bxml = new KIWIXML ( $kiwi,$main::System.&quot;/&quot;.$boot );
+	if (! $bxml) {
+		return undef;
+	}
+	my $bootImageName = $bxml -&gt; buildImageName();
+	undef $bxml;
+	$kiwi -&gt; info (&quot;Checking for pre-built boot image&quot;);
+	#==========================================
+	# is it requested...
+	#------------------------------------------
+	if ((! $pblt) || ($pblt eq &quot;false&quot;)) {
+		$kiwi -&gt; notset();
+		return ($bootImageName,0);
+	}
+	#==========================================
+	# check path names for boot image
+	#------------------------------------------
+	my $lookup = $main::System.&quot;/&quot;.$boot.&quot;-prebuilt/&quot;;
+	if (defined $main::PrebuiltBootImage) {
+		$lookup = $main::PrebuiltBootImage.&quot;/&quot;;
+	}
+	my $pinitrd = $lookup.$bootImageName.&quot;.gz&quot;;
+	my $psplash;
+	if (-f $lookup.$bootImageName.&quot;.splash.gz&quot;) {
+		$psplash = $lookup.$bootImageName.&quot;.splash.gz&quot;;
+	}
+	my $plinux  = $lookup.$bootImageName.&quot;.kernel&quot;;
+	if (! -f $pinitrd) {
+		$pinitrd = $lookup.$bootImageName;
+	}
+	if ((! -f $pinitrd) || (! -f $plinux)) {
+		$kiwi -&gt; skipped();
+		$kiwi -&gt; info (&quot;Can't find pre-built boot image in $lookup&quot;);
+		$kiwi -&gt; skipped();
+		$ok = 0;
+	} else {
+		$kiwi -&gt; done();
+		$kiwi -&gt; info (&quot;Copying pre-built boot image to destination&quot;);
+		my $lookup = basename $pinitrd;
+		if (-f &quot;$main::Destination/$lookup&quot;) {
+			#==========================================
+			# Already exists in destination dir
+			#------------------------------------------
+			$kiwi -&gt; done();
+			$ok = 1;
+		} else {
+			#==========================================
+			# Needs to be copied...
+			#------------------------------------------
+			if ($psplash) {
+				qxx (&quot;cp -a $psplash $main::Destination 2&gt;&amp;1&quot;);
+			}
+			my $data = qxx (&quot;cp -a $pinitrd $main::Destination 2&gt;&amp;1&quot;);
+			my $code = $? &gt;&gt; 8;
+			if ($code != 0) {
+				$kiwi -&gt; failed();
+				$kiwi -&gt; error (&quot;Can't copy pre-built initrd: $data&quot;);
+				$kiwi -&gt; failed();
+				$ok = 0;
+			} else {
+				$data = qxx (&quot;cp -a $plinux* $main::Destination 2&gt;&amp;1&quot;);
+				$code = $? &gt;&gt; 8;
+				if ($code != 0) {
+					$kiwi -&gt; failed();
+					$kiwi -&gt; error (&quot;Can't copy pre-built kernel: $data&quot;);
+					$kiwi -&gt; failed();
+					$ok = 0;
+				} else {
+					$kiwi -&gt; done();
+					$ok = 1;
+				}
+			}
+		}
+	}
+	#==========================================
+	# setup return for ok
+	#------------------------------------------
+	if (! $ok) {
+		return ($bootImageName,0);
+	}
+	return ($bootImageName,1);
+}
+
+#==========================================
 # setupOverlay
 #------------------------------------------
 sub setupOverlay {
@@ -627,35 +828,28 @@ sub createImageCPIO {
 }
 
 #==========================================
-# createImageUSB
+# createImageRootAndBoot
 #------------------------------------------
-sub createImageUSB {
+sub createImageRootAndBoot {
 	# ...
-	# Create all images needed to use it on an USB stick.
-	# This includes the system image and the boot image appropriate
-	# for the system image. The boot image description must exist
-	# in /usr/share/kiwi/image. The process will create all images
-	# but will _not_ deploy the images on the stick. To do this
-	# call kiwi with the --bootstick option after the image creation
-	# process is finished
-	#
-	# Note: vmx|xen|pxe images requires the same steps than USB
-	# images. Therefore this function is used inside the
-	# createImageVMX(), createImagePXE()
-	# functions too 
+	# Create root filesystem image if required according to
+	# the selected image type and also create the boot image
+	# including kernel and initrd. This function is required
+	# to create the preconditions for virtual disk images
 	# ---
 	#==========================================
-	# Create usb|vmx|xen|pxe system image
+	# Create root image
 	#------------------------------------------
-	my $this = shift;
-	my $para = shift;
-	my $text = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $sxml = $this-&gt;{xml};
-	my %stype= %{$sxml-&gt;getImageTypeAndAttributes()};
-	my $imageTree = $this-&gt;{imageTree};
-	my $baseSystem= $this-&gt;{baseSystem};
-	my $treeAccess= 1;
+	my $this       = shift;
+	my $para       = shift;
+	my $text       = shift;
+	my $kiwi       = $this-&gt;{kiwi};
+	my $sxml       = $this-&gt;{xml};
+	my %stype      = %{$sxml-&gt;getImageTypeAndAttributes()};
+	my $imageTree  = $this-&gt;{imageTree};
+	my $baseSystem = $this-&gt;{baseSystem};
+	my $treeAccess = 1;
+	my @bootdata;
 	my $type;
 	my $boot;
 	my %result;
@@ -741,193 +935,73 @@ sub createImageUSB {
 	if (! $ok) {
 		return undef;
 	}
-	if (! defined $main::ImageName) {
-		$this -&gt; buildImageName();
-	}
-	$result{systemImage} = $main::ImageName;
 	#==========================================
-	# Prepare usb|vmx|xen|pxe boot image
+	# Prepare/Create boot image
 	#------------------------------------------
-	$kiwi -&gt; info (&quot;Creating $text boot image: $boot...\n&quot;);
-	my $Prepare = $imageTree.&quot;/image&quot;;
-	my $xml = new KIWIXML (
-		$kiwi,$Prepare,undef,$main::SetImageType,\@main::Profiles
-	);
-	if (! defined $xml) {
-		return undef;
-	}
-	my %type   = %{$xml-&gt;getImageTypeAndAttributes()};
-	my $pblt   = $type{checkprebuilt};
-	my $tmpdir = qxx (&quot;mktemp -q -d /tmp/kiwi-$text.XXXXXX&quot;); chomp $tmpdir;
-	my $result = $? &gt;&gt; 8;
-	if ($result != 0) {
-		$kiwi -&gt; error  (&quot;Couldn't create tmp dir: $tmpdir: $!&quot;);
-		$kiwi -&gt; failed ();
+	$kiwi -&gt; info (&quot;--&gt; Creating $text boot image: $boot...\n&quot;);
+	@bootdata = $this -&gt; checkAndSetupPrebuiltBootImage ($sxml);
+	if (! @bootdata) {
 		return undef;
 	}
-	push @{$this-&gt;{tmpdirs}},$tmpdir;
-	$main::Survive  = &quot;yes&quot;;
-	$main::RootTree = &quot;$tmpdir/kiwi-&quot;.$text.&quot;boot-$$&quot;;
-	$main::Prepare  = $boot;
-	if (defined $main::CacheRoot) {
-		if (($main::CacheRoot !~ /^\//) &amp;&amp; (! -d $main::CacheRoot)) {
-			$main::CacheRoot = $main::System.&quot;/&quot;.$main::CacheRoot;
-		}
-	}
-	if (($main::Prepare !~ /^\//) &amp;&amp; (! -d $main::Prepare)) {
-		$main::Prepare = $main::System.&quot;/&quot;.$main::Prepare;
-	}
-	@main::Profiles = ();
-	if ($type{bootprofile}) {
-		push @main::Profiles ,split (/,/,$type{bootprofile});
-	}
-	if ($type{bootkernel}) {
-		push @main::Profiles ,split (/,/,$type{bootkernel});
-	}
-	if ($type{cmdline}) {
-		$main::ForeignRepo{&quot;kernelcmdline&quot;} = $type{cmdline};
-	}
-	if ($type{lvm}) {
-		$main::ForeignRepo{&quot;lvm&quot;} = $type{lvm};
-	}
-	if ($type{bootloader}) {
-		$main::ForeignRepo{&quot;bootloader&quot;} = $type{bootloader};
-	}
-	if ($type{installboot}) {
-		$main::ForeignRepo{&quot;installboot&quot;} = $type{installboot};
-	}
-	$main::ForeignRepo{&quot;xmlobj&quot;}  = $xml;
-	$main::ForeignRepo{&quot;xmlnode&quot;} = $xml -&gt; getForeignNodeList();
-	$main::ForeignRepo{&quot;xmlpacnode&quot;} = $xml -&gt; getForeignPackageNodeList();
-	$main::ForeignRepo{&quot;packagemanager&quot;} = $xml -&gt; getPackageManager();
-	$main::ForeignRepo{&quot;domain&quot;} = $xml -&gt; getXenDomain();
-	$main::ForeignRepo{&quot;oem-partition-install&quot;} =$xml-&gt;getOEMPartitionInstall();
-	$main::ForeignRepo{&quot;oem-swap&quot;}       = $xml -&gt; getOEMSwap();
-	$main::ForeignRepo{&quot;oem-align-partition&quot;} = $xml -&gt; getOEMAlignPartition();
-	$main::ForeignRepo{&quot;oem-swapsize&quot;}   = $xml -&gt; getOEMSwapSize();
-	$main::ForeignRepo{&quot;oem-systemsize&quot;} = $xml -&gt; getOEMSystemSize();
-	$main::ForeignRepo{&quot;oem-boot-title&quot;} = $xml -&gt; getOEMBootTitle();
-	$main::ForeignRepo{&quot;oem-kiwi-initrd&quot;}= $xml -&gt; getOEMKiwiInitrd();
-	$main::ForeignRepo{&quot;oem-reboot&quot;}     = $xml -&gt; getOEMReboot();
-	$main::ForeignRepo{&quot;oem-reboot-interactive&quot;} = $xml -&gt; getOEMRebootInter();
-	$main::ForeignRepo{&quot;oem-shutdown&quot;}   = $xml -&gt; getOEMShutdown();
-	$main::ForeignRepo{&quot;oem-shutdown-interactive&quot;}
-										= $xml -&gt; getOEMShutdownInter();
-	$main::ForeignRepo{&quot;oem-bootwait&quot;}   = $xml -&gt; getOEMBootWait();
-	$main::ForeignRepo{&quot;oem-unattended&quot;} = $xml -&gt; getOEMUnattended();
-	$main::ForeignRepo{&quot;oem-recovery&quot;}   = $xml -&gt; getOEMRecovery();
-	$main::ForeignRepo{&quot;oem-recoveryID&quot;} = $xml -&gt; getOEMRecoveryID();
-	$main::ForeignRepo{&quot;oem-inplace-recovery&quot;} = $xml -&gt;getOEMRecoveryInPlace();
-	$main::ForeignRepo{&quot;displayname&quot;}    = $xml -&gt; getImageDisplayName();
-	$main::ForeignRepo{&quot;locale&quot;}    = $xml -&gt; getLocale();
-	$main::ForeignRepo{&quot;boot-theme&quot;}= $xml -&gt; getBootTheme();
-	$main::ForeignRepo{&quot;prepare&quot;}   = $main::Prepare;
-	$main::ForeignRepo{&quot;create&quot;}    = $main::Create;
-	$main::Create   = $main::RootTree;
-	my $imageTypeSaved = $main::SetImageType;
-	undef $main::SetImageType;
-	$kiwi -&gt; info (&quot;Checking for pre-built boot image&quot;);
-	if ((! $pblt) || ($pblt eq &quot;false&quot;) || ($pblt eq &quot;0&quot;)) {
+	if ($bootdata[1] == 0) {
 		#==========================================
-		# don't want a prebuilt boot image
+		# Setup changeset to be used by boot image
 		#------------------------------------------
-		$kiwi -&gt; notset();
-		$pblt = 0;
-	} else {
+		%main::XMLChangeSet = $this -&gt; updateDescription ($sxml);
 		#==========================================
-		# check if a prebuilt boot image exists
+		# Create tmp dir for boot image creation
 		#------------------------------------------
-		my $storexml = $this-&gt;{xml};
-		$this-&gt;{xml} = new KIWIXML ( $kiwi,$main::Prepare );
-		$this -&gt; buildImageName();
-		$this-&gt;{xml} = $storexml;
-		my $lookup  = $main::Prepare.&quot;-prebuilt/&quot;;
-		if (defined $main::PrebuiltBootImage) {
-			$lookup = $main::PrebuiltBootImage.&quot;/&quot;;
-		}
-		my $pinitrd = $lookup.$main::ImageName.&quot;.gz&quot;;
-		my $psplash;
-		if (-f $lookup.$main::ImageName.&quot;.splash.gz&quot;) {
-			$psplash = $lookup.$main::ImageName.&quot;.splash.gz&quot;;
-		}
-		my $plinux  = $lookup.$main::ImageName.&quot;.kernel&quot;;
-		if (! -f $pinitrd) {
-			$pinitrd = $lookup.$main::ImageName;
-		}
-		if ((! -f $pinitrd) || (! -f $plinux)) {
-			$kiwi -&gt; skipped();
-			$kiwi -&gt; info (&quot;Can't find pre-built boot image in $lookup&quot;);
-			$kiwi -&gt; skipped();
-			$pblt = 0;
-		} else {
-			$kiwi -&gt; done();
-			$kiwi -&gt; info (&quot;Copying pre-built boot image to destination&quot;);
-			my $lookup = basename $pinitrd;
-			if (-f &quot;$main::Destination/$lookup&quot;) {
-				# prebuilt boot image already exists in destination dir...
-				$kiwi -&gt; done();
-				$pblt = 1;
-			} else {
-				if ($psplash) {
-					qxx (&quot;cp -a $psplash $main::Destination 2&gt;&amp;1&quot;);
-				}
-				my $data = qxx (&quot;cp -a $pinitrd $main::Destination 2&gt;&amp;1&quot;);
-				my $code = $? &gt;&gt; 8;
-				if ($code != 0) {
-					$kiwi -&gt; failed();
-					$kiwi -&gt; error (&quot;Can't copy pre-built initrd: $data&quot;);
-					$kiwi -&gt; failed();
-					$pblt = 0;
-				} else {
-					$data = qxx (&quot;cp -a $plinux* $main::Destination 2&gt;&amp;1&quot;);
-					$code = $? &gt;&gt; 8;
-					if ($code != 0) {
-						$kiwi -&gt; failed();
-						$kiwi -&gt; error (&quot;Can't copy pre-built kernel: $data&quot;);
-						$kiwi -&gt; failed();
-						$pblt = 0;
-					} else {
-						$kiwi -&gt; done();
-						$pblt = 1;
-					}
-				}
-			}
+		my $tmpdir = qxx (&quot;mktemp -q -d $main::Destination/boot-$text.XXXXXX&quot;);
+		my $result = $? &gt;&gt; 8;
+		if ($result != 0) {
+			$kiwi -&gt; error  (&quot;Couldn't create tmp dir: $tmpdir: $!&quot;);
+			$kiwi -&gt; failed ();
+			return undef;
 		}
-	}
-	if (! $pblt) {
+		chomp $tmpdir;
+		push @{$this-&gt;{tmpdirs}},$tmpdir;
 		#==========================================
-		# build the usb|vmx|xen|pxe boot image
+		# Setup boot prepare and create...
 		#------------------------------------------
+		$main::Survive  = &quot;yes&quot;;
+		$main::RootTree = &quot;$tmpdir/kiwi-&quot;.$text.&quot;boot-$$&quot;;
+		$main::Prepare  = $main::System.&quot;/&quot;.$stype{boot};
+		$main::Create   = $main::RootTree;
+		undef @main::Profiles;
 		undef @main::AddPackage;
-		undef $main::Upgrade;
+		undef @main::RemovePackage;
+		undef $main::SetImageType;
+		#==========================================
+		# Call kiwi again
+		#------------------------------------------
 		if (! defined main::main()) {
-			$main::Survive = &quot;default&quot;;
 			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
 				qxx (&quot;rm -rf $tmpdir&quot;);
 			}
+			&amp;{$this-&gt;{resetvars}};
 			return undef;
 		}
-	}
-	#==========================================
-	# remove tmpdir with boot tree
-	#------------------------------------------
-	if (! -d $main::RootTree.$baseSystem) {
-		qxx (&quot;rm -rf $main::RootTree&quot;);
+		#==========================================
+		# Clean up tmp directory
+		#------------------------------------------
 		qxx (&quot;rm -rf $tmpdir&quot;);
+		#==========================================
+		# Reset variables
+		#------------------------------------------
+		&amp;{$this-&gt;{resetvars}};
 	}
 	#==========================================
 	# setup initrd name
 	#------------------------------------------
-	my $initrd = $main::Destination.&quot;/&quot;.$main::ImageName.&quot;.gz&quot;;
+	my $initrd = $main::Destination.&quot;/&quot;.$bootdata[0].&quot;.gz&quot;;
 	if (! -f $initrd) {
-		$initrd = $main::Destination.&quot;/&quot;.$main::ImageName;
+		$initrd = $main::Destination.&quot;/&quot;.$bootdata[0];
 	}
 	#==========================================
 	# Check boot and system image kernel
 	#------------------------------------------
 	if (defined $main::CheckKernel) {
-		if (! $this -&gt; checkKernel ($initrd,$imageTree)) {
+		if (! $this -&gt; checkKernel ($initrd,$imageTree,$bootdata[0])) {
 			return undef;
 		}
 	}
@@ -940,23 +1014,12 @@ sub createImageUSB {
 	}
 	my $newinitrd = $kboot -&gt; setupSplash();
 	#==========================================
-	# inflate/deflate initrd to make xen happy
-	#------------------------------------------
-	if (($type{type} eq &quot;xen&quot;) || ($type{bootprofile} eq &quot;xen&quot;)) {
-		my $irdunc = $newinitrd;
-		$irdunc =~ s/\.gz//;
-		qxx (&quot;$main::Gzip -d $newinitrd &amp;&amp; $main::Gzip $irdunc&quot;);
-	}
-	#==========================================
 	# Store meta data for subsequent calls
 	#------------------------------------------
-	$main::SetImageType = $imageTypeSaved;
-	$result{bootImage} = $main::ImageName;
+	$result{systemImage} = $sxml -&gt; buildImageName();
+	$result{bootImage}   = $bootdata[0];
 	if ($text eq &quot;VMX&quot;) {
-		$result{format} = $type{format};
-	}
-	if ($text eq &quot;USB&quot;) {
-		$main::Survive = &quot;default&quot;;
+		$result{format} = $stype{format};
 	}
 	return \%result;
 }
@@ -970,22 +1033,17 @@ sub createImagePXE {
 	# method will create the specified boot image (initrd) and
 	# the system image. In order to use this image via PXE the
 	# administration needs to provide the images via TFTP
-	#
-	# NOTE: Because the steps of creating
-	# a PXE image are the same as creating an usb stick image
-	# we make use of the usb code above to create the system and boot
-	# image
 	# ---
 	#==========================================
 	# Create PXE boot and system image
 	#------------------------------------------
 	my $this = shift;
 	my $para = shift;
-	my $name = $this -&gt; createImageUSB ($para,&quot;PXE&quot;);
+	my $name = $this -&gt; createImageRootAndBoot ($para,&quot;PXE&quot;);
 	if (! defined $name) {
 		return undef;
 	}
-	$main::Survive = &quot;default&quot;;
+	&amp;{$this-&gt;{resetvars}};
 	return $this;
 }
 
@@ -995,17 +1053,12 @@ sub createImagePXE {
 sub createImageVMX {
 	# ...
 	# Create virtual machine disks. By default a raw disk image will
-	# be created from which other types are derived via conversion. The output
-	# format is specified by the format attribute in the type section.
-	# Supported formats are: vvfat vpc bochs dmg vmdk qcow cow raw
+	# be created from which other types are derived via conversion.
+	# The output format is specified by the format attribute in the
+	# type section. Supported formats are: vmdk qcow raw ovf
 	# The process will create the system image and the appropriate vmx
 	# boot image plus a .raw and an optional format specific image.
 	# The boot image description must exist in /usr/share/kiwi/image.
-	#
-	# NOTE: Because the first steps of creating
-	# a virtual machine image are the same as creating a usb stick image
-	# we make use of the usb code above to create the system and boot
-	# image
 	# ---
 	#==========================================
 	# Create VMX boot and system image
@@ -1015,7 +1068,7 @@ sub createImageVMX {
 	my $kiwi = $this-&gt;{kiwi};
 	my $xml  = $this-&gt;{xml};
 	my %xenc = $xml  -&gt; getXenConfig();
-	my $name = $this -&gt; createImageUSB ($para,&quot;VMX&quot;);
+	my $name = $this -&gt; createImageRootAndBoot ($para,&quot;VMX&quot;);
 	my $xendomain;
 	if (! defined $name) {
 		return undef;
@@ -1025,18 +1078,19 @@ sub createImageVMX {
 	} else {
 		$xendomain = &quot;dom0&quot;;
 	}
-	undef $main::Prepare;
-	undef $main::Create;
 	#==========================================
-	# Create virtual disk images
+	# Create virtual disk image(s)
 	#------------------------------------------
+	$main::Survive     = &quot;yes&quot;;
 	$main::BootVMDisk  = $main::Destination.&quot;/&quot;.$name-&gt;{bootImage}.&quot;.splash.gz&quot;;
 	$main::BootVMSystem= $main::Destination.&quot;/&quot;.$name-&gt;{systemImage};
+	undef $main::Prepare;
+	undef $main::Create;
 	if (defined $name-&gt;{imageTree}) {
 		$main::BootVMSystem = $name-&gt;{imageTree};
 	}
 	if (! defined main::main()) {
-		$main::Survive = &quot;default&quot;;
+		&amp;{$this-&gt;{resetvars}};
 		return undef;
 	}
 	#==========================================
@@ -1048,29 +1102,15 @@ sub createImageVMX {
 		$main::Convert = $main::Destination.&quot;/&quot;.$name-&gt;{systemImage}.&quot;.raw&quot;;
 		$main::Format  = $name-&gt;{format};
 		if (! defined main::main()) {
-			$main::Survive = &quot;default&quot;;
+			&amp;{$this-&gt;{resetvars}};
 			return undef;
 		}
 	}
-	$main::Survive = &quot;default&quot;;
+	&amp;{$this-&gt;{resetvars}};
 	return $this;
 }
 
 #==========================================
-# makeLabel
-#------------------------------------------
-sub makeLabel {
-	# ...
-	# isolinux handles spaces as &quot;_&quot;, so we replace
-	# each space with an underscore
-	# ----
-	my $this = shift;
-	my $label = shift;
-	$label =~ s/ /_/g;
-	return $label;
-}
-
-#==========================================
 # createImageLiveCD
 #------------------------------------------
 sub createImageLiveCD {
@@ -1095,17 +1135,23 @@ sub createImageLiveCD {
 	my $sxml = $this-&gt;{xml};
 	my $imageTree = $this-&gt;{imageTree};
 	my $baseSystem= $this-&gt;{baseSystem};
+	my @bootdata;
 	my $error;
 	my $data;
 	my $code;
 	my $imageTreeReadOnly;
-	my $plinux;
-	my $pinitrd;
-	my $pxboot;
 	my $hybrid = 0;
+	my $isxen  = 0;
 	my $hybridpersistent = 0;
 	my $cmdline;
 	#==========================================
+	# Store arch name used by iso
+	#------------------------------------------
+	my $isoarch = qxx (&quot;uname -m&quot;); chomp $isoarch;
+	if ($isoarch =~ /i.86/) {
+		$isoarch = &quot;i386&quot;;
+	}
+	#==========================================
 	# Get system image name
 	#------------------------------------------
 	my $systemName = $sxml -&gt; getImageName();
@@ -1113,9 +1159,9 @@ sub createImageLiveCD {
 	#==========================================
 	# Get system image type information
 	#------------------------------------------
-	my %type = %{$sxml-&gt;getImageTypeAndAttributes()};
-	my $pblt = $type{checkprebuilt};
-	my $vga  = $type{vga};
+	my %stype= %{$sxml-&gt;getImageTypeAndAttributes()};
+	my $pblt = $stype{checkprebuilt};
+	my $vga  = $stype{vga};
 	#==========================================
 	# Get boot image name and compressed flag
 	#------------------------------------------
@@ -1131,18 +1177,18 @@ sub createImageLiveCD {
 	#==========================================
 	# Check for hybrid ISO
 	#------------------------------------------
-	if ((defined $type{hybrid}) &amp;&amp; ($type{hybrid} =~ /yes|true/i)) {
+	if ((defined $stype{hybrid}) &amp;&amp; ($stype{hybrid} =~ /yes|true/i)) {
 		$hybrid = 1;
 	}
-	if ((defined $type{hybridpersistent}) &amp;&amp;
-		($type{hybridpersistent} =~ /yes|true/i)
+	if ((defined $stype{hybridpersistent}) &amp;&amp;
+		($stype{hybridpersistent} =~ /yes|true/i)
 	) {
 		$hybridpersistent = 1;
 	}
 	#==========================================
 	# Check for user-specified cmdline options
 	#------------------------------------------
-	if (defined $type{cmdline}) {
+	if (defined $stype{cmdline}) {
 		$cmdline = &quot; $cmdline&quot;;
 	}
 	#==========================================
@@ -1189,9 +1235,9 @@ sub createImageLiveCD {
 				$kiwi -&gt; failed ();
 				$kiwi -&gt; error  (&quot;Couldn't create ro directory: $error&quot;);
 				$kiwi -&gt; failed ();
-				$this -&gt; restoreCDRootData();
 				return undef;
 			}
+			push @{$this-&gt;{tmpdirs}},$imageTreeReadOnly;
 			my @rodirs = qw (bin boot lib lib64 opt sbin usr);
 			foreach my $dir (@rodirs) {
 				if (! -d &quot;$imageTree/$dir&quot;) {
@@ -1203,7 +1249,6 @@ sub createImageLiveCD {
 					$kiwi -&gt; failed ();
 					$kiwi -&gt; error  (&quot;Couldn't setup ro directory: $data&quot;);
 					$kiwi -&gt; failed ();
-					$this -&gt; restoreCDRootData();
 					return undef;
 				}
 			}
@@ -1221,7 +1266,6 @@ sub createImageLiveCD {
 		#------------------------------------------
 		$kiwi -&gt; info (&quot;Image RW part requires $mbytesrw MB of disk space&quot;);
 		if (! $this -&gt; buildLogicalExtend ($namerw,$mbytesrw.&quot;M&quot;)) {
-			$this -&gt; restoreCDRootData();
 			$this -&gt; restoreSplitExtend ();
 			$this -&gt; cleanLuks();
 			return undef;
@@ -1236,7 +1280,6 @@ sub createImageLiveCD {
 			$setBlockSize = 1;
 		}
 		if (! $this -&gt; setupEXT2 ( $namerw )) {
-			$this -&gt; restoreCDRootData();
 			$this -&gt; restoreSplitExtend ();
 			$this -&gt; cleanLuks();
 			return undef;
@@ -1249,7 +1292,6 @@ sub createImageLiveCD {
 		#------------------------------------------
 		my $extend = $this -&gt; mountLogicalExtend ($namerw);
 		if (! defined $extend) {
-			$this -&gt; restoreCDRootData();
 			$this -&gt; restoreSplitExtend ();
 			$this -&gt; cleanLuks();
 			return undef;
@@ -1258,7 +1300,6 @@ sub createImageLiveCD {
 		# copy physical to logical
 		#------------------------------------------
 		if (! $this -&gt; installLogicalExtend ($extend,$imageTree)) {
-			$this -&gt; restoreCDRootData();
 			$this -&gt; restoreSplitExtend ();
 			$this -&gt; cleanLuks();
 			return undef;
@@ -1275,7 +1316,6 @@ sub createImageLiveCD {
 			/^compressed$/ &amp;&amp; do {
 				$kiwi -&gt; info (&quot;Creating split ext3 + squashfs...\n&quot;);
 				if (! $this -&gt; createImageSplit (&quot;ext3,squashfs&quot;, 1)) {
-					$this -&gt; restoreCDRootData();
 					return undef;
 				}
 				$namero = $namerw;
@@ -1284,7 +1324,6 @@ sub createImageLiveCD {
 			/^unified$/ &amp;&amp; do {
 				$kiwi -&gt; info (&quot;Creating squashfs read only filesystem...\n&quot;);
 				if (! $this -&gt; setupSquashFS ( $namero,$imageTree )) {
-					$this -&gt; restoreCDRootData();
 					$this -&gt; restoreSplitExtend ();
 					return undef;
 				}
@@ -1293,7 +1332,6 @@ sub createImageLiveCD {
 			/^clic$/ &amp;&amp; do {
 				$kiwi -&gt; info (&quot;Creating clicfs read only filesystem...\n&quot;);
 				if (! $this -&gt; createImageClicFS ( $namero )) {
-					$this -&gt; restoreCDRootData();
 					$this -&gt; restoreSplitExtend ();
 					return undef;
 				}
@@ -1318,7 +1356,6 @@ sub createImageLiveCD {
 		# Create image md5sum
 		#------------------------------------------
 		if (! $this -&gt; buildMD5Sum ($namerw)) {
-			$this -&gt; restoreCDRootData();
 			$this -&gt; restoreSplitExtend ();
 			return undef;
 		}
@@ -1326,14 +1363,12 @@ sub createImageLiveCD {
 		# Restoring physical extend
 		#------------------------------------------
 		if (! $this -&gt; restoreSplitExtend ()) {
-			$this -&gt; restoreCDRootData();
 			return undef;
 		}
 		#==========================================
 		# compress RW extend
 		#------------------------------------------
 		if (! $this -&gt; compressImage ($namerw)) {
-			$this -&gt; restoreCDRootData();
 			return undef;
 		}
 	}
@@ -1349,7 +1384,6 @@ sub createImageLiveCD {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error  (&quot;Couldn't create ro directory: $error&quot;);
 			$kiwi -&gt; failed ();
-			$this -&gt; restoreCDRootData();
 			return undef;
 		}
 		my @rodirs = qw (bin boot lib lib64 opt sbin usr);
@@ -1363,7 +1397,6 @@ sub createImageLiveCD {
 				$kiwi -&gt; failed ();
 				$kiwi -&gt; error  (&quot;Couldn't setup ro directory: $data&quot;);
 				$kiwi -&gt; failed ();
-				$this -&gt; restoreCDRootData();
 				return undef;
 			}
 		}
@@ -1372,181 +1405,96 @@ sub createImageLiveCD {
 	#==========================================
 	# Prepare and Create ISO boot image
 	#------------------------------------------
-	$kiwi -&gt; info (&quot;Creating ISO boot image: $boot...\n&quot;);
-	my $Prepare = $imageTree.&quot;/image&quot;;
-	my $xml = new KIWIXML ( $kiwi,$Prepare );
-	if (! defined $xml) {
-		if ($imageTreeReadOnly) {
-			qxx (&quot;rm -rf $imageTreeReadOnly&quot;);
-		}
-		$this -&gt; restoreCDRootData();
+	$kiwi -&gt; info (&quot;--&gt; Creating ISO boot image: $boot...\n&quot;);
+	@bootdata = $this -&gt; checkAndSetupPrebuiltBootImage ($sxml);
+	if (! @bootdata) {
 		return undef;
 	}
-	my $tmpdir = qxx (&quot;mktemp -q -d /tmp/kiwi-cdboot.XXXXXX&quot;); chomp $tmpdir;
-	my $result = $? &gt;&gt; 8;
-	if ($result != 0) {
-		$kiwi -&gt; error  (&quot;Couldn't create tmp dir: $tmpdir: $!&quot;);
-		$kiwi -&gt; failed ();
-		$this -&gt; restoreCDRootData();
-		return undef;
-	}
-	push @{$this-&gt;{tmpdirs}},$tmpdir;
-	$main::Survive  = &quot;yes&quot;;
-	$main::RootTree = &quot;$tmpdir/kiwi-cdboot-$$&quot;;
-	$main::Prepare  = $boot;
-	if (defined $main::CacheRoot) {
-		if (($main::CacheRoot !~ /^\//) &amp;&amp; (! -d $main::CacheRoot)) {
-			$main::CacheRoot = $main::System.&quot;/&quot;.$main::CacheRoot;
-		}
-	}
-	if (($main::Prepare !~ /^\//) &amp;&amp; (! -d $main::Prepare)) {
-		$main::Prepare = $main::System.&quot;/&quot;.$main::Prepare;
-	}
-	@main::Profiles = ();
-	if ($type{bootprofile}) {
-		push @main::Profiles ,split (/,/,$type{bootprofile});
-	}
-	if ($type{bootkernel}) {
-		push @main::Profiles ,split (/,/,$type{bootkernel});
-	}
-	if ($type{cmdline}) {
-		$main::ForeignRepo{&quot;kernelcmdline&quot;} = $type{cmdline};
-	}
-	if ($type{lvm}) {
-		$main::ForeignRepo{&quot;lvm&quot;} = $type{lvm};
-	}
-	if ($hybrid) {
-		$main::ForeignRepo{&quot;hybrid&quot;}= &quot;true&quot;;
-	}
-	if ($hybridpersistent) {
-		$main::ForeignRepo{&quot;hybridpersistent&quot;} = &quot;true&quot;;
-	}
-	$main::ForeignRepo{&quot;xmlobj&quot;}  = $xml;
-	$main::ForeignRepo{&quot;xmlnode&quot;} = $xml -&gt; getForeignNodeList();
-	$main::ForeignRepo{&quot;xmlpacnode&quot;} = $xml -&gt; getForeignPackageNodeList();
-	$main::ForeignRepo{&quot;packagemanager&quot;} = $xml -&gt; getPackageManager();
-	$main::ForeignRepo{&quot;locale&quot;}    = $xml -&gt; getLocale();
-	$main::ForeignRepo{&quot;boot-theme&quot;}= $xml -&gt; getBootTheme();
-	$main::ForeignRepo{&quot;prepare&quot;}   = $main::Prepare;
-	$main::ForeignRepo{&quot;create&quot;}    = $main::Create;
-	$main::Create = $main::RootTree;
-	$xml = new KIWIXML ( $kiwi,$main::Prepare );
-	if (! defined $xml) {
-		return undef;
-	}
-	my $iso = $xml -&gt; getImageName();
-	my $ver = $xml -&gt; getImageVersion();
-	undef $main::SetImageType;
-	$kiwi -&gt; info (&quot;Checking for pre-built boot image&quot;);
-	if ((! $pblt) || ($pblt eq &quot;false&quot;) || ($pblt eq &quot;0&quot;)) {
+	if ($bootdata[1] == 0) {
 		#==========================================
-		# don't want a prebuilt boot image
+		# Setup changeset to be used by boot image
 		#------------------------------------------
-		$kiwi -&gt; notset();
-		$pblt = 0;
-	} else {
+		%main::XMLChangeSet = $this -&gt; updateDescription ($sxml);
 		#==========================================
-		# check if a prebuilt boot image exists
+		# Create tmp dir for boot image creation
 		#------------------------------------------
-		my $lookup = $main::Prepare.&quot;-prebuilt&quot;;
-		if (defined $main::PrebuiltBootImage) {
-			$lookup = $main::PrebuiltBootImage;
-		}
-		$pinitrd = glob (&quot;$lookup/$iso$arch-$ver.gz&quot;);
-		$plinux  = glob (&quot;$lookup/$iso$arch-$ver.kernel&quot;);
-		$pxboot  = glob (&quot;$lookup/$iso$arch-$ver*xen.gz&quot;);
-		if ((! -f $pinitrd) || (! -f $plinux)) {
-			$kiwi -&gt; skipped();
-			$kiwi -&gt; info (&quot;Cant't find pre-built boot image in $lookup&quot;);
-			$kiwi -&gt; skipped();
-			$pblt = 0;
-		} else {
-			$kiwi -&gt; done();
-			$kiwi -&gt; info (&quot;Extracting pre-built boot image&quot;);
-			$data = qxx (&quot;mkdir -p $main::Create&quot;);
-			$data = qxx (
-				&quot;$main::Gzip -cd $pinitrd|(cd $main::Create &amp;&amp; cpio -di 2&gt;&amp;1)&quot;
-			);
-			$code = $? &gt;&gt; 8;
-			if ($code != 0) {
-				$kiwi -&gt; failed();
-				$kiwi -&gt; error (&quot;Can't extract pre-built boot image: $data&quot;);
-				$kiwi -&gt; failed();
-				$pblt = 0;
-			} else {
-				$kiwi -&gt; done();
-				$pblt = 1;
-			}
+		my $tmpdir = qxx (&quot;mktemp -q -d $main::Destination/boot-iso.XXXXXX&quot;);
+		my $result = $? &gt;&gt; 8;
+		if ($result != 0) {
+			$kiwi -&gt; error  (&quot;Couldn't create tmp dir: $tmpdir: $!&quot;);
+			$kiwi -&gt; failed ();
+			return undef;
 		}
-	}
-	if (! $pblt) {
+		chomp $tmpdir;
+		push @{$this-&gt;{tmpdirs}},$tmpdir;
 		#==========================================
-		# build the isoboot boot image
+		# Setup boot prepare and create...
 		#------------------------------------------
+		$main::Survive  = &quot;yes&quot;;
+		$main::RootTree = &quot;$tmpdir/kiwi-isoboot-$$&quot;;
+		$main::Prepare  = $main::System.&quot;/&quot;.$stype{boot};
+		$main::Create   = $main::RootTree;
+		undef @main::Profiles;
 		undef @main::AddPackage;
-		undef $main::Upgrade;
+		undef @main::RemovePackage;
+		undef $main::SetImageType;
+		#==========================================
+		# Call kiwi again
+		#------------------------------------------
 		if (! defined main::main()) {
-			$main::Survive = &quot;default&quot;;
 			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
 				qxx (&quot;rm -rf $tmpdir&quot;);
-				if ($imageTreeReadOnly) {
-					qxx (&quot;rm -rf $imageTreeReadOnly&quot;);
-				}
 			}
-			$this -&gt; restoreCDRootData();
+			&amp;{$this-&gt;{resetvars}};
 			return undef;
 		}
+		#==========================================
+		# Clean up tmp directory
+		#------------------------------------------
+		qxx (&quot;rm -rf $tmpdir&quot;);
+		#==========================================
+		# Reset variables
+		#------------------------------------------
+		&amp;{$this-&gt;{resetvars}};
+	}
+	#==========================================
+	# setup initrd/kernel names
+	#------------------------------------------
+	my $pinitrd = $main::Destination.&quot;/&quot;.$bootdata[0].&quot;.gz&quot;;
+	my $plinux  = $main::Destination.&quot;/&quot;.$bootdata[0].&quot;.kernel&quot;;
+	my $pxboot  = glob ($main::Destination.&quot;/&quot;.$bootdata[0].&quot;*xen.gz&quot;);
+	if (-f $pxboot) {
+		$isxen = 1;
 	}
-	$main::Survive = &quot;default&quot;;
-	undef %main::ForeignRepo;
 	#==========================================
 	# Check boot and system image kernel
 	#------------------------------------------
 	if (defined $main::CheckKernel) {
-		my $initrd = $pinitrd;
-		if (! $pblt) {
-			$initrd = &quot;$this-&gt;{imageDest}/$iso$arch-$ver.gz&quot;;
-		}
-		if (! $this -&gt; checkKernel ($initrd,$imageTree)) {
-			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
-				qxx (&quot;rm -rf $tmpdir&quot;);
-				if ($imageTreeReadOnly) {
-					qxx (&quot;rm -rf $imageTreeReadOnly&quot;);
-				}
-			}
-			$this -&gt; restoreCDRootData();
+		if (! $this -&gt; checkKernel ($pinitrd,$imageTree,$bootdata[0])) {
 			return undef;
 		}
 	}
 	#==========================================
 	# Prepare for CD ISO image
 	#------------------------------------------
-	$kiwi -&gt; info (&quot;Creating CD filesystem&quot;);
-	qxx (&quot;mkdir -p $main::RootTree/CD/boot&quot;);
+	my $CD = $main::Destination.&quot;/CD&quot;;
+	$kiwi -&gt; info (&quot;Creating CD filesystem structure&quot;);
+	qxx (&quot;mkdir -p $CD/boot&quot;);
+	push @{$this-&gt;{tmpdirs}},$CD;
 	$kiwi -&gt; done ();
-
 	#==========================================
 	# Check for optional config-cdroot archive
 	#------------------------------------------
 	if (-f $this-&gt;{imageDest}.&quot;/&quot;.$cdrootData) {
 		$kiwi -&gt; info (&quot;Integrating CD root information...&quot;);
 		my $data= qxx (
-			&quot;tar -C $main::RootTree/CD -xvf $this-&gt;{imageDest}/$cdrootData&quot;
+			&quot;tar -C $CD -xvf $this-&gt;{imageDest}/$cdrootData&quot;
 		);
 		my $code= $? &gt;&gt; 8;
 		if ($code != 0) {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error  (&quot;Failed to integrate CD root data: $data&quot;);
 			$kiwi -&gt; failed ();
-			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
-				qxx (&quot;rm -rf $tmpdir&quot;);
-				if ($imageTreeReadOnly) {
-					qxx (&quot;rm -rf $imageTreeReadOnly&quot;);
-				}
-			}
 			$this -&gt; restoreCDRootData();
 			return undef;
 		}
@@ -1566,9 +1514,8 @@ sub createImageLiveCD {
 		if ($script !~ /^\//) {
 			$script = $pwd.&quot;/&quot;.$script;
 		}
-		my $CCD  = &quot;$main::RootTree/CD&quot;;
 		my $data = qxx (
-			&quot;cd $CCD &amp;&amp; bash -c '. $cdrootEnv &amp;&amp; . $script' 2&gt;&amp;1&quot;
+			&quot;cd $CD &amp;&amp; bash -c '. $cdrootEnv &amp;&amp; . $script' 2&gt;&amp;1&quot;
 		);
 		my $code = $? &gt;&gt; 8;
 		if ($code != 0) {
@@ -1576,13 +1523,6 @@ sub createImageLiveCD {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error  (&quot;Failed to call CD root script: $data&quot;);
 			$kiwi -&gt; failed ();
-			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
-				qxx (&quot;rm -rf $tmpdir&quot;);
-				if ($imageTreeReadOnly) {
-					qxx (&quot;rm -rf $imageTreeReadOnly&quot;);
-				}
-			}
 			$this -&gt; restoreCDRootData();
 			return undef;
 		} else {
@@ -1594,9 +1534,8 @@ sub createImageLiveCD {
 	# Restore CD root data and script
 	#------------------------------------------
 	$this -&gt; restoreCDRootData();
-
 	#==========================================
-	# Installing second stage images
+	# Installing system image file(s)
 	#------------------------------------------
 	$kiwi -&gt; info (&quot;Moving CD image data into boot structure&quot;);
 	if (! defined $gzip) {
@@ -1604,62 +1543,30 @@ sub createImageLiveCD {
 		# don't symlink these file because in this old live iso
 		# mode we don't allow mkisofs to follow symlinks
 		# ----
-		qxx (&quot;mv $this-&gt;{imageDest}/$namerw.md5 $main::RootTree/CD&quot;);
-		qxx (&quot;mv $this-&gt;{imageDest}/$namerw.gz $main::RootTree/CD&quot;);
+		qxx (&quot;mv $this-&gt;{imageDest}/$namerw.md5 $CD&quot;);
+		qxx (&quot;mv $this-&gt;{imageDest}/$namerw.gz  $CD&quot;);
 		qxx (&quot;rm $this-&gt;{imageDest}/$namerw.*&quot;);
 	}
 	if (defined $gzip) {
-		#qxx (&quot;mv $this-&gt;{imageDest}/$namero $main::RootTree/CD&quot;);
+		#qxx (&quot;mv $this-&gt;{imageDest}/$namero $CD&quot;);
 		#qxx (&quot;rm $this-&gt;{imageDest}/$namero.*&quot;);
-		qxx (
-			&quot;ln -s $this-&gt;{imageDest}/$namero $main::RootTree/CD/$namero&quot;
-		);
+		qxx (&quot;ln -s $this-&gt;{imageDest}/$namero $CD/$namero&quot;);
 	} else {
-		qxx (&quot;mkdir -p $main::RootTree/CD/read-only-system&quot;);
-		qxx (&quot;mv $imageTreeReadOnly/* $main::RootTree/CD/read-only-system&quot;);
+		qxx (&quot;mkdir -p $CD/read-only-system&quot;);
+		qxx (&quot;mv $imageTreeReadOnly/* $CD/read-only-system&quot;);
 		rmdir $imageTreeReadOnly;
 	}
 	$kiwi -&gt; done ();
 	#==========================================
-	# check for graphics boot files
+	# Create MBR id file for boot device check
 	#------------------------------------------
-	my $CD  = $main::Prepare.&quot;/root/&quot;;
-	my $gfx = $main::RootTree.&quot;/image/loader&quot;;
-	my $isoarch = qxx (&quot;uname -m&quot;); chomp $isoarch;
-	if ($isoarch =~ /i.86/) {
-		$isoarch = &quot;i386&quot;;
-	}
-	if (! -d $gfx) {
-		$kiwi -&gt; error  (&quot;Couldn't open directory $gfx: $!&quot;);
-		if (! -d $main::RootTree.$baseSystem) {
-			qxx (&quot;rm -rf $main::RootTree&quot;);
-			qxx (&quot;rm -rf $tmpdir&quot;);
-		}
-		$kiwi -&gt; failed ();
-		return undef;
-	}
-	#==========================================
-	# check if Xen kernel is used
-	#------------------------------------------
-	my $isxen = 0;
-	my $xboot = glob (&quot;$this-&gt;{imageDest}/$iso$arch-$ver*xen.gz&quot;);
-	if (-f $xboot) {
-		$isxen = 1;
-	}
 	if ($hybrid) {
-		#==========================================
-		# Create MBR id file for boot device check
-		#------------------------------------------
 		$kiwi -&gt; info (&quot;Saving hybrid disk label on ISO: $this-&gt;{mbrid}...&quot;);
-		my $destination = &quot;$main::RootTree/CD/boot/grub&quot;;
+		my $destination = &quot;$CD/boot/grub&quot;;
 		qxx (&quot;mkdir -p $destination&quot;);
 		if (! open (FD,&quot;&gt;$destination/mbrid&quot;)) {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error  (&quot;Couldn't create mbrid file: $!&quot;);
-			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
-				qxx (&quot;rm -rf $tmpdir&quot;);
-			}
 			$kiwi -&gt; failed ();
 			return undef;
 		}
@@ -1671,61 +1578,59 @@ sub createImageLiveCD {
 	# copy boot kernel and initrd
 	#------------------------------------------
 	$kiwi -&gt; info (&quot;Copying boot image and kernel [$isoarch]&quot;);
-	my $destination = &quot;$main::RootTree/CD/boot/$isoarch/loader&quot;;
+	my $destination = &quot;$CD/boot/$isoarch/loader&quot;;
 	qxx (&quot;mkdir -p $destination&quot;);
-	if ($pblt) {
-		$data = qxx (&quot;cp $pinitrd $destination/initrd 2&gt;&amp;1&quot;);
-	} else {
-		$data = qxx (
-			&quot;cp $this-&gt;{imageDest}/$iso$arch-$ver.gz $destination/initrd 2&gt;&amp;1&quot;
-		);
-	}
+	$data = qxx (&quot;cp $pinitrd $destination/initrd 2&gt;&amp;1&quot;);
 	$code = $? &gt;&gt; 8;
 	if ($code == 0) {
-		if ($pblt) {
-			$data = qxx (&quot;cp $plinux $destination/linux 2&gt;&amp;1&quot;);
-		} else {
-			$data = qxx (
-				&quot;cp $this-&gt;{imageDest}/$iso$arch-$ver.kernel $destination/linux 2&gt;&amp;1&quot;
-			);
-		}
+		$data = qxx (&quot;cp $plinux $destination/linux 2&gt;&amp;1&quot;);
 		$code = $? &gt;&gt; 8;
 	}
 	if (($code == 0) &amp;&amp; ($isxen)) {
-		if ($pblt) {
-			$data = qxx (&quot;cp $pxboot $destination/xen.gz 2&gt;&amp;1&quot;);
-		} else {
-			$data = qxx (
-				&quot;cp $xboot $destination/xen.gz 2&gt;&amp;1&quot;
-			);
-		}
+		$data = qxx (&quot;cp $pxboot $destination/xen.gz 2&gt;&amp;1&quot;);
 		$code = $? &gt;&gt; 8;
 	}
 	if ($code != 0) {
 		$kiwi -&gt; failed ();
 		$kiwi -&gt; error  (&quot;Copy of isolinux boot files failed: $data&quot;);
 		$kiwi -&gt; failed ();
-		if (! -d $main::RootTree.$baseSystem) {
-			qxx (&quot;rm -rf $main::RootTree&quot;);
-			qxx (&quot;rm -rf $tmpdir&quot;);
-		}
 		return undef;
 	}
 	$kiwi -&gt; done ();
 	#==========================================
+	# check for graphics boot files
+	#------------------------------------------
+	$kiwi -&gt; info (&quot;Extracting initrd for boot graphics data lookup&quot;);
+	my $tmpdir = qxx (&quot;mktemp -q -d $main::Destination/boot-iso.XXXXXX&quot;);
+	$code = $? &gt;&gt; 8;
+	if ($code != 0) {
+		$kiwi -&gt; failed();
+		$kiwi -&gt; error  (&quot;Couldn't create tmp dir: $tmpdir: $!&quot;);
+		$kiwi -&gt; failed ();
+		return undef;
+	}
+	chomp $tmpdir;
+	push @{$this-&gt;{tmpdirs}},$tmpdir;
+	$data = qxx (&quot;$main::Gzip -cd $pinitrd | (cd $tmpdir &amp;&amp; cpio -di 2&gt;&amp;1)&quot;);
+	$code = $? &gt;&gt; 8;
+	if ($code != 0) {
+		$kiwi -&gt; failed();
+		$kiwi -&gt; error (&quot;Failed to extract initrd: $data&quot;);
+		$kiwi -&gt; failed();
+		return undef;
+	}
+	$kiwi -&gt; done();
+	#==========================================
 	# copy base graphics boot CD files
 	#------------------------------------------
 	$kiwi -&gt; info (&quot;Setting up isolinux boot CD [$isoarch]&quot;);
+	my $gfx = $tmpdir.&quot;/image/loader&quot;;
 	$data = qxx (&quot;cp -a $gfx/* $destination&quot;);
 	$code = $? &gt;&gt; 8;
 	if ($code != 0) {
 		$kiwi -&gt; failed ();
 		$kiwi -&gt; error  (&quot;Copy failed: $data&quot;);
 		$kiwi -&gt; failed ();
-		if (! -d $main::RootTree.$baseSystem) {
-			qxx (&quot;rm -rf $main::RootTree&quot;);
-			qxx (&quot;rm -rf $tmpdir&quot;);
-		}
 		return undef;
 	}
 	$kiwi -&gt; done ();
@@ -1739,7 +1644,7 @@ sub createImageLiveCD {
 	#------------------------------------------
 	$kiwi -&gt; info (&quot;Creating isolinux configuration...&quot;);
 	my $syslinux_new_format = 0;
-	my $bootTimeout = $type{boottimeout} ? int $type{boottimeout} : 200;
+	my $bootTimeout = $stype{boottimeout} ? int $stype{boottimeout} : 200;
 	if (-f &quot;$gfx/gfxboot.com&quot; || -f &quot;$gfx/gfxboot.c32&quot;) {
 		$syslinux_new_format = 1;
 	}
@@ -1856,26 +1761,15 @@ sub createImageLiveCD {
 	close FD;
 	$kiwi -&gt; done();
 	#==========================================
-	# remove original kernel and initrd
+	# Cleanup tmpdir
 	#------------------------------------------
-	if (! $pblt) {
-		$data = qxx (&quot;rm $this-&gt;{imageDest}/$iso*.* 2&gt;&amp;1&quot;);
-		$code = $? &gt;&gt; 8;
-		if ($code != 0) {
-			$kiwi -&gt; warning (&quot;Couldn't cleanup boot files: $data&quot;);
-			$kiwi -&gt; skipped ();
-		}
-	}
+	qxx (&quot;rm -rf $tmpdir&quot;);
 	#==========================================
 	# Create boot configuration
 	#------------------------------------------
-	if (! open (FD,&quot;&gt;$main::RootTree/CD/config.isoclient&quot;)) {
+	if (! open (FD,&quot;&gt;$CD/config.isoclient&quot;)) {
 		$kiwi -&gt; error  (&quot;Couldn't create image boot configuration&quot;);
 		$kiwi -&gt; failed ();
-		if (! -d $main::RootTree.$baseSystem) {
-			qxx (&quot;rm -rf $main::RootTree&quot;);
-			qxx (&quot;rm -rf $tmpdir&quot;);
-		}
 		return undef;
 	}
 	if ((! defined $gzip) || ($gzip =~ /^(unified|clic)/)) {
@@ -1907,11 +1801,11 @@ sub createImageLiveCD {
 	if (! defined $gzip) {
 		$attr .= &quot; -iso-level 4&quot;; 
 	}
-	if ($type{volid}) {
-		$attr .= &quot; -V \&quot;$type{volid}\&quot;&quot;;
+	if ($stype{volid}) {
+		$attr .= &quot; -V \&quot;$stype{volid}\&quot;&quot;;
 	}
 	my $isolinux = new KIWIIsoLinux (
-		$kiwi,$main::RootTree.&quot;/CD&quot;,$name,$attr,&quot;checkmedia&quot;
+		$kiwi,$CD,$name,$attr,&quot;checkmedia&quot;
 	);
 	if (defined $isolinux) {
 		$isoerror = 0;
@@ -1923,20 +1817,12 @@ sub createImageLiveCD {
 		}
 	}
 	if ($isoerror) {
-		if (! -d $main::RootTree.$baseSystem) {
-			qxx (&quot;rm -rf $main::RootTree&quot;);
-			qxx (&quot;rm -rf $tmpdir&quot;);
-		}
 		return undef;
 	}
 	#==========================================
 	# relocate boot catalog
 	#------------------------------------------
 	if (! $isolinux -&gt; relocateCatalog()) {
-		if (! -d $main::RootTree.$baseSystem) {
-			qxx (&quot;rm -rf $main::RootTree&quot;);
-			qxx (&quot;rm -rf $tmpdir&quot;);
-		}
 		return undef;
 	}
 	#==========================================
@@ -1948,10 +1834,6 @@ sub createImageLiveCD {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error  (&quot;Failed to create hybrid ISO image&quot;);
 			$kiwi -&gt; failed ();
-			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
-				qxx (&quot;rm -rf $tmpdir&quot;);
-			}
 			return undef;
 		}
 		$kiwi -&gt; done();
@@ -1965,21 +1847,10 @@ sub createImageLiveCD {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error  (&quot;Failed to tag ISO image&quot;);
 			$kiwi -&gt; failed ();
-			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
-				qxx (&quot;rm -rf $tmpdir&quot;);
-			}
 			return undef;
 		}
 		$kiwi -&gt; done();
 	}
-	#==========================================
-	# remove tmpdir with boot tree
-	#------------------------------------------
-	if (! -d $main::RootTree.$baseSystem) {
-		qxx (&quot;rm -rf $main::RootTree&quot;);
-		qxx (&quot;rm -rf $tmpdir&quot;);
-	}
 	return $this;
 }
 
@@ -2008,6 +1879,7 @@ sub createImageSplit {
 	my $FSTypeRO;
 	my $error;
 	my $ok;
+	my @bootdata;
 	my $imageTreeRW;
 	my $imageTreeTmp;
 	my $mbytesro;
@@ -2562,161 +2434,70 @@ sub createImageSplit {
 	# Prepare and Create boot image
 	#------------------------------------------
 	$imageTree = $this-&gt;{imageTree};
-	$kiwi -&gt; info (&quot;Creating boot image: $boot...\n&quot;);
-	my $Prepare = $imageTree.&quot;/image&quot;;
-	my $xml = new KIWIXML ( $kiwi,$Prepare );
-	if (! defined $xml) {
-		return undef;
-	}
-	my $tmpdir = qxx (&quot;mktemp -q -d /tmp/kiwi-splitboot.XXXXXX&quot;); chomp $tmpdir;
-	my $result = $? &gt;&gt; 8;
-	if ($result != 0) {
-		$kiwi -&gt; error  (&quot;Couldn't create tmp dir: $tmpdir: $!&quot;);
-		$kiwi -&gt; failed ();
+	$kiwi -&gt; info (&quot;--&gt; Creating boot image: $boot...\n&quot;);
+	@bootdata = $this -&gt; checkAndSetupPrebuiltBootImage ($sxml);
+	if (! @bootdata) {
 		return undef;
 	}
-	push @{$this-&gt;{tmpdirs}},$tmpdir;
-	$main::Survive  = &quot;yes&quot;;
-	$main::RootTree = &quot;$tmpdir/kiwi-splitboot-$$&quot;;
-	$main::Prepare  = $boot;
-	if (defined $main::CacheRoot) {
-		if (($main::CacheRoot !~ /^\//) &amp;&amp; (! -d $main::CacheRoot)) {
-			$main::CacheRoot = $main::System.&quot;/&quot;.$main::CacheRoot;
-		}
-	}
-	if (($main::Prepare !~ /^\//) &amp;&amp; (! -d $main::Prepare)) {
-		$main::Prepare = $main::System.&quot;/&quot;.$main::Prepare;
-	}
-	@main::Profiles = ();
-	if ($type{bootprofile}) {
-		push @main::Profiles ,split (/,/,$type{bootprofile});
-	}
-	if ($type{bootkernel}) {
-		push @main::Profiles ,split (/,/,$type{bootkernel});
-	}
-	if ($type{cmdline}) {
-		$main::ForeignRepo{&quot;kernelcmdline&quot;} = $type{cmdline};
-	}
-	if ($type{lvm}) {
-		$main::ForeignRepo{&quot;lvm&quot;} = $type{lvm};
-	}
-	if ($type{bootloader}) {
-		$main::ForeignRepo{&quot;bootloader&quot;} = $type{bootloader};
-	}
-	if ($type{installboot}) {
-		$main::ForeignRepo{&quot;installboot&quot;} = $type{installboot};
-	}
-	$main::ForeignRepo{&quot;xmlobj&quot;}  = $xml;
-	$main::ForeignRepo{&quot;xmlnode&quot;} = $xml -&gt; getForeignNodeList();
-	$main::ForeignRepo{&quot;xmlpacnode&quot;} = $xml -&gt; getForeignPackageNodeList();
-	$main::ForeignRepo{&quot;packagemanager&quot;} = $xml -&gt; getPackageManager();
-	$main::ForeignRepo{&quot;domain&quot;} = $xml -&gt; getXenDomain();
-	$main::ForeignRepo{&quot;oem-partition-install&quot;} =$xml-&gt;getOEMPartitionInstall();
-	$main::ForeignRepo{&quot;oem-swap&quot;}       = $xml -&gt; getOEMSwap();
-	$main::ForeignRepo{&quot;oem-align-partition&quot;} = $xml -&gt; getOEMAlignPartition();
-	$main::ForeignRepo{&quot;oem-swapsize&quot;}   = $xml -&gt; getOEMSwapSize();
-	$main::ForeignRepo{&quot;oem-systemsize&quot;} = $xml -&gt; getOEMSystemSize();
-	$main::ForeignRepo{&quot;oem-boot-title&quot;} = $xml -&gt; getOEMBootTitle();
-	$main::ForeignRepo{&quot;oem-kiwi-initrd&quot;}= $xml -&gt; getOEMKiwiInitrd();
-	$main::ForeignRepo{&quot;oem-reboot&quot;}     = $xml -&gt; getOEMReboot();
-	$main::ForeignRepo{&quot;oem-reboot-interactive&quot;} = $xml -&gt; getOEMRebootInter();
-	$main::ForeignRepo{&quot;oem-shutdown&quot;}   = $xml -&gt; getOEMShutdown();
-	$main::ForeignRepo{&quot;oem-shutdown-interactive&quot;} 
-										= $xml -&gt; getOEMShutdownInter();
-	$main::ForeignRepo{&quot;oem-bootwait&quot;}   = $xml -&gt; getOEMBootWait();
-	$main::ForeignRepo{&quot;oem-unattended&quot;} = $xml -&gt; getOEMUnattended();
-	$main::ForeignRepo{&quot;oem-recovery&quot;}   = $xml -&gt; getOEMRecovery();
-	$main::ForeignRepo{&quot;oem-recoveryID&quot;} = $xml -&gt; getOEMRecoveryID();
-	$main::ForeignRepo{&quot;oem-inplace-recovery&quot;} = $xml -&gt;getOEMRecoveryInPlace();
-	$main::ForeignRepo{&quot;displayname&quot;}    = $xml -&gt; getImageDisplayName();
-	$main::ForeignRepo{&quot;locale&quot;}    = $xml -&gt; getLocale();
-	$main::ForeignRepo{&quot;boot-theme&quot;}= $xml -&gt; getBootTheme();
-	$main::ForeignRepo{&quot;prepare&quot;}   = $main::Prepare;
-	$main::ForeignRepo{&quot;create&quot;}    = $main::Create;
-	$main::Create = $main::RootTree;
-	$xml = new KIWIXML ( $kiwi,$main::Prepare );
-	if (! defined $xml) {
-		return undef;
-	}
-	my $iname = $xml -&gt; getImageName();
-	my $imageTypeSaved = $main::SetImageType;
-	undef $main::SetImageType;
-	$kiwi -&gt; info (&quot;Checking for pre-built boot image&quot;);
-
-	if ((! $pblt) || ($pblt eq &quot;false&quot;) || ($pblt eq &quot;0&quot;)) {
+	if ($bootdata[1] == 0) {
 		#==========================================
-		# don't want a prebuilt boot image
+		# Setup changeset to be used by boot image
 		#------------------------------------------
-		$kiwi -&gt; notset();
-		$pblt = 0;
-	} else {
+		%main::XMLChangeSet = $this -&gt; updateDescription ($sxml);
 		#==========================================
-		# check if a prebuilt boot image exists
+		# Create tmp dir for boot image creation
 		#------------------------------------------
-		my $lookup = $main::Prepare.&quot;-prebuilt&quot;;
-		if (defined $main::PrebuiltBootImage) {
-			$lookup = $main::PrebuiltBootImage;
-		}
-		$pinitrd = glob (&quot;$lookup/$iname*$arch*.gz&quot;);
-		$plinux  = glob (&quot;$lookup/$iname*$arch*.kernel&quot;);
-		if ((! -f $pinitrd) || (! -f $plinux)) {
-			$kiwi -&gt; skipped();
-			$kiwi -&gt; info (&quot;Cant't find pre-built boot image in $lookup&quot;);
-			$kiwi -&gt; skipped();
-			$pblt = 0;
-		} else {
-			$kiwi -&gt; done();
-			$kiwi -&gt; info (&quot;Extracting pre-built boot image&quot;);
-			$data = qxx (&quot;mkdir -p $main::Create&quot;);
-			$data = qxx (
-				&quot;$main::Gzip -cd $pinitrd|(cd $main::Create &amp;&amp; cpio -di 2&gt;&amp;1)&quot;
-			);
-			$code = $? &gt;&gt; 8;
-			if ($code != 0) {
-				$kiwi -&gt; failed();
-				$kiwi -&gt; error (&quot;Can't extract pre-built boot image: $data&quot;);
-				$kiwi -&gt; failed();
-				$pblt = 0;
-			} else {
-				$kiwi -&gt; done();
-				$pblt = 1;
-			}
+		my $tmpdir = qxx (&quot;mktemp -q -d $main::Destination/boot-split.XXXXXX&quot;);
+		my $result = $? &gt;&gt; 8;
+		if ($result != 0) {
+			$kiwi -&gt; error  (&quot;Couldn't create tmp dir: $tmpdir: $!&quot;);
+			$kiwi -&gt; failed ();
+			return undef;
 		}
-	}
-	if (! $pblt) {
+		chomp $tmpdir;
+		push @{$this-&gt;{tmpdirs}},$tmpdir;
 		#==========================================
-		# build the split boot image
+		# Setup boot prepare and create...
 		#------------------------------------------
+		$main::Survive  = &quot;yes&quot;;
+		$main::RootTree = &quot;$tmpdir/kiwi-splitboot-$$&quot;;
+		$main::Prepare  = $main::System.&quot;/&quot;.$type{boot};
+		$main::Create   = $main::RootTree;
+		undef @main::Profiles;
 		undef @main::AddPackage;
-		undef $main::Upgrade;
+		undef @main::RemovePackage;
+		undef $main::SetImageType;
+		#==========================================
+		# Call kiwi again
+		#------------------------------------------
 		if (! defined main::main()) {
-			$main::Survive = &quot;default&quot;;
 			if (! -d $main::RootTree.$baseSystem) {
-				qxx (&quot;rm -rf $main::RootTree&quot;);
 				qxx (&quot;rm -rf $tmpdir&quot;);
 			}
+			&amp;{$this-&gt;{resetvars}};
 			return undef;
 		}
-	}
-	#==========================================
-	# remove tmpdir with boot tree
-	#------------------------------------------
-	if (! -d $main::RootTree.$baseSystem) {
-		qxx (&quot;rm -rf $main::RootTree&quot;);
+		#==========================================
+		# Clean up tmp directory
+		#------------------------------------------
 		qxx (&quot;rm -rf $tmpdir&quot;);
+		#==========================================
+		# Reset variables
+		#------------------------------------------
+		&amp;{$this-&gt;{resetvars}};
 	}
 	#==========================================
 	# setup initrd name
 	#------------------------------------------
-	my $initrd = $main::Destination.&quot;/&quot;.$main::ImageName.&quot;.gz&quot;;
+	my $initrd = $main::Destination.&quot;/&quot;.$bootdata[0].&quot;.gz&quot;;
 	if (! -f $initrd) {
-		$initrd = $main::Destination.&quot;/&quot;.$main::ImageName;
+		$initrd = $main::Destination.&quot;/&quot;.$bootdata[0];
 	}
 	#==========================================
 	# Check boot and system image kernel
 	#------------------------------------------
 	if (defined $main::CheckKernel) {
-		if (! $this -&gt; checkKernel ($initrd,$imageTree)) {
+		if (! $this -&gt; checkKernel ($initrd,$imageTree,$bootdata[0])) {
 			return undef;
 		}
 	}
@@ -2729,12 +2510,11 @@ sub createImageSplit {
 	}
 	$kboot -&gt; setupSplash();
 	#==========================================
-	# Check further actions due to boot image
+	# Store meta data for subsequent calls
 	#------------------------------------------
-	$main::SetImageType = $imageTypeSaved;
-	$name-&gt;{bootImage} = $main::ImageName;
-	$name-&gt;{format} = $type{format};
-	undef %main::ForeignRepo;
+	$name-&gt;{systemImage} = $sxml -&gt; buildImageName();
+	$name-&gt;{bootImage}   = $bootdata[0];
+	$name-&gt;{format}      = $type{format};
 	undef $main::Prepare;
 	undef $main::Create;
 	if ($boot =~ /vmxboot|oemboot/) {
@@ -2745,7 +2525,7 @@ sub createImageSplit {
 		$main::BootVMDisk  = $main::BootVMDisk.&quot;.splash.gz&quot;;
 		$main::BootVMSystem= $main::Destination.&quot;/&quot;.$name-&gt;{systemImage};
 		if (! defined main::main()) {
-			$main::Survive = &quot;default&quot;;
+			&amp;{$this-&gt;{resetvars}};
 			return undef;
 		}
 		#==========================================
@@ -2757,12 +2537,12 @@ sub createImageSplit {
 			$main::Convert = $main::Destination.&quot;/&quot;.$name-&gt;{systemImage}.&quot;.raw&quot;;
 			$main::Format  = $name-&gt;{format};
 			if (! defined main::main()) {
-				$main::Survive = &quot;default&quot;;
+				&amp;{$this-&gt;{resetvars}};
 				return undef;
 			}
 		}
 	}
-	$main::Survive = &quot;default&quot;;
+	&amp;{$this-&gt;{resetvars}};
 	return $this;
 }
 
@@ -3160,30 +2940,6 @@ sub postImage {
 }
 
 #==========================================
-# buildImageName
-#------------------------------------------
-sub buildImageName {
-	my $this = shift;
-	my $xml  = $this-&gt;{xml};
-	my $arch = $this-&gt;{arch};
-	my $separator = shift;
-	my $extension = shift;
-	if (! defined $separator) {
-		$separator = &quot;-&quot;;
-	}
-	my $name = $xml -&gt; getImageName();
-	my $iver = $xml -&gt; getImageVersion();
-	if (defined $extension) {
-		$name = $name.$extension.$arch.$separator.$iver;
-	} else {
-		$name = $name.$arch.$separator.$iver;
-	}
-	chomp  $name;
-	$main::ImageName = $name;
-	return $name;
-}
-
-#==========================================
 # buildLogicalExtend
 #------------------------------------------
 sub buildLogicalExtend {
@@ -4037,6 +3793,7 @@ sub checkKernel {
 	my $this    = shift;
 	my $initrd  = shift;
 	my $systree = shift;
+	my $name    = shift;
 	my $kiwi    = $this-&gt;{kiwi};
 	my $arch    = $this-&gt;{arch};
 	my %sysk    = ();
@@ -4119,7 +3876,7 @@ sub checkKernel {
 	#==========================================
 	# 1) unpack initrd...
 	#------------------------------------------
-	$status = qxx (&quot;cd $tmpdir &amp;&amp; $cmd|cpio -i --quiet&quot;);
+	$status = qxx (&quot;cd $tmpdir &amp;&amp; $cmd|cpio -di --quiet&quot;);
 	$result = $? &gt;&gt; 8;
 	if ($result != 0) {
 		$kiwi -&gt; failed ();
@@ -4171,11 +3928,7 @@ sub checkKernel {
 	#==========================================
 	# 5) extract kernel files...
 	#------------------------------------------
-	my $xml  = new KIWIXML ($kiwi,$tmpdir.&quot;/image&quot;);
-	my $name = $xml -&gt; getImageName();
-	my $iver = $xml -&gt; getImageVersion();
 	my $dest = dirname $initrd;
-	$name = $name.$arch.&quot;-&quot;.$iver;
 	qxx (&quot;rm -f $dest/$name*&quot;);
 	if (! $this -&gt; extractLinux ($name,$tmpdir,$dest)) {
 		qxx (&quot;rm -rf $tmpdir&quot;);
@@ -4289,6 +4042,43 @@ sub getMBRDiskLabel {
 }
 
 #==========================================
+# buildImageName
+#------------------------------------------
+sub buildImageName {
+	my $this = shift;
+	my $xml  = $this-&gt;{xml};
+	my $arch = $this-&gt;{arch};
+	my $separator = shift;
+	my $extension = shift;
+	if (! defined $separator) {
+		$separator = &quot;-&quot;;
+	}
+	my $name = $xml -&gt; getImageName();
+	my $iver = $xml -&gt; getImageVersion();
+	if (defined $extension) {
+		$name = $name.$extension.$arch.$separator.$iver;
+	} else {
+		$name = $name.$arch.$separator.$iver;
+	}
+	chomp  $name;
+	return $name;
+}
+
+#==========================================
+# makeLabel
+#------------------------------------------
+sub makeLabel {
+	# ...
+	# isolinux handles spaces as &quot;_&quot;, so we replace
+	# each space with an underscore
+	# ----
+	my $this = shift;
+	my $label = shift;
+	$label =~ s/ /_/g;
+	return $label;
+}
+
+#==========================================
 # Destructor
 #------------------------------------------
 sub DESTROY {
diff --git a/modules/KIWIManager.pm b/modules/KIWIManager.pm
index b53e1b5..63d6e34 100644
--- a/modules/KIWIManager.pm
+++ b/modules/KIWIManager.pm
@@ -1643,12 +1643,10 @@ sub setupArchives {
 		return undef;
 	}
 	#==========================================
-	# check for foreign call
+	# override path to image description
 	#------------------------------------------
-	if (defined $main::ForeignRepo{prepare}) {
-		if (open FD,&quot;$main::ForeignRepo{create}/image/main::Prepare&quot;) {
-			$idesc = &lt;FD&gt;; close FD;
-		}
+	if ((defined $main::ImageDescription) &amp;&amp; (-d $main::ImageDescription)) {
+		$idesc = $main::ImageDescription;
 	}
 	#==========================================
 	# check for archive files
diff --git a/modules/KIWISchema.rnc b/modules/KIWISchema.rnc
index 069280f..992b1c3 100644
--- a/modules/KIWISchema.rnc
+++ b/modules/KIWISchema.rnc
@@ -26,7 +26,7 @@ db:info [
 	db:releaseinfo [
 		&quot;$Id: kiwi.rnc 2957 2008-01-11 12:53:39Z thomas-schraitle $&quot;
 	]
-	db:releaseinfo [ &quot;RNC Schema Version 5.1&quot; ]
+	db:releaseinfo [ &quot;RNC Schema Version 5.2&quot; ]
 	db:pubdate [ &quot;START&quot; ]
 	db:pubdate [ &quot;2008-01-08&quot; ]
 ]
@@ -58,13 +58,9 @@ div {
 		## second the location of the XSD Schema
 		## (not relevant for RELAX NG or DTD)
 		attribute xsi:schemaLocation { xsd:anyURI }
-	k.image.inherit.attribute =
-		## Path to an image description directory from which
-		## the package Information is inherited
-		attribute inherit { text }
 	k.image.schemaversion.attribute =
 		## The allowed Schema version (fixed value)
-		attribute schemaversion { &quot;5.1&quot; }
+		attribute schemaversion { &quot;5.2&quot; }
 	k.image.kiwirevision.attribute =
 		## A kiwi SVN revision number which is known to build
 		## a working image from this description. If the kiwi SVN
@@ -77,7 +73,6 @@ div {
 		attribute id { xsd:string {length=&quot;10&quot;} }
 	k.image.attlist = k.image.name.attribute 
 		&amp; k.image.displayname.attribute?
-		&amp; k.image.inherit.attribute?
 		&amp; k.image.kiwirevision.attribute?
 		&amp; k.image.id?
 		&amp; k.image.schemaversion.attribute
diff --git a/modules/KIWISchema.rng b/modules/KIWISchema.rng
index 3592de7..12d9a3e 100644
--- a/modules/KIWISchema.rng
+++ b/modules/KIWISchema.rng
@@ -23,7 +23,7 @@
 &lt;grammar xmlns:db=&quot;<A HREF="http://docbook.org/ns/docbook">http://docbook.org/ns/docbook</A>&quot; xmlns:a=&quot;<A HREF="http://relaxng.org/ns/compatibility/annotations/1.0">http://relaxng.org/ns/compatibility/annotations/1.0</A>&quot; xmlns:rng=&quot;<A HREF="http://relaxng.org/ns/structure/1.0">http://relaxng.org/ns/structure/1.0</A>&quot; xmlns:xsi=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</A>&quot; xmlns=&quot;<A HREF="http://relaxng.org/ns/structure/1.0">http://relaxng.org/ns/structure/1.0</A>&quot; datatypeLibrary=&quot;<A HREF="http://www.w3.org/2001/XMLSchema-datatypes">http://www.w3.org/2001/XMLSchema-datatypes</A>&quot;&gt;
   &lt;db:info&gt;
     &lt;db:releaseinfo&gt;$Id: kiwi.rnc 2957 2008-01-11 12:53:39Z thomas-schraitle $&lt;/db:releaseinfo&gt;
-    &lt;db:releaseinfo&gt;RNC Schema Version 5.1&lt;/db:releaseinfo&gt;
+    &lt;db:releaseinfo&gt;RNC Schema Version 5.2&lt;/db:releaseinfo&gt;
     &lt;db:pubdate&gt;START&lt;/db:pubdate&gt;
     &lt;db:pubdate&gt;2008-01-08&lt;/db:pubdate&gt;
   &lt;/db:info&gt;
@@ -88,16 +88,10 @@ second the location of the XSD Schema
         &lt;data type=&quot;anyURI&quot;/&gt;
       &lt;/attribute&gt;
     &lt;/define&gt;
-    &lt;define name=&quot;k.image.inherit.attribute&quot;&gt;
-      &lt;attribute name=&quot;inherit&quot;&gt;
-        &lt;a:documentation&gt;Path to an image description directory from which
-the package Information is inherited&lt;/a:documentation&gt;
-      &lt;/attribute&gt;
-    &lt;/define&gt;
     &lt;define name=&quot;k.image.schemaversion.attribute&quot;&gt;
       &lt;attribute name=&quot;schemaversion&quot;&gt;
         &lt;a:documentation&gt;The allowed Schema version (fixed value)&lt;/a:documentation&gt;
-        &lt;value&gt;5.1&lt;/value&gt;
+        &lt;value&gt;5.2&lt;/value&gt;
       &lt;/attribute&gt;
     &lt;/define&gt;
     &lt;define name=&quot;k.image.kiwirevision.attribute&quot;&gt;
@@ -125,9 +119,6 @@ named /etc/ImageID&lt;/a:documentation&gt;
           &lt;ref name=&quot;k.image.displayname.attribute&quot;/&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
-          &lt;ref name=&quot;k.image.inherit.attribute&quot;/&gt;
-        &lt;/optional&gt;
-        &lt;optional&gt;
           &lt;ref name=&quot;k.image.kiwirevision.attribute&quot;/&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
diff --git a/modules/KIWIURL.pm b/modules/KIWIURL.pm
index 5b74255..070305b 100644
--- a/modules/KIWIURL.pm
+++ b/modules/KIWIURL.pm
@@ -201,11 +201,8 @@ sub thisPath {
 		return undef;
 	}
 	my $thisPath;
-	if (defined $main::ForeignRepo{prepare}) {
-		if (! open FD,&quot;$main::ForeignRepo{create}/image/main::Prepare&quot;) {
-			return undef;
-		}
-		$thisPath = &lt;FD&gt;; close FD;
+	if ((defined $main::ImageDescription) &amp;&amp; (-d $main::ImageDescription)) {
+		$thisPath = $main::ImageDescription;
 		$thisPath = &quot;$thisPath/$module&quot;;
 	} elsif (defined $main::Create) {
 		if (! open FD,&quot;$main::Create/image/main::Prepare&quot;) {
diff --git a/modules/KIWIXML.pm b/modules/KIWIXML.pm
index 92e17f7..5dc127f 100644
--- a/modules/KIWIXML.pm
+++ b/modules/KIWIXML.pm
@@ -40,11 +40,6 @@ our @EXPORT = qw (
 );
 
 #==========================================
-# Globals
-#------------------------------------------
-our %inheritanceHash;
-
-#==========================================
 # Constructor
 #------------------------------------------
 sub new { 
@@ -67,7 +62,6 @@ sub new {
 	#------------------------------------------
 	my $kiwi        = shift;
 	my $imageDesc   = shift;
-	my $foreignRepo = shift;
 	my $imageType   = shift;
 	my $reqProfiles = shift;
 	#==========================================
@@ -170,12 +164,21 @@ sub new {
 	#==========================================
 	# Store object data
 	#------------------------------------------
-	$this-&gt;{foreignRepo}     = $foreignRepo;
 	$this-&gt;{optionsNodeList} = $optionsNodeList;
 	$this-&gt;{imgnameNodeList} = $imgnameNodeList;
 	$this-&gt;{imageType}       = $imageType;
 	$this-&gt;{reqProfiles}     = $reqProfiles;
 	$this-&gt;{profilesNodeList}= $profilesNodeList;
+	$this-&gt;{repositNodeList} = $repositNodeList;
+	$this-&gt;{packageNodeList} = $packageNodeList;
+	#==========================================
+	# Update XML data from changeset if exists
+	#------------------------------------------
+	if (%main::XMLChangeSet) {
+		$this -&gt; __populateImageTypeAndNode();
+		$this -&gt; __updateDescriptionFromChangeSet (\%main::XMLChangeSet);
+		undef %main::XMLChangeSet;
+	}
 	#==========================================
 	# Populate default profiles from XML if set
 	#------------------------------------------
@@ -199,7 +202,7 @@ sub new {
 	#==========================================
 	# Add default split section if not defined
 	#------------------------------------------
-	$this -&gt; addDefaultSplitNode();
+	$this -&gt; __addDefaultSplitNode();
 	#==========================================
 	# Set global packagemanager value
 	#------------------------------------------
@@ -209,203 +212,11 @@ sub new {
 		$main::PackageManager = $this -&gt; getPackageManager();
 	}
 	#==========================================
-	# setup foreign XML sections
-	#------------------------------------------
-	if ( defined $foreignRepo-&gt;{xmlnode} ) {
-		#==========================================
-		# 1) foreign repositories
-		#------------------------------------------
-		$kiwi -&gt; info (&quot;Including foreign repository node(s)&quot;);
-		my $need = new XML::LibXML::NodeList();
-		my @node = $repositNodeList -&gt; get_nodelist();
-		foreach my $element (@node) {
-			if (! $this -&gt; __requestedProfile ($element)) {
-				next;
-			}
-			my $status = $element -&gt; getAttribute(&quot;status&quot;);
-			if ((! defined $status) || ($status eq &quot;fixed&quot;)) {
-				$need -&gt; push ($element);
-			}
-		}
-		$repositNodeList = $foreignRepo-&gt;{xmlnode};
-		$repositNodeList -&gt; prepend ($need);
-		$kiwi -&gt; done ();
-		if ( defined $foreignRepo-&gt;{xmlpacnode} ) {
-			#==========================================
-			# 2) foreign image packages
-			#------------------------------------------
-			my @node = $foreignRepo -&gt; {xmlpacnode} -&gt; get_nodelist();
-			my @plist;
-			my @alist;
-			my @falistImage;
-			my @fplistImage;
-			my @fplistDelete;
-			foreach my $element (@node) {
-				my $type = $element  -&gt; getAttribute (&quot;type&quot;);
-				if (! $foreignRepo -&gt; {xmlobj} -&gt; __requestedProfile ($element)) {
-					next;
-				}
-				if (($type eq &quot;image&quot;) || ($type eq &quot;bootstrap&quot;)) {
-					push (@plist,$element-&gt;getElementsByTagName (&quot;package&quot;));
-					push (@alist,$element-&gt;getElementsByTagName (&quot;archive&quot;));
-				}
-			}
-			foreach my $element (@plist) {
-				my $package = $element -&gt; getAttribute (&quot;name&quot;);
-				my $bootinc = $element -&gt; getAttribute (&quot;bootinclude&quot;);
-				my $bootdel = $element -&gt; getAttribute (&quot;bootdelete&quot;);
-				if ((defined $bootinc) &amp;&amp; (&quot;$bootinc&quot; eq &quot;true&quot;)) {
-					push (@fplistImage,$package);
-				}
-				if ((defined $bootdel) &amp;&amp; (&quot;$bootdel&quot; eq &quot;true&quot;)) {
-					push (@fplistDelete,$package);
-				}
-			}
-			foreach my $element (@alist) {
-				my $archive = $element -&gt; getAttribute (&quot;name&quot;);
-				my $bootinc = $element -&gt; getAttribute (&quot;bootinclude&quot;);
-				if ((defined $bootinc) &amp;&amp; (&quot;$bootinc&quot; eq &quot;true&quot;)) {
-					push (@falistImage,$archive);
-				}
-			}
-			if (@fplistImage) {
-				$kiwi -&gt; info (&quot;Adding foreign package(s):\n&quot;);
-				foreach my $p (@fplistImage) {
-					$kiwi -&gt; info (&quot;--&gt; $p\n&quot;);
-				}
-				$this -&gt; addPackages (
-					&quot;bootstrap&quot;,$<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">packageNodeList, at fplistImage</A>
-				);
-				if (@fplistDelete) {
-					$this -&gt; addPackages (
-						&quot;delete&quot;,$<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">packageNodeList, at fplistDelete</A>
-					);
-				}
-			}
-			if (@falistImage) {
-				$kiwi -&gt; info (&quot;Adding foreign archive(s):\n&quot;);
-				foreach my $p (@falistImage) {
-					$kiwi -&gt; info (&quot;--&gt; $p\n&quot;);
-				}
-				$this -&gt; addArchives (
-					&quot;bootstrap&quot;,$<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">packageNodeList, at falistImage</A>
-				);
-			}
-		}
-		#==========================================
-		# 3) foreign machine attributes in type
-		#------------------------------------------
-		if (defined $foreignRepo-&gt;{&quot;domain&quot;}) {
-			$this -&gt; setForeignMachineAttribute (&quot;domain&quot;);
-		}
-		#==========================================
-		# 4) foreign preferences in type
-		#------------------------------------------
-		if (defined $foreignRepo-&gt;{&quot;locale&quot;}) {
-			$this -&gt; setForeignOptionsElement (&quot;locale&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;boot-theme&quot;}) {
-			$this -&gt; setForeignOptionsElement (&quot;boot-theme&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;packagemanager&quot;}) {
-			$this -&gt; setForeignOptionsElement (&quot;packagemanager&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-swap&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-swap&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-align-partition&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-align-partition&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-partition-install&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-partition-install&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-swapsize&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-swapsize&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-systemsize&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-systemsize&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-boot-title&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-boot-title&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-kiwi-initrd&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-kiwi-initrd&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-reboot&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-reboot&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-reboot-interactive&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-reboot-interactive&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-shutdown&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-shutdown&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-shutdown-interactive&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-shutdown-interactive&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-bootwait&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-bootwait&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-unattended&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-unattended&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-recovery&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-recovery&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-recoveryID&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-recoveryID&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;oem-inplace-recovery&quot;}) {
-			$this -&gt; setForeignOEMOptionsElement (&quot;oem-inplace-recovery&quot;);
-		}
-		if (defined $foreignRepo-&gt;{&quot;lvm&quot;}) {
-			$this -&gt; setForeignSystemDiskElement();
-		}
-		#==========================================
-		# 5) foreign attributes in type
-		#------------------------------------------
-		if (defined $foreignRepo-&gt;{&quot;hybrid&quot;}) {
-			$this -&gt; setForeignTypeAttribute (
-				&quot;hybrid&quot;,$foreignRepo-&gt;{&quot;hybrid&quot;}
-			);
-		}
-		if (defined $foreignRepo-&gt;{&quot;hybridpersistent&quot;}) {
-			$this -&gt; setForeignTypeAttribute (
-				&quot;hybridpersistent&quot;,$foreignRepo-&gt;{&quot;hybridpersistent&quot;}
-			);
-		}
-		if (defined $foreignRepo-&gt;{&quot;kernelcmdline&quot;}) {
-			$this -&gt; setForeignTypeAttribute (
-				&quot;kernelcmdline&quot;,$foreignRepo-&gt;{&quot;kernelcmdline&quot;}
-			);
-		}
-		if (defined $foreignRepo-&gt;{&quot;bootloader&quot;}) {
-			$this -&gt; setForeignTypeAttribute (
-				&quot;bootloader&quot;,$foreignRepo-&gt;{&quot;bootloader&quot;}
-			);
-		}
-		if (defined $foreignRepo-&gt;{&quot;installboot&quot;}) {
-			$this -&gt; setForeignTypeAttribute (
-				&quot;installboot&quot;,$foreignRepo-&gt;{&quot;installboot&quot;}
-			);
-		}
-		#==========================================
-		# 6) foreign image attributes, toplevel
-		#------------------------------------------
-		if (defined $foreignRepo-&gt;{&quot;displayname&quot;}) {
-			$this -&gt; setForeignImageAttribute (
-				&quot;displayname&quot;,$foreignRepo-&gt;{&quot;displayname&quot;}
-			);
-		}
-	}
-	#==========================================
 	# Store object data
 	#------------------------------------------
 	$this-&gt;{imageDesc}          = $imageDesc;
 	$this-&gt;{driversNodeList}    = $driversNodeList;
 	$this-&gt;{usrdataNodeList}    = $usrdataNodeList;
-	$this-&gt;{repositNodeList}    = $repositNodeList;
-	$this-&gt;{packageNodeList}    = $packageNodeList;
 	$this-&gt;{instsrcNodeList}    = $instsrcNodeList;
 	$this-&gt;{havemd5File}        = $havemd5File;
 	$this-&gt;{arch}               = $arch;
@@ -435,6 +246,27 @@ sub updateXML {
 }
 
 #==========================================
+# writeXMLDescription
+#------------------------------------------
+sub writeXMLDescription {
+	# ...
+	# Write back the XML file into the prepare tree
+	# below the image/ directory
+	# ---
+	my $this = shift;
+	my $root = shift;
+	my $xmlu = $this-&gt;{systemTree}-&gt;toString();
+	my $file = $root.&quot;/image/config.xml&quot;;
+	my $FD;
+	if (! open ($FD, '&gt;', $file)) {
+		return undef;
+	}
+	print $FD $xmlu;
+	close $FD;
+	return $this;
+}
+
+#==========================================
 # getConfigName
 #------------------------------------------
 sub getConfigName {
@@ -511,16 +343,6 @@ sub getImageDisplayName {
 }
 
 #==========================================
-# getImageInherit
-#------------------------------------------
-sub getImageInherit {
-	my $this = shift;
-	my $node = $this-&gt;{imgnameNodeList} -&gt; get_node(1);
-	my $path = $node -&gt; getAttribute (&quot;inherit&quot;);
-	return $path;
-}
-
-#==========================================
 # getImageID
 #------------------------------------------
 sub getImageID {
@@ -1062,307 +884,103 @@ sub getPXEDeployInitrd {
 }
 
 #==========================================
-# setForeignOptionsElement
+# setImageType
 #------------------------------------------
-sub setForeignOptionsElement {
+sub setImageType {
 	# ...
-	# If given element exists in the foreign hash, set this
-	# element into the current preferences (options) XML tree
+	# set 'image' attribute of the selected type
 	# ---
 	my $this = shift;
-	my $item = shift;
+	my $val  = shift;
 	my $kiwi = $this-&gt;{kiwi};
-	my $foreignRepo = $this-&gt;{foreignRepo};
-	my $value = $foreignRepo-&gt;{$item};
-	$kiwi -&gt; info (&quot;Including foreign element $item: $value&quot;);
-	my $addElement = new XML::LibXML::Element (&quot;$item&quot;);
-	$addElement -&gt; appendText ($value);
-	my $opts = $this -&gt; getPreferencesNodeByTagName (&quot;$item&quot;);
-	my $node = $opts -&gt; getElementsByTagName (&quot;$item&quot;);
-	if ($node) {
-		if (&quot;$node&quot; eq &quot;$value&quot;) {
-			$kiwi -&gt; done ();
-			return $this;
-		}
-		$node = $node -&gt; get_node(1);
-		$opts -&gt; removeChild ($node);
+	my $tnode= $this-&gt;{typeNode};
+	if ($tnode) {
+		$tnode-&gt; setAttribute (&quot;image&quot;,&quot;$val&quot;);
 	}
-	$opts -&gt; appendChild ($addElement);
-	$kiwi -&gt; done ();
+	$this-&gt;{imageType} = $val;
 	$this -&gt; updateXML();
 	return $this;
 }
 
 #==========================================
-# setForeignOEMOptionsElement
+# setPackageManager
 #------------------------------------------
-sub setForeignOEMOptionsElement {
+sub setPackageManager {
 	# ...
-	# If given element exists in the foreign hash, set this
-	# element into the current oemconfig (options) XML tree
+	# set packagemanager to use for this image
 	# ---
-	my $this = shift;
-	my $item = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $tnode= $this-&gt;{typeNode};
-	my $foreignRepo = $this-&gt;{foreignRepo};
-	my $value = $foreignRepo-&gt;{$item};
-	my $newconfig = 0;
-	$kiwi -&gt; info (&quot;Including foreign OEM element $item: $value&quot;);
-	my $addElement = new XML::LibXML::Element (&quot;$item&quot;);
-	$addElement -&gt; appendText ($value);
-	my $opts = $tnode -&gt; getElementsByTagName (&quot;oemconfig&quot;) -&gt; get_node(1);
-	if (! defined $opts) {
-		$opts = new XML::LibXML::Element (&quot;oemconfig&quot;);
-		$newconfig = 1;
-	}
-	my $node = $opts -&gt; getElementsByTagName (&quot;$item&quot;);
-	if ($node) {
-		$node = $node -&gt; get_node(1);
-		$opts -&gt; removeChild ($node);
+	my $this  = shift;
+	my $value = shift;
+	my $opts = $this -&gt; getPreferencesNodeByTagName (&quot;packagemanager&quot;);
+	my $pmgr = $opts -&gt; getElementsByTagName (&quot;packagemanager&quot;);
+	if (($pmgr) &amp;&amp; (&quot;$pmgr&quot; eq &quot;$value&quot;)) {
+		return $this;
 	}
+	my $addElement = new XML::LibXML::Element (&quot;packagemanager&quot;);
+	$addElement -&gt; appendText ($value);
+	my $node = $opts -&gt; getElementsByTagName (&quot;packagemanager&quot;) -&gt; get_node(1);
+	$opts -&gt; removeChild ($node);
 	$opts -&gt; appendChild ($addElement);
-	if ($newconfig) {
-		$this-&gt;{typeNode} -&gt; appendChild ($opts);
-	}
-	$kiwi -&gt; done ();
 	$this -&gt; updateXML();
 	return $this;
 }
 
 #==========================================
-# setForeignSystemDiskElement
+# getPackageManager
 #------------------------------------------
-sub setForeignSystemDiskElement {
+sub getPackageManager {
 	# ...
-	# If given element exists in the foreign hash, set this
-	# element into the current systemdisk XML tree
+	# Get the name of the package manager if set.
+	# if not set return the default package
+	# manager name
 	# ---
 	my $this = shift;
-	my $item = shift;
 	my $kiwi = $this-&gt;{kiwi};
-	my $tnode= $this-&gt;{typeNode};
-	my $value;
-	my $foreignRepo = $this-&gt;{foreignRepo};
-	if (($foreignRepo) &amp;&amp; ($item)) {
-		$value = $foreignRepo-&gt;{$item};
-	}
-	my $newconfig = 0;
-	my $addElement;
-	if ($item) {
-		$kiwi -&gt; info (&quot;Including foreign SystemDisk element $item: $value&quot;);
-		$addElement = new XML::LibXML::Element (&quot;$item&quot;);
-		$addElement -&gt; appendText ($value);
-	} else {
-		$kiwi -&gt; info (&quot;Including foreign SystemDisk element&quot;);
-	}
-	my $disk = $tnode -&gt; getElementsByTagName (&quot;systemdisk&quot;) -&gt; get_node(1);
-	if (! defined $disk) {
-		$disk = new XML::LibXML::Element (&quot;systemdisk&quot;);
-		$newconfig = 1;
+	my $node = $this -&gt; getPreferencesNodeByTagName (&quot;packagemanager&quot;);
+	my $pmgr = $node -&gt; getElementsByTagName (&quot;packagemanager&quot;);
+	if (! $pmgr) {
+		return $packageManager{default};
 	}
-	if ($item) {
-		my $node = $disk -&gt; getElementsByTagName (&quot;$item&quot;);
-		if ($node) {
-			$node = $node -&gt; get_node(1);
-			$disk -&gt; removeChild ($node);
+	foreach my $manager (keys %packageManager) {
+		if (&quot;$pmgr&quot; eq &quot;$manager&quot;) {
+			my $file = $packageManager{$manager};
+			if (! -f $file) {
+				$kiwi -&gt; loginfo (&quot;Package manager $file doesn't exist&quot;);
+				return undef;
+			}
+			return $manager;
 		}
-		$disk -&gt; appendChild ($addElement);
-	}
-	if ($newconfig) {
-		$this-&gt;{typeNode} -&gt; appendChild ($disk);
 	}
-	$kiwi -&gt; done ();
-	$this -&gt; updateXML();
-	return $this;
+	$kiwi -&gt; loginfo (&quot;Invalid package manager: $pmgr&quot;);
+	return undef;
 }
 
 #==========================================
-# setForeignMachineAttribute
+# getXenDomain
 #------------------------------------------
-sub setForeignMachineAttribute {
+sub getXenDomain {
 	# ...
-	# If given element exists in the foreign hash, set this
-	# attribute into the current machine (options) XML tree
-	# if no machine section exists create a new one
+	# Obtain the Xen domain information if set
 	# ---
 	my $this = shift;
-	my $item = shift;
-	my $kiwi = $this-&gt;{kiwi};
 	my $tnode= $this-&gt;{typeNode};
-	my $foreignRepo = $this-&gt;{foreignRepo};
-	my $value = $foreignRepo-&gt;{$item};
-	my $newconfig = 0;
-	$kiwi -&gt; info (&quot;Including foreign machine attribute $item: $value&quot;);
-	my $opts = $tnode -&gt; getElementsByTagName (&quot;machine&quot;) -&gt; get_node(1);
-	if (! defined $opts) {
-		$opts = new XML::LibXML::Element (&quot;machine&quot;);
-		$newconfig = 1;
-	}
-	my $node = $opts -&gt; getElementsByTagName (&quot;$item&quot;);
-	if ($node) {
-		$node = $node -&gt; get_node(1);
-		$opts -&gt; removeChild ($node);
-	}
-	if ($value) {
-		$opts-&gt; setAttribute (&quot;$item&quot;,&quot;$value&quot;);
-	} else {
-		$opts-&gt; setAttribute (&quot;$item&quot;,&quot;true&quot;);
+	my $node = $tnode -&gt; getElementsByTagName (&quot;machine&quot;) -&gt; get_node(1);
+	if (! defined $node) {
+		return undef;
 	}
-	if ($newconfig) {
-		$this-&gt;{typeNode} -&gt; appendChild ($opts);
+	my $domain = $node -&gt; getAttribute (&quot;domain&quot;);
+	if ((! defined $domain) || (&quot;$domain&quot; eq &quot;&quot;)) {
+		return undef;
 	}
-	$kiwi -&gt; done ();
-	$this -&gt; updateXML();
-	return $this;
+	return $domain;
 }
 
 #==========================================
-# setForeignTypeAttribute
+# getOEMSwapSize
 #------------------------------------------
-sub setForeignTypeAttribute {
+sub getOEMSwapSize {
 	# ...
-	# set given attribute to selected type in the
-	# xml preferences node
-	# ---
-	my $this = shift;
-	my $attr = shift;
-	my $val  = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $tnode= $this-&gt;{typeNode};
-	if ($val) {
-		$kiwi -&gt; info (&quot;Including foreign type attribute: $attr : $val&quot;);
-		$tnode-&gt; setAttribute (&quot;$attr&quot;,&quot;$val&quot;);
-	} else {
-		$kiwi -&gt; info (&quot;Including foreign type attribute: $attr&quot;);
-		$tnode-&gt; setAttribute (&quot;$attr&quot;,&quot;true&quot;);
-	}
-	$kiwi -&gt; done ();
-	$this -&gt; updateXML();
-	return $this;
-}
-
-#==========================================
-# setForeignImageAttribute
-#------------------------------------------
-sub setForeignImageAttribute {
-	# ...
-	# set given attribute to the image section
-	# ---
-	my $this = shift;
-	my $attr = shift;
-	my $val  = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $inode= $this-&gt;{imgnameNodeList} -&gt; get_node(1);
-	$kiwi -&gt; info (&quot;Including foreign image attribute: $attr&quot;);
-	if ($val) {
-		$inode -&gt; setAttribute (&quot;$attr&quot;,&quot;$val&quot;);
-	} else {
-		$inode -&gt; setAttribute (&quot;$attr&quot;,&quot;true&quot;);
-	}
-	$kiwi -&gt; done ();
-	$this -&gt; updateXML();
-	return $this;
-}
-
-#==========================================
-# setImageType
-#------------------------------------------
-sub setImageType {
-	# ...
-	# set 'image' attribute of the selected type
-	# ---
-	my $this = shift;
-	my $val  = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $tnode= $this-&gt;{typeNode};
-	if ($tnode) {
-		$tnode-&gt; setAttribute (&quot;image&quot;,&quot;$val&quot;);
-	}
-	$this-&gt;{imageType} = $val;
-	$this -&gt; updateXML();
-	return $this;
-}
-
-#==========================================
-# setPackageManager
-#------------------------------------------
-sub setPackageManager {
-	# ...
-	# set packagemanager to use for this image
-	# ---
-	my $this  = shift;
-	my $value = shift;
-	my $opts = $this -&gt; getPreferencesNodeByTagName (&quot;packagemanager&quot;);
-	my $pmgr = $opts -&gt; getElementsByTagName (&quot;packagemanager&quot;);
-	if (($pmgr) &amp;&amp; (&quot;$pmgr&quot; eq &quot;$value&quot;)) {
-		return $this;
-	}
-	my $addElement = new XML::LibXML::Element (&quot;packagemanager&quot;);
-	$addElement -&gt; appendText ($value);
-	my $node = $opts -&gt; getElementsByTagName (&quot;packagemanager&quot;) -&gt; get_node(1);
-	$opts -&gt; removeChild ($node);
-	$opts -&gt; appendChild ($addElement);
-	$this -&gt; updateXML();
-	return $this;
-}
-
-#==========================================
-# getPackageManager
-#------------------------------------------
-sub getPackageManager {
-	# ...
-	# Get the name of the package manager if set.
-	# if not set return the default package
-	# manager name
-	# ---
-	my $this = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $node = $this -&gt; getPreferencesNodeByTagName (&quot;packagemanager&quot;);
-	my $pmgr = $node -&gt; getElementsByTagName (&quot;packagemanager&quot;);
-	if (! $pmgr) {
-		return $packageManager{default};
-	}
-	foreach my $manager (keys %packageManager) {
-		if (&quot;$pmgr&quot; eq &quot;$manager&quot;) {
-			my $file = $packageManager{$manager};
-			if (! -f $file) {
-				$kiwi -&gt; loginfo (&quot;Package manager $file doesn't exist&quot;);
-				return undef;
-			}
-			return $manager;
-		}
-	}
-	$kiwi -&gt; loginfo (&quot;Invalid package manager: $pmgr&quot;);
-	return undef;
-}
-
-#==========================================
-# getXenDomain
-#------------------------------------------
-sub getXenDomain {
-	# ...
-	# Obtain the Xen domain information if set
-	# ---
-	my $this = shift;
-	my $tnode= $this-&gt;{typeNode};
-	my $node = $tnode -&gt; getElementsByTagName (&quot;machine&quot;) -&gt; get_node(1);
-	if (! defined $node) {
-		return undef;
-	}
-	my $domain = $node -&gt; getAttribute (&quot;domain&quot;);
-	if ((! defined $domain) || (&quot;$domain&quot; eq &quot;&quot;)) {
-		return undef;
-	}
-	return $domain;
-}
-
-#==========================================
-# getOEMSwapSize
-#------------------------------------------
-sub getOEMSwapSize {
-	# ...
-	# Obtain the oem-swapsize value or return undef
+	# Obtain the oem-swapsize value or return undef
 	# ---
 	my $this = shift;
 	my $tnode= $this-&gt;{typeNode};
@@ -2306,6 +1924,7 @@ sub addPackages {
 		}
 	}
 	foreach my $pack (@packs) {
+		next if ($pack eq &quot;&quot;);
 		my $addElement = new XML::LibXML::Element (&quot;package&quot;);
 		$addElement -&gt; setAttribute(&quot;name&quot;,$pack);
 		$nodes -&gt; get_node($nodeNumber)
@@ -2577,22 +2196,38 @@ sub getImageConfig {
 	my $tnode= $this-&gt;{typeNode};
 	my $node = $tnode -&gt; getElementsByTagName (&quot;oemconfig&quot;) -&gt; get_node(1);
 	if (defined $node) {
-		my $oemswapMB= $node -&gt; getElementsByTagName (&quot;oem-swapsize&quot;);
-		my $oemrootMB= $node -&gt; getElementsByTagName (&quot;oem-systemsize&quot;);
-		my $oemswap  = $node -&gt; getElementsByTagName (&quot;oem-swap&quot;);
-		my $oemalign = $node -&gt; getElementsByTagName (&quot;oem-align-partition&quot;);
-		my $oempinst = $node -&gt; getElementsByTagName (&quot;oem-partition-install&quot;);
-		my $oemtitle = $node -&gt; getElementsByTagName (&quot;oem-boot-title&quot;);
-		my $oemkboot = $node -&gt; getElementsByTagName (&quot;oem-kiwi-initrd&quot;);
-		my $oemreboot= $node -&gt; getElementsByTagName (&quot;oem-reboot&quot;);
-		my $oemrebootinter= $node -&gt; getElementsByTagName (&quot;oem-reboot-interactive&quot;);
-		my $oemshutdown= $node -&gt; getElementsByTagName (&quot;oem-shutdown&quot;);
-		my $oemshutdowninter= $node -&gt; getElementsByTagName (&quot;oem-shutdown-interactive&quot;);
-		my $oemwait  = $node -&gt; getElementsByTagName (&quot;oem-bootwait&quot;);
-		my $oemnomsg = $node -&gt; getElementsByTagName (&quot;oem-unattended&quot;);
-		my $oemreco  = $node -&gt; getElementsByTagName (&quot;oem-recovery&quot;);
-		my $oemrecoid= $node -&gt; getElementsByTagName (&quot;oem-recoveryID&quot;);
-		my $inplace  = $node -&gt; getElementsByTagName (&quot;oem-inplace-recovery&quot;);
+		my $oemswapMB= $node
+			-&gt; getElementsByTagName (&quot;oem-swapsize&quot;);
+		my $oemrootMB= $node
+			-&gt; getElementsByTagName (&quot;oem-systemsize&quot;);
+		my $oemswap  = $node
+			-&gt; getElementsByTagName (&quot;oem-swap&quot;);
+		my $oemalign = $node
+			-&gt; getElementsByTagName (&quot;oem-align-partition&quot;);
+		my $oempinst = $node
+			-&gt; getElementsByTagName (&quot;oem-partition-install&quot;);
+		my $oemtitle = $node
+			-&gt; getElementsByTagName (&quot;oem-boot-title&quot;);
+		my $oemkboot = $node
+			-&gt; getElementsByTagName (&quot;oem-kiwi-initrd&quot;);
+		my $oemreboot= $node
+			-&gt; getElementsByTagName (&quot;oem-reboot&quot;);
+		my $oemrebootinter= $node
+			-&gt; getElementsByTagName (&quot;oem-reboot-interactive&quot;);
+		my $oemshutdown= $node
+			-&gt; getElementsByTagName (&quot;oem-shutdown&quot;);
+		my $oemshutdowninter= $node
+			-&gt; getElementsByTagName (&quot;oem-shutdown-interactive&quot;);
+		my $oemwait  = $node
+			-&gt; getElementsByTagName (&quot;oem-bootwait&quot;);
+		my $oemnomsg = $node
+			-&gt; getElementsByTagName (&quot;oem-unattended&quot;);
+		my $oemreco  = $node
+			-&gt; getElementsByTagName (&quot;oem-recovery&quot;);
+		my $oemrecoid= $node
+			-&gt; getElementsByTagName (&quot;oem-recoveryID&quot;);
+		my $inplace  = $node
+			-&gt; getElementsByTagName (&quot;oem-inplace-recovery&quot;);
 		if ((defined $oempinst) &amp;&amp; (&quot;$oempinst&quot; eq &quot;true&quot;)) {
 			$result{kiwi_oempartition_install} = $oempinst;
 		}
@@ -3597,9 +3232,9 @@ sub getArchiveList {
 }
 
 #==========================================
-# getForeignNodeList
+# getNodeList
 #------------------------------------------
-sub getForeignNodeList {
+sub getNodeList {
 	# ...
 	# Return the current &lt;repository&gt; list which consists
 	# of XML::LibXML::Element object pointers
@@ -3609,9 +3244,9 @@ sub getForeignNodeList {
 }
 
 #==========================================
-# getForeignPackageNodeList
+# getPackageNodeList
 #------------------------------------------
-sub getForeignPackageNodeList {
+sub getPackageNodeList {
 	# ...
 	# Return the current &lt;packages&gt; list which consists
 	# of XML::LibXML::Element object pointers
@@ -3621,43 +3256,6 @@ sub getForeignPackageNodeList {
 }
 
 #==========================================
-# getImageInheritance
-#------------------------------------------
-sub setupImageInheritance {
-	# ...
-	# check if there is a configuration specified to inherit
-	# data from. The method will read the inherited description
-	# and prepend the data to this object. Currently only the
-	# &lt;packages&gt; nodes are used from the base description
-	# ---
-	my $this = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $path = $this -&gt; getImageInherit();
-	if (! defined $path) {
-		return $this;
-	}
-	$kiwi -&gt; info (&quot;--&gt; Inherit: $path &quot;);
-	if (defined $KIWIXML::inheritanceHash{$path}) {
-		$kiwi -&gt; skipped();
-		return $this;
-	}
-	my $ixml = new KIWIXML ( $kiwi,$path );
-	if (! defined $ixml) {
-		return undef;
-	}
-	my $name = $ixml -&gt; getImageName();
-	$kiwi -&gt; note (&quot;[$name]&quot;);
-	$this-&gt;{packageNodeList} -&gt; prepend (
-		$ixml -&gt; getPackageNodeList()
-	);
-	$this -&gt; updateXML();
-	$kiwi -&gt; done();
-	$KIWIXML::inheritanceHash{$path} = 1;
-	$ixml -&gt; setupImageInheritance();
-	#return $this;
-}
-
-#==========================================
 # resolveLink
 #------------------------------------------
 sub resolveLink {
@@ -3687,14 +3285,6 @@ sub resolveArchitectur {
 }
 
 #==========================================
-# getPackageNodeList
-#------------------------------------------
-sub getPackageNodeList {
-	my $this = shift;
-	return $this-&gt;{packageNodeList};
-}
-
-#==========================================
 # createTmpDirectory
 #------------------------------------------
 sub createTmpDirectory {
@@ -4272,24 +3862,95 @@ sub getSingleInstSourceSatSolvable {
 }
 
 #==========================================
-# addDefaultSplitNode
+# getVMConfigOpts
 #------------------------------------------
-sub addDefaultSplitNode {
+sub getVMConfigOpts {
 	# ...
-	# if no split section is setup we add a default section
-	# from the contents of the KIWISplit.txt file and use it
+	# Extract the &lt;vmconfig-entry&gt; information from the
+	# XML and return all options in a list
 	# ---
 	my $this = shift;
-	my $kiwi = $this-&gt;{kiwi};
-	my $tnode= $this-&gt;{typeNode};
-	my $type = $this-&gt;{imageType};
-	if (($type ne &quot;split&quot;) &amp;&amp; ($type ne &quot;iso&quot;)) {
-		return $this;
+	my @configOpts;
+	my @configNodes = $this-&gt;{systemTree}
+		-&gt;getElementsByTagName (&quot;vmconfig-entry&quot;);
+	for my $node (@configNodes) {
+		my $value = $node-&gt;textContent();
+		push @configOpts, $node-&gt;textContent();
 	}
-	my $splitNodeList = $tnode -&gt; getElementsByTagName (&quot;split&quot;);
-	if ($splitNodeList) {
-		return;
+	return @configOpts;
+}
+
+#==========================================
+# buildImageName
+#------------------------------------------
+sub buildImageName {
+	# ...
+	# build image file name from XML information
+	# ---
+	my $this      = shift;
+	my $separator = shift;
+	my $extension = shift;
+	my $arch = qxx (&quot;uname -m&quot;); chomp ( $arch );
+	$arch = &quot;.$arch&quot;;
+	if (! defined $separator) {
+		$separator = &quot;-&quot;;
+	}
+	my $name = $this -&gt; getImageName();
+	my $iver = $this -&gt; getImageVersion();
+	if (defined $extension) {
+		$name = $name.$extension.$arch.$separator.$iver;
+	} else {
+		$name = $name.$arch.$separator.$iver;
 	}
+	chomp  $name;
+	return $name;
+}
+
+#==========================================
+# Private helper methods
+#------------------------------------------
+#==========================================
+# __addDefaultSplitNode
+#------------------------------------------
+sub __addDefaultSplitNode {
+	# ...
+	# if no split section is setup we add a default section
+	# from the contents of the KIWISplit.txt file and apply
+	# it to the split types
+	# ---
+	my $this   = shift;
+	my $kiwi   = $this-&gt;{kiwi};
+	my @node   = $this-&gt;{optionsNodeList} -&gt; get_nodelist();
+	my @tnodes = ();
+	my @snodes = ();
+	#==========================================
+	# store list of all types
+	#------------------------------------------
+	foreach my $element (@node) {
+		my @types = $element -&gt; getElementsByTagName (&quot;type&quot;);
+		push (@<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">tnodes, at types</A>);
+	}
+	#==========================================
+	# select relevant types w.o. split section
+	#------------------------------------------
+	foreach my $element (@tnodes) {
+		my $image = $element -&gt; getAttribute(&quot;image&quot;);
+		if (($image eq &quot;split&quot;) || ($image eq &quot;iso&quot;)) {
+			my @splitsections = $element -&gt; getElementsByTagName (&quot;split&quot;);
+			if (! @splitsections) {
+				push (@snodes,$element);
+			}
+		}
+	}
+	#==========================================
+	# return if no split types are found
+	#------------------------------------------
+	if (! @snodes) {
+		return $this;
+	}
+	#==========================================
+	# read in default split section
+	#------------------------------------------
 	my $splitTree;
 	my $splitXML = new XML::LibXML;
 	eval {
@@ -4303,35 +3964,443 @@ sub addDefaultSplitNode {
 		$kiwi -&gt; error  (&quot;$evaldata\n&quot;);
 		return undef;
 	}
-	$this-&gt;{typeNode} -&gt; appendChild (
-		$splitTree -&gt; getElementsByTagName (&quot;split&quot;)
-	);
+	#==========================================
+	# append default section to selected nodes
+	#------------------------------------------
+	foreach my $element (@snodes) {
+		$element -&gt; appendChild (
+			$splitTree -&gt; getElementsByTagName (&quot;split&quot;)
+		);
+	}
 	$this -&gt; updateXML();
 	return $this;
 }
 
 #==========================================
-# getVMConfigOpts
+# __updateDescriptionFromChangeSet
 #------------------------------------------
-sub getVMConfigOpts {
+sub __updateDescriptionFromChangeSet {
 	# ...
-	# Extract the &lt;vmconfig-entry&gt; information from the
-	# XML and return all options in a list
+	# Write given changes into the previosly read in XML tree
+	# This function is used to incorporate repository, packages
+	# and other changes into the current XML description. Most
+	# often required in order to build the boot image to fit
+	# together with the system image
+	# ---
+	my $this      = shift;
+	my $changeset = shift;
+	my $kiwi      = $this-&gt;{kiwi};
+	my $repositNodeList = $this-&gt;{repositNodeList};
+	my $packageNodeList = $this-&gt;{packageNodeList};
+	#==========================================
+	# check changeset...
+	#------------------------------------------
+	if (! defined $changeset) {
+		return undef;
+	}
+	#==========================================
+	# 1) merge/update repositories
+	#------------------------------------------
+	if ($changeset-&gt;{xmlnode}) {
+		$kiwi -&gt; info (&quot;Updating repository node(s)&quot;);
+		my $need = new XML::LibXML::NodeList();
+		my @node = $repositNodeList -&gt; get_nodelist();
+		foreach my $element (@node) {
+			if (! $this -&gt; __requestedProfile ($element)) {
+				next;
+			}
+			my $status = $element -&gt; getAttribute(&quot;status&quot;);
+			if ((! defined $status) || ($status eq &quot;fixed&quot;)) {
+				$need -&gt; push ($element);
+			}
+		}
+		$repositNodeList = $changeset-&gt;{xmlnode};
+		$repositNodeList -&gt; prepend ($need);
+		$kiwi -&gt; done ();
+	}
+	#==========================================
+	# 2) merge/update packages
+	#------------------------------------------
+	if (($changeset-&gt;{xmlpacnode}) &amp;&amp; ($changeset-&gt;{xmlobj})) {
+		my @node = $changeset -&gt; {xmlpacnode} -&gt; get_nodelist();
+		my @plist;
+		my @alist;
+		my @falistImage;
+		my @fplistImage;
+		my @fplistDelete;
+		foreach my $element (@node) {
+			my $type = $element  -&gt; getAttribute (&quot;type&quot;);
+			if (! $changeset -&gt; {xmlobj} -&gt; __requestedProfile ($element)) {
+				next;
+			}
+			if (($type eq &quot;image&quot;) || ($type eq &quot;bootstrap&quot;)) {
+				push (@plist,$element-&gt;getElementsByTagName (&quot;package&quot;));
+				push (@alist,$element-&gt;getElementsByTagName (&quot;archive&quot;));
+			}
+		}
+		foreach my $element (@plist) {
+			my $package = $element -&gt; getAttribute (&quot;name&quot;);
+			my $bootinc = $element -&gt; getAttribute (&quot;bootinclude&quot;);
+			my $bootdel = $element -&gt; getAttribute (&quot;bootdelete&quot;);
+			if ((defined $bootinc) &amp;&amp; (&quot;$bootinc&quot; eq &quot;true&quot;)) {
+				push (@fplistImage,$package);
+			}
+			if ((defined $bootdel) &amp;&amp; (&quot;$bootdel&quot; eq &quot;true&quot;)) {
+				push (@fplistDelete,$package);
+			}
+		}
+		foreach my $element (@alist) {
+			my $archive = $element -&gt; getAttribute (&quot;name&quot;);
+			my $bootinc = $element -&gt; getAttribute (&quot;bootinclude&quot;);
+			if ((defined $bootinc) &amp;&amp; (&quot;$bootinc&quot; eq &quot;true&quot;)) {
+				push (@falistImage,$archive);
+			}
+		}
+		if (@fplistImage) {
+			$kiwi -&gt; info (&quot;Updating package(s):\n&quot;);
+			foreach my $p (@fplistImage) {
+				$kiwi -&gt; info (&quot;--&gt; $p\n&quot;);
+			}
+			$this -&gt; addPackages (
+				&quot;bootstrap&quot;,$<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">packageNodeList, at fplistImage</A>
+			);
+			if (@fplistDelete) {
+				$this -&gt; addPackages (
+					&quot;delete&quot;,$<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">packageNodeList, at fplistDelete</A>
+				);
+			}
+		}
+		if (@falistImage) {
+			$kiwi -&gt; info (&quot;Updating archive(s):\n&quot;);
+			foreach my $p (@falistImage) {
+				$kiwi -&gt; info (&quot;--&gt; $p\n&quot;);
+			}
+			$this -&gt; addArchives (
+				&quot;bootstrap&quot;,$<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">packageNodeList, at falistImage</A>
+			);
+		}
+	}
+	#==========================================
+	# 3) merge/update machine attribs in type
+	#------------------------------------------
+	if (defined $changeset-&gt;{&quot;domain&quot;}) {
+		$this -&gt; __setMachineAttribute (&quot;domain&quot;,$changeset);
+	}
+	#==========================================
+	# 4) merge/update preferences in type
+	#------------------------------------------
+	if (defined $changeset-&gt;{&quot;locale&quot;}) {
+		$this -&gt; __setOptionsElement (&quot;locale&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;boot-theme&quot;}) {
+		$this -&gt; __setOptionsElement (&quot;boot-theme&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;packagemanager&quot;}) {
+		$this -&gt; __setOptionsElement (&quot;packagemanager&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-swap&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-swap&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-align-partition&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-align-partition&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-partition-install&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-partition-install&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-swapsize&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-swapsize&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-systemsize&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-systemsize&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-boot-title&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-boot-title&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-kiwi-initrd&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-kiwi-initrd&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-reboot&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-reboot&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-reboot-interactive&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-reboot-interactive&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-shutdown&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-shutdown&quot;);
+	}
+	if (defined $changeset-&gt;{&quot;oem-shutdown-interactive&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-shutdown-interactive&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-bootwait&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-bootwait&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-unattended&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-unattended&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-recovery&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-recovery&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-recoveryID&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-recoveryID&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;oem-inplace-recovery&quot;}) {
+		$this -&gt; __setOEMOptionsElement (&quot;oem-inplace-recovery&quot;,$changeset);
+	}
+	if (defined $changeset-&gt;{&quot;lvm&quot;}) {
+		$this -&gt; __setSystemDiskElement (undef,$changeset);
+	}
+	#==========================================
+	# 5) merge/update type attributes
+	#------------------------------------------
+	if (defined $changeset-&gt;{&quot;hybrid&quot;}) {
+		$this -&gt; __setTypeAttribute (
+			&quot;hybrid&quot;,$changeset-&gt;{&quot;hybrid&quot;}
+		);
+	}
+	if (defined $changeset-&gt;{&quot;hybridpersistent&quot;}) {
+		$this -&gt; __setTypeAttribute (
+			&quot;hybridpersistent&quot;,$changeset-&gt;{&quot;hybridpersistent&quot;}
+		);
+	}
+	if (defined $changeset-&gt;{&quot;kernelcmdline&quot;}) {
+		$this -&gt; __setTypeAttribute (
+			&quot;kernelcmdline&quot;,$changeset-&gt;{&quot;kernelcmdline&quot;}
+		);
+	}
+	if (defined $changeset-&gt;{&quot;bootloader&quot;}) {
+		$this -&gt; __setTypeAttribute (
+			&quot;bootloader&quot;,$changeset-&gt;{&quot;bootloader&quot;}
+		);
+	}
+	if (defined $changeset-&gt;{&quot;installboot&quot;}) {
+		$this -&gt; __setTypeAttribute (
+			&quot;installboot&quot;,$changeset-&gt;{&quot;installboot&quot;}
+		);
+	}
+	if (defined $changeset-&gt;{&quot;bootkernel&quot;}) {
+		$this -&gt; __setTypeAttribute (
+			&quot;bootkernel&quot;,$changeset-&gt;{&quot;bootkernel&quot;}
+		);
+	}
+	if (defined $changeset-&gt;{&quot;bootprofile&quot;}) {
+		$this -&gt; __setTypeAttribute (
+			&quot;bootprofile&quot;,$changeset-&gt;{&quot;bootprofile&quot;}
+		);
+	}
+	#==========================================
+	# 6) merge/update image attribs, toplevel
+	#------------------------------------------
+	if (defined $changeset-&gt;{&quot;displayname&quot;}) {
+		$this -&gt; __setImageAttribute (
+			&quot;displayname&quot;,$changeset-&gt;{&quot;displayname&quot;}
+		);
+	}
+}
+
+#==========================================
+# __setOptionsElement
+#------------------------------------------
+sub __setOptionsElement {
+	# ...
+	# If given element exists in the data hash, set this
+	# element into the current preferences (options) XML tree
 	# ---
 	my $this = shift;
-	my @configOpts;
-	my @configNodes = $this-&gt;{systemTree}
-		-&gt;getElementsByTagName (&quot;vmconfig-entry&quot;);
-	for my $node (@configNodes) {
-		my $value = $node-&gt;textContent();
-		push @configOpts, $node-&gt;textContent();
+	my $item = shift;
+	my $data = shift;
+	my $kiwi = $this-&gt;{kiwi};
+	my $value = $data-&gt;{$item};
+	$kiwi -&gt; info (&quot;Updating element $item: $value&quot;);
+	my $addElement = new XML::LibXML::Element (&quot;$item&quot;);
+	$addElement -&gt; appendText ($value);
+	my $opts = $this -&gt; getPreferencesNodeByTagName (&quot;$item&quot;);
+	my $node = $opts -&gt; getElementsByTagName (&quot;$item&quot;);
+	if ($node) {
+		if (&quot;$node&quot; eq &quot;$value&quot;) {
+			$kiwi -&gt; done ();
+			return $this;
+		}
+		$node = $node -&gt; get_node(1);
+		$opts -&gt; removeChild ($node);
 	}
-	return @configOpts;
+	$opts -&gt; appendChild ($addElement);
+	$kiwi -&gt; done ();
+	$this -&gt; updateXML();
+	return $this;
 }
 
 #==========================================
-# Private helper methods
+# __setOEMOptionsElement
+#------------------------------------------
+sub __setOEMOptionsElement {
+	# ...
+	# If given element exists in the data hash, set this
+	# element into the current oemconfig (options) XML tree
+	# ---
+	my $this = shift;
+	my $item = shift;
+	my $data = shift;
+	my $kiwi = $this-&gt;{kiwi};
+	my $tnode= $this-&gt;{typeNode};
+	my $value = $data-&gt;{$item};
+	my $newconfig = 0;
+	$kiwi -&gt; info (&quot;Updating OEM element $item: $value&quot;);
+	my $addElement = new XML::LibXML::Element (&quot;$item&quot;);
+	$addElement -&gt; appendText ($value);
+	my $opts = $tnode -&gt; getElementsByTagName (&quot;oemconfig&quot;) -&gt; get_node(1);
+	if (! defined $opts) {
+		$opts = new XML::LibXML::Element (&quot;oemconfig&quot;);
+		$newconfig = 1;
+	}
+	my $node = $opts -&gt; getElementsByTagName (&quot;$item&quot;);
+	if ($node) {
+		$node = $node -&gt; get_node(1);
+		$opts -&gt; removeChild ($node);
+	}
+	$opts -&gt; appendChild ($addElement);
+	if ($newconfig) {
+		$this-&gt;{typeNode} -&gt; appendChild ($opts);
+	}
+	$kiwi -&gt; done ();
+	$this -&gt; updateXML();
+	return $this;
+}
+
+#==========================================
+# __setSystemDiskElement
 #------------------------------------------
+sub __setSystemDiskElement {
+	# ...
+	# If given element exists in the data hash, set this
+	# element into the current systemdisk XML tree
+	# ---
+	my $this = shift;
+	my $item = shift;
+	my $data = shift;
+	my $kiwi = $this-&gt;{kiwi};
+	my $tnode= $this-&gt;{typeNode};
+	my $value;
+	if (($data) &amp;&amp; ($item)) {
+		$value = $data-&gt;{$item};
+	}
+	my $newconfig = 0;
+	my $addElement;
+	if ($item) {
+		$kiwi -&gt; info (&quot;Updating SystemDisk element $item: $value&quot;);
+		$addElement = new XML::LibXML::Element (&quot;$item&quot;);
+		$addElement -&gt; appendText ($value);
+	} else {
+		$kiwi -&gt; info (&quot;Updating SystemDisk element&quot;);
+	}
+	my $disk = $tnode -&gt; getElementsByTagName (&quot;systemdisk&quot;) -&gt; get_node(1);
+	if (! defined $disk) {
+		$disk = new XML::LibXML::Element (&quot;systemdisk&quot;);
+		$newconfig = 1;
+	}
+	if ($item) {
+		my $node = $disk -&gt; getElementsByTagName (&quot;$item&quot;);
+		if ($node) {
+			$node = $node -&gt; get_node(1);
+			$disk -&gt; removeChild ($node);
+		}
+		$disk -&gt; appendChild ($addElement);
+	}
+	if ($newconfig) {
+		$this-&gt;{typeNode} -&gt; appendChild ($disk);
+	}
+	$kiwi -&gt; done ();
+	$this -&gt; updateXML();
+	return $this;
+}
+
+#==========================================
+# __setMachineAttribute
+#------------------------------------------
+sub __setMachineAttribute {
+	# ...
+	# If given element exists in the data hash, set this
+	# attribute into the current machine (options) XML tree
+	# if no machine section exists create a new one
+	# ---
+	my $this = shift;
+	my $item = shift;
+	my $data = shift;
+	my $kiwi = $this-&gt;{kiwi};
+	my $tnode= $this-&gt;{typeNode};
+	my $value = $data-&gt;{$item};
+	my $newconfig = 0;
+	$kiwi -&gt; info (&quot;Updating machine attribute $item: $value&quot;);
+	my $opts = $tnode -&gt; getElementsByTagName (&quot;machine&quot;) -&gt; get_node(1);
+	if (! defined $opts) {
+		$opts = new XML::LibXML::Element (&quot;machine&quot;);
+		$newconfig = 1;
+	}
+	my $node = $opts -&gt; getElementsByTagName (&quot;$item&quot;);
+	if ($node) {
+		$node = $node -&gt; get_node(1);
+		$opts -&gt; removeChild ($node);
+	}
+	if ($value) {
+		$opts-&gt; setAttribute (&quot;$item&quot;,&quot;$value&quot;);
+	} else {
+		$opts-&gt; setAttribute (&quot;$item&quot;,&quot;true&quot;);
+	}
+	if ($newconfig) {
+		$this-&gt;{typeNode} -&gt; appendChild ($opts);
+	}
+	$kiwi -&gt; done ();
+	$this -&gt; updateXML();
+	return $this;
+}
+
+#==========================================
+# __setTypeAttribute
+#------------------------------------------
+sub __setTypeAttribute {
+	# ...
+	# set given attribute to selected type in the
+	# xml preferences node
+	# ---
+	my $this = shift;
+	my $attr = shift;
+	my $val  = shift;
+	my $kiwi = $this-&gt;{kiwi};
+	my $tnode= $this-&gt;{typeNode};
+	if ($val) {
+		$kiwi -&gt; info (&quot;Updating type attribute: $attr : $val&quot;);
+		$tnode-&gt; setAttribute (&quot;$attr&quot;,&quot;$val&quot;);
+	} else {
+		$kiwi -&gt; info (&quot;Updating type attribute: $attr&quot;);
+		$tnode-&gt; setAttribute (&quot;$attr&quot;,&quot;true&quot;);
+	}
+	$kiwi -&gt; done ();
+	$this -&gt; updateXML();
+	return $this;
+}
+
+#==========================================
+# __setImageAttribute
+#------------------------------------------
+sub __setImageAttribute {
+	# ...
+	# set given attribute to the image section
+	# ---
+	my $this = shift;
+	my $attr = shift;
+	my $val  = shift;
+	my $kiwi = $this-&gt;{kiwi};
+	my $inode= $this-&gt;{imgnameNodeList} -&gt; get_node(1);
+	$kiwi -&gt; info (&quot;Updating image attribute: $attr&quot;);
+	if ($val) {
+		$inode -&gt; setAttribute (&quot;$attr&quot;,&quot;$val&quot;);
+	} else {
+		$inode -&gt; setAttribute (&quot;$attr&quot;,&quot;true&quot;);
+	}
+	$kiwi -&gt; done ();
+	$this -&gt; updateXML();
+	return $this;
+}
+
 #==========================================
 # __requestedProfile
 #------------------------------------------
@@ -5003,7 +5072,13 @@ sub __populateImageTypeAndNode {
 	# check if typeinfo hash exists
 	#------------------------------------------
 	if (! $typeinfo) {
-		return undef;
+		# /.../
+		# if not typeinfo hash was populated we use the first type
+		# node listed in the description as the used type.
+		# ----
+		$this-&gt;{typeNode} = $this-&gt;{optionsNodeList}
+			-&gt; get_node(1) -&gt; getElementsByTagName (&quot;type&quot;) -&gt; get_node(1);
+		return $this;
 	}
 	#==========================================
 	# select type and type node
diff --git a/system/boot/ix86/isoboot/rhel-05.4/config.xml b/system/boot/ix86/isoboot/rhel-05.4/config.xml
index 158fc32..62cf7ae 100644
--- a/system/boot/ix86/isoboot/rhel-05.4/config.xml
+++ b/system/boot/ix86/isoboot/rhel-05.4/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-rhel-05.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-rhel-05.4&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-11.1/config.xml b/system/boot/ix86/isoboot/suse-11.1/config.xml
index 41533cb..7e99d42 100644
--- a/system/boot/ix86/isoboot/suse-11.1/config.xml
+++ b/system/boot/ix86/isoboot/suse-11.1/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-11.1&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-11.1&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-11.2/config.xml b/system/boot/ix86/isoboot/suse-11.2/config.xml
index 095f817..4210689 100644
--- a/system/boot/ix86/isoboot/suse-11.2/config.xml
+++ b/system/boot/ix86/isoboot/suse-11.2/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-11.2&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-11.2&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-11.3/config.xml b/system/boot/ix86/isoboot/suse-11.3/config.xml
index d727221..82ffece 100644
--- a/system/boot/ix86/isoboot/suse-11.3/config.xml
+++ b/system/boot/ix86/isoboot/suse-11.3/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-11.3&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-11.3&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-11.4/config.xml b/system/boot/ix86/isoboot/suse-11.4/config.xml
index 6b41efd..529d205 100644
--- a/system/boot/ix86/isoboot/suse-11.4/config.xml
+++ b/system/boot/ix86/isoboot/suse-11.4/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-11.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-11.4&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-SLED10/config.xml b/system/boot/ix86/isoboot/suse-SLED10/config.xml
index 505a668..31b68d1 100644
--- a/system/boot/ix86/isoboot/suse-SLED10/config.xml
+++ b/system/boot/ix86/isoboot/suse-SLED10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-SLED10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-SLED10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-SLED11/config.xml b/system/boot/ix86/isoboot/suse-SLED11/config.xml
index bae1af4..a98ee3c 100644
--- a/system/boot/ix86/isoboot/suse-SLED11/config.xml
+++ b/system/boot/ix86/isoboot/suse-SLED11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-SLED11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-SLED11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-SLES10/config.xml b/system/boot/ix86/isoboot/suse-SLES10/config.xml
index e7cbc22..1262ff1 100644
--- a/system/boot/ix86/isoboot/suse-SLES10/config.xml
+++ b/system/boot/ix86/isoboot/suse-SLES10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-SLES10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-SLES10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/isoboot/suse-SLES11/config.xml b/system/boot/ix86/isoboot/suse-SLES11/config.xml
index 7764d6c..53c1d31 100644
--- a/system/boot/ix86/isoboot/suse-SLES11/config.xml
+++ b/system/boot/ix86/isoboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-isoboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-isoboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-11.1/config.xml b/system/boot/ix86/netboot/suse-11.1/config.xml
index 66e362c..3249310 100644
--- a/system/boot/ix86/netboot/suse-11.1/config.xml
+++ b/system/boot/ix86/netboot/suse-11.1/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-11.1&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-11.1&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-11.2/config.xml b/system/boot/ix86/netboot/suse-11.2/config.xml
index 7956180..48d1036 100644
--- a/system/boot/ix86/netboot/suse-11.2/config.xml
+++ b/system/boot/ix86/netboot/suse-11.2/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-11.2&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-11.2&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-11.3/config.xml b/system/boot/ix86/netboot/suse-11.3/config.xml
index bb80835..b0f5203 100644
--- a/system/boot/ix86/netboot/suse-11.3/config.xml
+++ b/system/boot/ix86/netboot/suse-11.3/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-11.3&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-11.3&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-11.4/config.xml b/system/boot/ix86/netboot/suse-11.4/config.xml
index faf9945..d557283 100644
--- a/system/boot/ix86/netboot/suse-11.4/config.xml
+++ b/system/boot/ix86/netboot/suse-11.4/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-11.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-11.4&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-SLED10/config.xml b/system/boot/ix86/netboot/suse-SLED10/config.xml
index 95faa45..360356e 100644
--- a/system/boot/ix86/netboot/suse-SLED10/config.xml
+++ b/system/boot/ix86/netboot/suse-SLED10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-SLED10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-SLED10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-SLED11/config.xml b/system/boot/ix86/netboot/suse-SLED11/config.xml
index d53211a..d322bcc 100644
--- a/system/boot/ix86/netboot/suse-SLED11/config.xml
+++ b/system/boot/ix86/netboot/suse-SLED11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-SLED11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-SLED11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-SLES10/config.xml b/system/boot/ix86/netboot/suse-SLES10/config.xml
index a596efe..b0476bd 100644
--- a/system/boot/ix86/netboot/suse-SLES10/config.xml
+++ b/system/boot/ix86/netboot/suse-SLES10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-SLES10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-SLES10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/netboot/suse-SLES11/config.xml b/system/boot/ix86/netboot/suse-SLES11/config.xml
index 7ac3f81..ce41f1d 100644
--- a/system/boot/ix86/netboot/suse-SLES11/config.xml
+++ b/system/boot/ix86/netboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-11.1/config.xml b/system/boot/ix86/oemboot/suse-11.1/config.xml
index b64a78f..e04ca4f 100644
--- a/system/boot/ix86/oemboot/suse-11.1/config.xml
+++ b/system/boot/ix86/oemboot/suse-11.1/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-11.1&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-11.1&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-11.2/config.xml b/system/boot/ix86/oemboot/suse-11.2/config.xml
index 017b228..868b52b 100644
--- a/system/boot/ix86/oemboot/suse-11.2/config.xml
+++ b/system/boot/ix86/oemboot/suse-11.2/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-11.2&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-11.2&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-11.3/config.xml b/system/boot/ix86/oemboot/suse-11.3/config.xml
index 95aa5fb..3c8a606 100644
--- a/system/boot/ix86/oemboot/suse-11.3/config.xml
+++ b/system/boot/ix86/oemboot/suse-11.3/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-11.3&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-11.3&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-11.4/config.xml b/system/boot/ix86/oemboot/suse-11.4/config.xml
index fad0737..8a1fd23 100644
--- a/system/boot/ix86/oemboot/suse-11.4/config.xml
+++ b/system/boot/ix86/oemboot/suse-11.4/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-11.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-11.4&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-SLED10/config.xml b/system/boot/ix86/oemboot/suse-SLED10/config.xml
index ad3fbae..7ae230c 100644
--- a/system/boot/ix86/oemboot/suse-SLED10/config.xml
+++ b/system/boot/ix86/oemboot/suse-SLED10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-SLED10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-SLED10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-SLED11/config.xml b/system/boot/ix86/oemboot/suse-SLED11/config.xml
index baafcff..a0b5b6d 100644
--- a/system/boot/ix86/oemboot/suse-SLED11/config.xml
+++ b/system/boot/ix86/oemboot/suse-SLED11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-SLED11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-SLED11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-SLES10/config.xml b/system/boot/ix86/oemboot/suse-SLES10/config.xml
index 8dff34b..0d167da 100644
--- a/system/boot/ix86/oemboot/suse-SLES10/config.xml
+++ b/system/boot/ix86/oemboot/suse-SLES10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-SLES10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-SLES10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/oemboot/suse-SLES11/config.xml b/system/boot/ix86/oemboot/suse-SLES11/config.xml
index 0aa5458..81af766 100644
--- a/system/boot/ix86/oemboot/suse-SLES11/config.xml
+++ b/system/boot/ix86/oemboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-11.1/config.xml b/system/boot/ix86/usbboot/suse-11.1/config.xml
index db4ca35..b76cfa0 100644
--- a/system/boot/ix86/usbboot/suse-11.1/config.xml
+++ b/system/boot/ix86/usbboot/suse-11.1/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-11.1&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-11.1&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-11.2/config.xml b/system/boot/ix86/usbboot/suse-11.2/config.xml
index a03780a..b146b16 100644
--- a/system/boot/ix86/usbboot/suse-11.2/config.xml
+++ b/system/boot/ix86/usbboot/suse-11.2/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-11.2&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-11.2&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-11.3/config.xml b/system/boot/ix86/usbboot/suse-11.3/config.xml
index 500f90e..7566f90 100644
--- a/system/boot/ix86/usbboot/suse-11.3/config.xml
+++ b/system/boot/ix86/usbboot/suse-11.3/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-11.3&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-11.3&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-11.4/config.xml b/system/boot/ix86/usbboot/suse-11.4/config.xml
index 9f85eb0..9aa1cc5 100644
--- a/system/boot/ix86/usbboot/suse-11.4/config.xml
+++ b/system/boot/ix86/usbboot/suse-11.4/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-11.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-11.4&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-SLED10/config.xml b/system/boot/ix86/usbboot/suse-SLED10/config.xml
index 2f9d43d..7a6362a 100644
--- a/system/boot/ix86/usbboot/suse-SLED10/config.xml
+++ b/system/boot/ix86/usbboot/suse-SLED10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-SLED10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-SLED10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-SLED11/config.xml b/system/boot/ix86/usbboot/suse-SLED11/config.xml
index 5dbf605..752f27e 100644
--- a/system/boot/ix86/usbboot/suse-SLED11/config.xml
+++ b/system/boot/ix86/usbboot/suse-SLED11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-SLED11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-SLED11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-SLES10/config.xml b/system/boot/ix86/usbboot/suse-SLES10/config.xml
index 07024b6..5411bec 100644
--- a/system/boot/ix86/usbboot/suse-SLES10/config.xml
+++ b/system/boot/ix86/usbboot/suse-SLES10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-SLES10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-SLES10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/usbboot/suse-SLES11/config.xml b/system/boot/ix86/usbboot/suse-SLES11/config.xml
index 37062c6..c1f33d1 100644
--- a/system/boot/ix86/usbboot/suse-SLES11/config.xml
+++ b/system/boot/ix86/usbboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-usbboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-usbboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-11.1/config.xml b/system/boot/ix86/vmxboot/suse-11.1/config.xml
index b993506..5e9ae3a 100644
--- a/system/boot/ix86/vmxboot/suse-11.1/config.xml
+++ b/system/boot/ix86/vmxboot/suse-11.1/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-11.1&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-11.1&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-11.2/config.xml b/system/boot/ix86/vmxboot/suse-11.2/config.xml
index 31d0448..d331481 100644
--- a/system/boot/ix86/vmxboot/suse-11.2/config.xml
+++ b/system/boot/ix86/vmxboot/suse-11.2/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-11.2&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-11.2&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-11.3/config.xml b/system/boot/ix86/vmxboot/suse-11.3/config.xml
index 4948e64..06c6e65 100644
--- a/system/boot/ix86/vmxboot/suse-11.3/config.xml
+++ b/system/boot/ix86/vmxboot/suse-11.3/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-11.3&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-11.3&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-11.4/config.xml b/system/boot/ix86/vmxboot/suse-11.4/config.xml
index 49afa5f..ae8146a 100644
--- a/system/boot/ix86/vmxboot/suse-11.4/config.xml
+++ b/system/boot/ix86/vmxboot/suse-11.4/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-11.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-11.4&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-SLED10/config.xml b/system/boot/ix86/vmxboot/suse-SLED10/config.xml
index 9e0d5fa..f057e02 100644
--- a/system/boot/ix86/vmxboot/suse-SLED10/config.xml
+++ b/system/boot/ix86/vmxboot/suse-SLED10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-SLED10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-SLED10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-SLED11/config.xml b/system/boot/ix86/vmxboot/suse-SLED11/config.xml
index 6cce816..2cac3bb 100644
--- a/system/boot/ix86/vmxboot/suse-SLED11/config.xml
+++ b/system/boot/ix86/vmxboot/suse-SLED11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-SLED11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-SLED11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-SLES10/config.xml b/system/boot/ix86/vmxboot/suse-SLES10/config.xml
index 16d9c54..a7b9553 100644
--- a/system/boot/ix86/vmxboot/suse-SLES10/config.xml
+++ b/system/boot/ix86/vmxboot/suse-SLES10/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-SLES10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-SLES10&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ix86/vmxboot/suse-SLES11/config.xml b/system/boot/ix86/vmxboot/suse-SLES11/config.xml
index 77d3147..2df4881 100644
--- a/system/boot/ix86/vmxboot/suse-SLES11/config.xml
+++ b/system/boot/ix86/vmxboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ppc/netboot/suse-11.1/config.xml b/system/boot/ppc/netboot/suse-11.1/config.xml
index 1e19489..a42c840 100644
--- a/system/boot/ppc/netboot/suse-11.1/config.xml
+++ b/system/boot/ppc/netboot/suse-11.1/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-11.1&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-11.1&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ppc/netboot/suse-11.2/config.xml b/system/boot/ppc/netboot/suse-11.2/config.xml
index 7db6af0..2ecba07 100644
--- a/system/boot/ppc/netboot/suse-11.2/config.xml
+++ b/system/boot/ppc/netboot/suse-11.2/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-11.2&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-11.2&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/ppc/netboot/suse-11.3/config.xml b/system/boot/ppc/netboot/suse-11.3/config.xml
index 16121dc..1849f20 100644
--- a/system/boot/ppc/netboot/suse-11.3/config.xml
+++ b/system/boot/ppc/netboot/suse-11.3/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-netboot-suse-11.3&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-netboot-suse-11.3&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/s390/oemboot/suse-SLES11/config.xml b/system/boot/s390/oemboot/suse-SLES11/config.xml
index 93b0d3c..6644697 100644
--- a/system/boot/s390/oemboot/suse-SLES11/config.xml
+++ b/system/boot/s390/oemboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-oemboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-oemboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/system/boot/s390/vmxboot/suse-SLES11/config.xml b/system/boot/s390/vmxboot/suse-SLES11/config.xml
index 1fc5b6f..7ca72b7 100644
--- a/system/boot/s390/vmxboot/suse-SLES11/config.xml
+++ b/system/boot/s390/vmxboot/suse-SLES11/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;initrd-vmxboot-suse-SLES11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;initrd-vmxboot-suse-SLES11&quot;&gt;
 	&lt;description type=&quot;boot&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/template/ix86/rhel-05.4-JeOS/config.xml b/template/ix86/rhel-05.4-JeOS/config.xml
index f640344..e392b95 100644
--- a/template/ix86/rhel-05.4-JeOS/config.xml
+++ b/template/ix86/rhel-05.4-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-RHEL-05.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-RHEL-05.4&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/template/ix86/suse-11.1-JeOS/config.xml b/template/ix86/suse-11.1-JeOS/config.xml
index 353ecef..f5df2df 100644
--- a/template/ix86/suse-11.1-JeOS/config.xml
+++ b/template/ix86/suse-11.1-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-openSUSE-11.1&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-openSUSE-11.1&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Christoph Thiel&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">cthiel at novell.com</A>&lt;/contact&gt;
diff --git a/template/ix86/suse-11.2-JeOS/config.xml b/template/ix86/suse-11.2-JeOS/config.xml
index db43105..1a1a79a 100644
--- a/template/ix86/suse-11.2-JeOS/config.xml
+++ b/template/ix86/suse-11.2-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-openSUSE-11.2&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-openSUSE-11.2&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/template/ix86/suse-11.3-JeOS/config.xml b/template/ix86/suse-11.3-JeOS/config.xml
index 0904e14..90f3450 100644
--- a/template/ix86/suse-11.3-JeOS/config.xml
+++ b/template/ix86/suse-11.3-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-openSUSE-11.3&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-openSUSE-11.3&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/template/ix86/suse-11.4-JeOS/config.xml b/template/ix86/suse-11.4-JeOS/config.xml
index e4507b5..af76718 100644
--- a/template/ix86/suse-11.4-JeOS/config.xml
+++ b/template/ix86/suse-11.4-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-openSUSE-11.4&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-openSUSE-11.4&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
diff --git a/template/ix86/suse-SLE10-JeOS/config.xml b/template/ix86/suse-SLE10-JeOS/config.xml
index 5fb05a4..534218b 100644
--- a/template/ix86/suse-SLE10-JeOS/config.xml
+++ b/template/ix86/suse-SLE10-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-SLE10&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-SLE10&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Christoph Thiel&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">cthiel at novell.com</A>&lt;/contact&gt;
diff --git a/template/ix86/suse-SLE11-JeOS/config.xml b/template/ix86/suse-SLE11-JeOS/config.xml
index 7edb804..e5c6201 100644
--- a/template/ix86/suse-SLE11-JeOS/config.xml
+++ b/template/ix86/suse-SLE11-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-SLE11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-SLE11&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Christoph Thiel&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">cthiel at novell.com</A>&lt;/contact&gt;
diff --git a/template/s390/suse-SLE11-JeOS/config.xml b/template/s390/suse-SLE11-JeOS/config.xml
index 66bc395..b613665 100644
--- a/template/s390/suse-SLE11-JeOS/config.xml
+++ b/template/s390/suse-SLE11-JeOS/config.xml
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 
-&lt;image schemaversion=&quot;5.1&quot; name=&quot;LimeJeOS-SLE11&quot;&gt;
+&lt;image schemaversion=&quot;5.2&quot; name=&quot;LimeJeOS-SLE11&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Schaefer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">cthiel at novell.com</A>&lt;/contact&gt;
diff --git a/xsl/convert50to51.xsl b/xsl/convert50to51.xsl
index d495054..42167a1 100644
--- a/xsl/convert50to51.xsl
+++ b/xsl/convert50to51.xsl
@@ -31,7 +31,7 @@
 &lt;xsl:template match=&quot;type&quot; mode=&quot;conv50to51&quot;&gt;
 	&lt;type&gt;
 		&lt;xsl:copy-of select=&quot;@*[not(local-name(.) = 'baseroot')]&quot;/&gt;
-		&lt;xsl:apply-templates mode=&quot;conv20to24&quot;/&gt;
+		&lt;xsl:apply-templates mode=&quot;conv50to51&quot;/&gt;
 	&lt;/type&gt;
 &lt;/xsl:template&gt;
 
diff --git a/xsl/convert51to52.xsl b/xsl/convert51to52.xsl
new file mode 100644
index 0000000..db8cd80
--- /dev/null
+++ b/xsl/convert51to52.xsl
@@ -0,0 +1,28 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
+&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot;&gt;
+&lt;xsl:output method=&quot;xml&quot;
+    indent=&quot;yes&quot; omit-xml-declaration=&quot;no&quot; encoding=&quot;utf-8&quot;/&gt;
+
+&lt;!-- default rule --&gt;
+&lt;xsl:template match=&quot;*|processing-instruction()|comment()&quot; mode=&quot;conv51to52&quot;&gt;
+	&lt;xsl:copy&gt;
+		&lt;xsl:copy-of select=&quot;@*&quot;/&gt;
+		&lt;xsl:apply-templates mode=&quot;conv51to52&quot;/&gt;
+	&lt;/xsl:copy&gt;  
+&lt;/xsl:template&gt;
+
+&lt;!-- update schema version --&gt;
+&lt;!-- remove inherit attribute from image --&gt;
+&lt;para xmlns=&quot;<A HREF="http://docbook.org/ns/docbook">http://docbook.org/ns/docbook</A>&quot;&gt;
+	Changed attribute &lt;tag class=&quot;attribute&quot;&gt;schemaversion&lt;/tag&gt;
+	to &lt;tag class=&quot;attribute&quot;&gt;schemaversion&lt;/tag&gt; from
+	&lt;literal&gt;5.1&lt;/literal&gt; to &lt;literal&gt;5.2&lt;/literal&gt;.
+&lt;/para&gt;
+&lt;xsl:template match=&quot;image&quot; mode=&quot;conv51to52&quot;&gt;
+	&lt;image schemaversion=&quot;5.2&quot;&gt;
+		&lt;xsl:copy-of select=&quot;@*[local-name() != 'schemaversion' and local-name() != 'inherit']&quot;/&gt;
+		&lt;xsl:apply-templates  mode=&quot;conv51to52&quot;/&gt;  
+	&lt;/image&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;
diff --git a/xsl/master.xsl b/xsl/master.xsl
index dd3656d..2722263 100644
--- a/xsl/master.xsl
+++ b/xsl/master.xsl
@@ -22,6 +22,7 @@
 &lt;xsl:import href=&quot;convert48to49.xsl&quot;/&gt;
 &lt;xsl:import href=&quot;convert49to50.xsl&quot;/&gt;
 &lt;xsl:import href=&quot;convert50to51.xsl&quot;/&gt;
+&lt;xsl:import href=&quot;convert51to52.xsl&quot;/&gt;
 &lt;xsl:import href=&quot;pretty.xsl&quot;/&gt;
 
 
@@ -96,8 +97,12 @@
 		&lt;xsl:apply-templates select=&quot;exslt:node-set($v50)&quot; mode=&quot;conv50to51&quot;/&gt;
 	&lt;/xsl:variable&gt;
 
+	&lt;xsl:variable name=&quot;v52&quot;&gt;
+		&lt;xsl:apply-templates select=&quot;exslt:node-set($v51)&quot; mode=&quot;conv51to52&quot;/&gt;
+	&lt;/xsl:variable&gt;
+
 	&lt;xsl:apply-templates
-		select=&quot;exslt:node-set($v51)&quot; mode=&quot;pretty&quot;
+		select=&quot;exslt:node-set($v52)&quot; mode=&quot;pretty&quot;
 	/&gt;
 &lt;/xsl:template&gt;
 


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002879.html">[Kiwi-devel] XML processing - patch two
</A></li>
	<LI>Next message: <A HREF="002881.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. ab97f69b976fd7bb699ef17c8b0ddf7c9e6b760a
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2880">[ date ]</a>
              <a href="thread.html#2880">[ thread ]</a>
              <a href="subject.html#2880">[ subject ]</a>
              <a href="author.html#2880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
