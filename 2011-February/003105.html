<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. d32fb17debadd5fa678e69503183bf70ad1eeb51
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-February/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20d32fb17debadd5fa678e69503183bf70ad1eeb51&In-Reply-To=%3C20110222170216.B08864812B7%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003103.html">
   <LINK REL="Next"  HREF="003106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. d32fb17debadd5fa678e69503183bf70ad1eeb51</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20d32fb17debadd5fa678e69503183bf70ad1eeb51&In-Reply-To=%3C20110222170216.B08864812B7%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. d32fb17debadd5fa678e69503183bf70ad1eeb51">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Tue Feb 22 18:02:15 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003103.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 4f593b22118e24d1feb2feef363914b8f23ab1f7
</A></li>
        <LI>Next message: <A HREF="003106.html">[Kiwi-devel] Google summer of code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3105">[ date ]</a>
              <a href="thread.html#3105">[ thread ]</a>
              <a href="subject.html#3105">[ subject ]</a>
              <a href="author.html#3105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, master has been updated
       via  d32fb17debadd5fa678e69503183bf70ad1eeb51 (commit)
       via  4c1bffd51d839986245b291871db9b5c3fb89206 (commit)
      from  4f593b22118e24d1feb2feef363914b8f23ab1f7 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit d32fb17debadd5fa678e69503183bf70ad1eeb51
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Tue Feb 22 18:01:00 2011 +0100

    - v4.78 released

commit 4c1bffd51d839986245b291871db9b5c3fb89206
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Tue Feb 22 18:00:35 2011 +0100

    - added check to enforce the &quot;no whitespace&quot; rule for profile names

-----------------------------------------------------------------------

Summary of changes:
diff --git a/doc/KIWI::config.sh.1 b/doc/KIWI::config.sh.1
index fcc4d51..ead6a19 100644
--- a/doc/KIWI::config.sh.1
+++ b/doc/KIWI::config.sh.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi::config.sh
 .\&quot;    Author: Marcus Sch&#195;&#164;fer &lt;ms (AT) suse.de&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 02/21/2011
+.\&quot;      Date: Created: 02/22/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: KIWI 4.77
+.\&quot;    Source: KIWI 4.78
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI::CONFIG\&amp;.SH&quot; &quot;1&quot; &quot;Created: 02/21/2011&quot; &quot;KIWI 4\&amp;.77&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI::CONFIG\&amp;.SH&quot; &quot;1&quot; &quot;Created: 02/22/2011&quot; &quot;KIWI 4\&amp;.78&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/KIWI::images.sh.1 b/doc/KIWI::images.sh.1
index b2f0c04..7ea1d77 100644
--- a/doc/KIWI::images.sh.1
+++ b/doc/KIWI::images.sh.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi::images.sh
 .\&quot;    Author: Marcus Sch&#195;&#164;fer &lt;ms (AT) suse.de&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 02/21/2011
+.\&quot;      Date: Created: 02/22/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: KIWI 4.77
+.\&quot;    Source: KIWI 4.78
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI::IMAGES\&amp;.SH&quot; &quot;1&quot; &quot;Created: 02/21/2011&quot; &quot;KIWI 4\&amp;.77&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI::IMAGES\&amp;.SH&quot; &quot;1&quot; &quot;Created: 02/22/2011&quot; &quot;KIWI 4\&amp;.78&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/KIWI::kiwirc.1 b/doc/KIWI::kiwirc.1
index 5c0655d..1157cd9 100644
--- a/doc/KIWI::kiwirc.1
+++ b/doc/KIWI::kiwirc.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi::kiwirc
 .\&quot;    Author: Robert Schweikert &lt;rschweikert (AT) novell.com&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 02/21/2011
+.\&quot;      Date: Created: 02/22/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: &gt;KIWI 4.77
+.\&quot;    Source: &gt;KIWI 4.78
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI::KIWIRC&quot; &quot;1&quot; &quot;Created: 02/21/2011&quot; &quot;&gt;KIWI 4\&amp;.77&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI::KIWIRC&quot; &quot;1&quot; &quot;Created: 02/22/2011&quot; &quot;&gt;KIWI 4\&amp;.78&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/docbook/Revision.txt b/doc/docbook/Revision.txt
index fb880fb..592dfc8 100644
--- a/doc/docbook/Revision.txt
+++ b/doc/docbook/Revision.txt
@@ -1 +1 @@
-4.77
\ No newline at end of file
+4.78
\ No newline at end of file
diff --git a/doc/images/activation.png b/doc/images/activation.png
index 9cb57ec..b7894fc 100644
Binary files a/doc/images/activation.png and b/doc/images/activation.png differ
diff --git a/doc/images/description.png b/doc/images/description.png
index 56f89dc..4fd830c 100644
Binary files a/doc/images/description.png and b/doc/images/description.png differ
diff --git a/doc/images/intro.png b/doc/images/intro.png
index 3b1f6b9..ef7310f 100644
Binary files a/doc/images/intro.png and b/doc/images/intro.png differ
diff --git a/doc/images/maintain.png b/doc/images/maintain.png
index 97b52e6..f20c623 100644
Binary files a/doc/images/maintain.png and b/doc/images/maintain.png differ
diff --git a/doc/images/nbboot.png b/doc/images/nbboot.png
index 9febbbb..87dc8a2 100644
Binary files a/doc/images/nbboot.png and b/doc/images/nbboot.png differ
diff --git a/doc/images/source.png b/doc/images/source.png
index 03d9dac..fc582c5 100644
Binary files a/doc/images/source.png and b/doc/images/source.png differ
diff --git a/doc/images/types.png b/doc/images/types.png
index 5a5fcdf..9c4c93e 100644
Binary files a/doc/images/types.png and b/doc/images/types.png differ
diff --git a/doc/kiwi.1 b/doc/kiwi.1
index 081aab2..85b3c38 100644
--- a/doc/kiwi.1
+++ b/doc/kiwi.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi
 .\&quot;    Author: Marcus Schaefer &lt;ms (AT) suse.de&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 02/21/2011
+.\&quot;      Date: Created: 02/22/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: KIWI 4.77
+.\&quot;    Source: KIWI 4.78
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI&quot; &quot;1&quot; &quot;Created: 02/21/2011&quot; &quot;KIWI 4\&amp;.77&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI&quot; &quot;1&quot; &quot;Created: 02/22/2011&quot; &quot;KIWI 4\&amp;.78&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/kiwi.html b/doc/kiwi.html
index 9085b47..b2058b1 100644
--- a/doc/kiwi.html
+++ b/doc/kiwi.html
@@ -1,4 +1,4 @@
-&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;title&gt;openSUSE-KIWI Image System&lt;/title&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;susebooks.css&quot;&gt;&lt;meta name=&quot;generator&quot; content=&quot;DocBook XSL Stylesheets V1.76.1-RC1&quot;&gt;&lt;/head&gt;&lt;body bgcolor=&quot;white&quot; text=&quot;black&quot; link=&quot;#0000FF&quot; vlink=&quot;#840084&quot; alink=&quot;#0000FF&quot;&gt;&lt;div lang=&quot;en&quot; class=&quot;book&quot; title=&quot;openSUSE-KIWI Image System&quot;&gt;&lt;div class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h1 class=&quot;title&quot;&gt;&lt;a name=&quot;id2438293&quot;&gt;&lt;/a&gt;openSUSE-KIWI Image System&lt;/h1&gt;&lt;/div&gt;&lt;div&gt;&lt;h2 class=&quot;subtitle&quot;&gt;Cookbook&lt;/h2&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;authorgroup&quot;&gt;&lt;div class=&quot;author&quot;&gt;&lt;h3 class=&quot;author&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Marcus&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Sch&#195;&#164;fer&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Project, Design and Implementation&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Software Engineer&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&lt;/
 a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;div class=&quot;othercredit&quot;&gt;&lt;h3 class=&quot;othercredit&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Thomas&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Schraitle&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Various text improvements, migration to DocBook&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Documentation Specialist&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&lt;/a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p class=&quot;releaseinfo&quot;&gt;KIWI Version 4.77&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;legalnotice&quot; title=&quot;License&quot;&gt;&lt;a name=&quot;id2522385&quot;&gt;&lt;/a&gt;&lt;p class=&quot;legalnotice-title&quot;&gt;&lt;b&gt;License&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Permission is granted to copy, distribute and/or modify this
+&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;title&gt;openSUSE-KIWI Image System&lt;/title&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;susebooks.css&quot;&gt;&lt;meta name=&quot;generator&quot; content=&quot;DocBook XSL Stylesheets V1.76.1-RC1&quot;&gt;&lt;/head&gt;&lt;body bgcolor=&quot;white&quot; text=&quot;black&quot; link=&quot;#0000FF&quot; vlink=&quot;#840084&quot; alink=&quot;#0000FF&quot;&gt;&lt;div lang=&quot;en&quot; class=&quot;book&quot; title=&quot;openSUSE-KIWI Image System&quot;&gt;&lt;div class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h1 class=&quot;title&quot;&gt;&lt;a name=&quot;id2438293&quot;&gt;&lt;/a&gt;openSUSE-KIWI Image System&lt;/h1&gt;&lt;/div&gt;&lt;div&gt;&lt;h2 class=&quot;subtitle&quot;&gt;Cookbook&lt;/h2&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;authorgroup&quot;&gt;&lt;div class=&quot;author&quot;&gt;&lt;h3 class=&quot;author&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Marcus&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Sch&#195;&#164;fer&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Project, Design and Implementation&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Software Engineer&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&lt;/
 a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;div class=&quot;othercredit&quot;&gt;&lt;h3 class=&quot;othercredit&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Thomas&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Schraitle&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Various text improvements, migration to DocBook&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Documentation Specialist&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&lt;/a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p class=&quot;releaseinfo&quot;&gt;KIWI Version 4.78&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;legalnotice&quot; title=&quot;License&quot;&gt;&lt;a name=&quot;id2522385&quot;&gt;&lt;/a&gt;&lt;p class=&quot;legalnotice-title&quot;&gt;&lt;b&gt;License&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or (at your option) version 1.3; with the Invariant
     Section being this copyright notice and license. A copy of the
diff --git a/doc/kiwi.pdf b/doc/kiwi.pdf
index 61ae248..3e5bc7a 100644
Binary files a/doc/kiwi.pdf and b/doc/kiwi.pdf differ
diff --git a/kiwi.pl b/kiwi.pl
index 26e2ddd..fea57e2 100755
--- a/kiwi.pl
+++ b/kiwi.pl
@@ -47,7 +47,7 @@ use KIWIXMLValidator;
 #============================================
 # Globals (Version)
 #--------------------------------------------
-our $Version       = &quot;4.77&quot;;
+our $Version       = &quot;4.78&quot;;
 our $Publisher     = &quot;SUSE LINUX Products GmbH&quot;;
 our $Preparer      = &quot;KIWI - <A HREF="http://kiwi.berlios.de">http://kiwi.berlios.de</A>&quot;;
 our $openSUSE      = &quot;<A HREF="http://download.opensuse.org">http://download.opensuse.org</A>&quot;;
diff --git a/modules/KIWIXMLValidator.pm b/modules/KIWIXMLValidator.pm
index f11cc1a..730a21c 100644
--- a/modules/KIWIXMLValidator.pm
+++ b/modules/KIWIXMLValidator.pm
@@ -506,6 +506,28 @@ sub __checkPreferencesDefinition {
 }
 
 #==========================================
+# __checkProfileNames
+#------------------------------------------
+sub __checkProfileNames {
+	# ...
+	# Check that a profile name does not contain whitespace.
+	# ---
+	my $this = shift;
+	my @profiles = $this-&gt;{systemTree} -&gt; getElementsByTagName('profile');
+	for my $prof (@profiles) {
+		my $name = $prof -&gt; getAttribute('name');
+		if ($name =~ /\s/) {
+			my $kiwi = $this -&gt; {kiwi};
+			my $msg = 'Name of a profile may not contain whitespace.';
+			$kiwi -&gt; error ($msg);
+			$kiwi -&gt; failed();
+			return undef;
+		}
+	}
+	return 1;
+}
+
+#==========================================
 # __checkReferencedProfDefined
 #------------------------------------------
 sub __checkReferencedProfDefined {
@@ -543,7 +565,7 @@ sub __checkReferencedProfDefined {
 			if (! $foundit) {
 				my $msg = 'Found reference to profile &quot;'
 				. $profile
-				  . '&quot; but this profile is not defined.';
+				. '&quot; but this profile is not defined.';
 				$kiwi -&gt; error ($msg);
 				$kiwi -&gt; failed ();
 				$status = undef;
@@ -737,6 +759,9 @@ sub __validateConsistency {
 	if (! $this -&gt; __checkPreferencesDefinition()) {
 		return undef;
 	}
+	if (! $this -&gt; __checkProfileNames()) {
+		return undef;
+	}
 	if (! $this -&gt; __checkReferencedProfDefined()) {
 		return undef;
 	}
diff --git a/rpm/kiwi.spec b/rpm/kiwi.spec
index af0b2bc..7b451f2 100644
--- a/rpm/kiwi.spec
+++ b/rpm/kiwi.spec
@@ -1,5 +1,5 @@
 #
-# spec file for package kiwi (Version 4.77)
+# spec file for package kiwi (Version 4.78)
 #
 # Copyright (c) 2010 SUSE LINUX Products GmbH, Nuernberg, Germany.
 #
@@ -64,7 +64,7 @@ Requires:       clicfs &gt;= 1.3.9
 %endif
 %endif
 Summary:        OpenSuSE - KIWI Image System
-Version:        4.77
+Version:        4.78
 Release:        1
 Group:          System/Management
 License:        GPLv2
diff --git a/doc/examples/suse-11.3/suse-xen-guest/config.xml b/tests/unit/data/xmlValidator/profileNameInvalid_1.xml
similarity index 69%
copy from doc/examples/suse-11.3/suse-xen-guest/config.xml
copy to tests/unit/data/xmlValidator/profileNameInvalid_1.xml
index d0c0df8..0b9c620 100644
--- a/doc/examples/suse-11.3/suse-xen-guest/config.xml
+++ b/tests/unit/data/xmlValidator/profileNameInvalid_1.xml
@@ -1,18 +1,29 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
-
-&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-xen-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-xen-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
-		&lt;specification&gt;openSUSE 11.3 xen guest system&lt;/specification&gt;
+		&lt;specification&gt;test profile name validation&lt;/specification&gt;
 	&lt;/description&gt;
+	&lt;profiles&gt;
+		&lt;profile name=&quot;xen Flavour&quot; description=&quot;VMX with Xen kernel&quot; import=&quot;true&quot;/&gt;
+	&lt;/profiles&gt;
 	&lt;preferences&gt;
+		&lt;type primary=&quot;true&quot; image=&quot;oem&quot; filesystem=&quot;ext4&quot; boot=&quot;oemboot/suse-11.3&quot; installiso=&quot;true&quot; installboot=&quot;install&quot;&gt; 
+			&lt;oemconfig&gt; 
+				&lt;oem-reboot&gt;true&lt;/oem-reboot&gt; 
+				&lt;oem-swap&gt;false&lt;/oem-swap&gt; 
+				&lt;oem-unattended&gt;true&lt;/oem-unattended&gt; 
+			&lt;/oemconfig&gt; 
+		&lt;/type&gt;
 		&lt;version&gt;1.1.2&lt;/version&gt;
 		&lt;packagemanager&gt;zypper&lt;/packagemanager&gt;
 		&lt;rpm-check-signatures&gt;false&lt;/rpm-check-signatures&gt;
 		&lt;rpm-force&gt;true&lt;/rpm-force&gt;
 		&lt;locale&gt;en_US&lt;/locale&gt;
 		&lt;keytable&gt;us.map.gz&lt;/keytable&gt;
+	&lt;/preferences&gt;
+	&lt;preferences profiles=&quot;xen Flavour&quot;&gt;
 		&lt;type image=&quot;vmx&quot; filesystem=&quot;ext3&quot; boot=&quot;vmxboot/suse-11.3&quot; bootprofile=&quot;xen&quot; bootkernel=&quot;xenk&quot;&gt;
 			&lt;machine memory=&quot;128&quot; domain=&quot;domU&quot;&gt;
 				&lt;vmdisk controller=&quot;ide&quot; id=&quot;0&quot; device=&quot;/dev/xvda&quot;/&gt;
@@ -30,12 +41,14 @@
 		&lt;package name=&quot;bootsplash-branding-openSUSE&quot; bootinclude=&quot;true&quot; bootdelete=&quot;true&quot;/&gt;
 		&lt;package name=&quot;gfxboot-branding-openSUSE&quot; bootinclude=&quot;true&quot; bootdelete=&quot;true&quot;/&gt;
 		&lt;package name=&quot;ifplugd&quot;/&gt;
-		&lt;package name=&quot;kernel-xen&quot; replaces=&quot;kernel-default&quot;/&gt;
 		&lt;package name=&quot;vim&quot;/&gt;
 		&lt;package name=&quot;xen-tools-domU&quot;/&gt;
 		&lt;package name=&quot;xen&quot;/&gt;
 		&lt;opensusePattern name=&quot;base&quot;/&gt;
 	&lt;/packages&gt;
+	&lt;packages type=&quot;image&quot; profiles=&quot;xen Flavour&quot;&gt;
+		&lt;package name=&quot;kernel-xen&quot; replaces=&quot;kernel-default&quot;/&gt;
+	&lt;/packages&gt;
 	&lt;packages type=&quot;bootstrap&quot;&gt;
 		&lt;package name=&quot;filesystem&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
diff --git a/doc/examples/suse-11.3/suse-xen-guest/config.xml b/tests/unit/data/xmlValidator/profileNameValid_1.xml
similarity index 69%
copy from doc/examples/suse-11.3/suse-xen-guest/config.xml
copy to tests/unit/data/xmlValidator/profileNameValid_1.xml
index d0c0df8..1d2e4b1 100644
--- a/doc/examples/suse-11.3/suse-xen-guest/config.xml
+++ b/tests/unit/data/xmlValidator/profileNameValid_1.xml
@@ -1,18 +1,29 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
-
-&lt;image schemaversion=&quot;5.2&quot; name=&quot;suse-11.3-xen-guest&quot;&gt;
+&lt;image schemaversion=&quot;5.1&quot; name=&quot;suse-11.3-xen-guest&quot;&gt;
 	&lt;description type=&quot;system&quot;&gt;
 		&lt;author&gt;Marcus Sch&#195;&#164;fer&lt;/author&gt;
 		&lt;contact&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&lt;/contact&gt;
-		&lt;specification&gt;openSUSE 11.3 xen guest system&lt;/specification&gt;
+		&lt;specification&gt;test profile name validation&lt;/specification&gt;
 	&lt;/description&gt;
+	&lt;profiles&gt;
+		&lt;profile name=&quot;xenFlavour&quot; description=&quot;VMX with Xen kernel&quot; import=&quot;true&quot;/&gt;
+	&lt;/profiles&gt;
 	&lt;preferences&gt;
+		&lt;type primary=&quot;true&quot; image=&quot;oem&quot; filesystem=&quot;ext4&quot; boot=&quot;oemboot/suse-11.3&quot; installiso=&quot;true&quot; installboot=&quot;install&quot;&gt; 
+			&lt;oemconfig&gt; 
+				&lt;oem-reboot&gt;true&lt;/oem-reboot&gt; 
+				&lt;oem-swap&gt;false&lt;/oem-swap&gt; 
+				&lt;oem-unattended&gt;true&lt;/oem-unattended&gt; 
+			&lt;/oemconfig&gt; 
+		&lt;/type&gt;
 		&lt;version&gt;1.1.2&lt;/version&gt;
 		&lt;packagemanager&gt;zypper&lt;/packagemanager&gt;
 		&lt;rpm-check-signatures&gt;false&lt;/rpm-check-signatures&gt;
 		&lt;rpm-force&gt;true&lt;/rpm-force&gt;
 		&lt;locale&gt;en_US&lt;/locale&gt;
 		&lt;keytable&gt;us.map.gz&lt;/keytable&gt;
+	&lt;/preferences&gt;
+	&lt;preferences profiles=&quot;xenFlavour&quot;&gt;
 		&lt;type image=&quot;vmx&quot; filesystem=&quot;ext3&quot; boot=&quot;vmxboot/suse-11.3&quot; bootprofile=&quot;xen&quot; bootkernel=&quot;xenk&quot;&gt;
 			&lt;machine memory=&quot;128&quot; domain=&quot;domU&quot;&gt;
 				&lt;vmdisk controller=&quot;ide&quot; id=&quot;0&quot; device=&quot;/dev/xvda&quot;/&gt;
@@ -30,12 +41,14 @@
 		&lt;package name=&quot;bootsplash-branding-openSUSE&quot; bootinclude=&quot;true&quot; bootdelete=&quot;true&quot;/&gt;
 		&lt;package name=&quot;gfxboot-branding-openSUSE&quot; bootinclude=&quot;true&quot; bootdelete=&quot;true&quot;/&gt;
 		&lt;package name=&quot;ifplugd&quot;/&gt;
-		&lt;package name=&quot;kernel-xen&quot; replaces=&quot;kernel-default&quot;/&gt;
 		&lt;package name=&quot;vim&quot;/&gt;
 		&lt;package name=&quot;xen-tools-domU&quot;/&gt;
 		&lt;package name=&quot;xen&quot;/&gt;
 		&lt;opensusePattern name=&quot;base&quot;/&gt;
 	&lt;/packages&gt;
+	&lt;packages type=&quot;image&quot; profiles=&quot;xenFlavour&quot;&gt;
+		&lt;package name=&quot;kernel-xen&quot; replaces=&quot;kernel-default&quot;/&gt;
+	&lt;/packages&gt;
 	&lt;packages type=&quot;bootstrap&quot;&gt;
 		&lt;package name=&quot;filesystem&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
diff --git a/tests/unit/lib/Test/xmlValidator.pm b/tests/unit/lib/Test/xmlValidator.pm
index c9cbedd..e4661d4 100644
--- a/tests/unit/lib/Test/xmlValidator.pm
+++ b/tests/unit/lib/Test/xmlValidator.pm
@@ -468,6 +468,33 @@ sub test_preferenceUnique {
 }
 
 #==========================================
+# test_profileName
+#------------------------------------------
+sub test_profileName {
+	# ...
+	# Test that the profile name convention is enforced properly.
+	# ---
+	my $this = shift;
+	my @invalidConfigs = $this -&gt; __getInvalidFiles('profileName');
+	for my $iConfFile (@invalidConfigs) {
+		my $validator = $this -&gt; __getValidator($iConfFile);
+		$validator -&gt; validate();
+		my $kiwi = $this -&gt; {kiwi};
+		my $msg = $kiwi -&gt; getMessage();
+		my $expectedMsg = 'Name of a profile may not contain whitespace.';
+		$this -&gt; assert_str_equals($expectedMsg, $msg);
+		my $msgT = $kiwi -&gt; getMessageType();
+		$this -&gt; assert_str_equals('error', $msgT);
+		my $state = $kiwi -&gt; getState();
+		$this -&gt; assert_str_equals('failed', $state);
+		# Test this condition last to get potential error messages
+		$this -&gt; assert_not_null($validator);
+	}
+	my @validConfigs = $this -&gt; __getValidFiles('profileName');
+	$this -&gt; __verifyValid(@validConfigs);
+}
+
+#==========================================
 # test_profileReferenceExist
 #------------------------------------------
 sub test_profileReferenceExist {


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003103.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 4f593b22118e24d1feb2feef363914b8f23ab1f7
</A></li>
	<LI>Next message: <A HREF="003106.html">[Kiwi-devel] Google summer of code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3105">[ date ]</a>
              <a href="thread.html#3105">[ thread ]</a>
              <a href="subject.html#3105">[ subject ]</a>
              <a href="author.html#3105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
