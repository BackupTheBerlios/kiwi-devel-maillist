<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. e4c2c6b3d9fc957195b897f33c8246acf1f0d93a
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-374-SuSE-11-1-SLE-SP-Devel%2C%0A%09updated.%20e4c2c6b3d9fc957195b897f33c8246acf1f0d93a&In-Reply-To=%3C200912141333.nBEDXcS0022735%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001693.html">
   <LINK REL="Next"  HREF="001695.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. e4c2c6b3d9fc957195b897f33c8246acf1f0d93a</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-374-SuSE-11-1-SLE-SP-Devel%2C%0A%09updated.%20e4c2c6b3d9fc957195b897f33c8246acf1f0d93a&In-Reply-To=%3C200912141333.nBEDXcS0022735%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-374-SuSE-11-1-SLE-SP-Devel,	updated. e4c2c6b3d9fc957195b897f33c8246acf1f0d93a">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Mon Dec 14 14:33:38 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001693.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 42cbf60d78be7aed683957087405d1ca6eb48c94
</A></li>
        <LI>Next message: <A HREF="001695.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 5ff6a383f15ed7acfe07ade488e388d91188668b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1694">[ date ]</a>
              <a href="thread.html#1694">[ thread ]</a>
              <a href="subject.html#1694">[ subject ]</a>
              <a href="author.html#1694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, KIWI-374-SuSE-11-1-SLE-SP-Devel has been updated
       via  e4c2c6b3d9fc957195b897f33c8246acf1f0d93a (commit)
       via  89cdf8699de587b0bf81d2791e429b8d53163fd8 (commit)
       via  25d3b2be60ba164e06b260eb7b9caf196658013f (commit)
      from  137edfed9c1f4cac37d25e0c7e8e5075b4283bdf (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit e4c2c6b3d9fc957195b897f33c8246acf1f0d93a
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Mon Dec 14 13:49:25 2009 +0100

    - fixed password salt creation

commit 89cdf8699de587b0bf81d2791e429b8d53163fd8
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Mon Dec 14 11:20:51 2009 +0100

    - added kiwi-tools packs

commit 25d3b2be60ba164e06b260eb7b9caf196658013f
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Mon Dec 14 11:19:55 2009 +0100

    - show disk size value in MB and only if &gt; 0 (bnc #562190)
    - put install progress information into dialog (bnc #562185)
    - track restored files in percentage (bnc #562188)

-----------------------------------------------------------------------

Summary of changes:
diff --git a/kiwi.pl b/kiwi.pl
index 730b07a..63c93a7 100755
--- a/kiwi.pl
+++ b/kiwi.pl
@@ -196,7 +196,7 @@ our $PackageManager;        # package manager to use for this image
 our $FSBlockSize;           # filesystem block size
 our $FSInodeSize;           # filesystem inode size
 our $FSJournalSize;         # filesystem journal size
-our $FSMaxMountCount;       # filesystem (ext2-4) max mount count between fs checks
+our $FSMaxMountCount;       # filesystem (ext2-4) max mount count between checks
 our $FSCheckInterval;       # filesystem (ext2-4) max interval between fs checks
 our $FSInodeRatio;          # filesystem bytes/inode ratio
 our $Verbosity = 0;         # control the verbosity level
@@ -1233,13 +1233,6 @@ sub main {
 		$boot -&gt; cleanTmp();
 		$code = kiwiExit (0); return $code;
 	}
-
-	#==========================================
-	# Create crypted password
-	#------------------------------------------
-	if (defined $CreatePassword) {
-		createPassword();
-	}
 	return 1;
 }
 
@@ -1345,6 +1338,12 @@ sub init {
 	if (! defined $FSInodeRatio) {
 		$FSInodeRatio = 16384;
 	}
+	#==========================================
+	# non root task: Create crypted password
+	#------------------------------------------
+	if (defined $CreatePassword) {
+		createPassword();
+	}
 	#========================================
 	# non root task: create inst source
 	#----------------------------------------
@@ -2179,12 +2178,17 @@ sub createPassword {
 	# users sections. The crypt() call requires root rights because
 	# dm-crypt is used to access the crypto pool
 	# ----
+	my @legal_enc = ('.', '/', '0'..'9', 'A'..'Z', 'a'..'z');
 	if (! defined $kiwi) {
 		$kiwi = new KIWILog(&quot;tiny&quot;);
 	}
 	my $word2 = 2;
 	my $word1 = 1;
-	my $salt  = (getpwuid ($&lt;))[1];
+	my $tmp = (time + $$) % 65536;
+	my $salt;
+	srand ($tmp);
+	$salt = $legal_enc[sprintf &quot;%u&quot;, rand (@legal_enc)];
+	$salt.= $legal_enc[sprintf &quot;%u&quot;, rand (@legal_enc)];
 	while ($word1 ne $word2) {
 		$kiwi -&gt; info (&quot;Enter Password: &quot;);
 		system &quot;stty -echo&quot;;
diff --git a/locale/ar/LC_MESSAGES/kiwi.po b/locale/ar/LC_MESSAGES/kiwi.po
index 5b9d3ba..e529974 100644
--- a/locale/ar/LC_MESSAGES/kiwi.po
+++ b/locale/ar/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;&#216;&#170;&#217;&#133;&#216;&#170; &#216;&#167;&#216;&#179;&#216;&#170;&#216;&#185;&#216;&#167;&#216;&#175;&#216;&#169; %2 &#217;&#133;&#217;&#132;&#217;&#129;&#216;&#167;&#216;&#170; &#217;&#133;&#217;&#134; %1...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#217;&#134;&#216;&#185;&#217;&#133;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/cs/LC_MESSAGES/kiwi.po b/locale/cs/LC_MESSAGES/kiwi.po
index dcf6fbb..1c95c31 100644
--- a/locale/cs/LC_MESSAGES/kiwi.po
+++ b/locale/cs/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;Po&#196;&#141;et obnoven&#195;&#189;ch soubor&#197;&#175;: %1 z %2&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Ano&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/de/LC_MESSAGES/kiwi.po b/locale/de/LC_MESSAGES/kiwi.po
index ad1f675..6658d12 100644
--- a/locale/de/LC_MESSAGES/kiwi.po
+++ b/locale/de/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 Dateien aus %2 wiederhergestellt&#226;&#128;&#166;&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Ja&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/el/LC_MESSAGES/kiwi.po b/locale/el/LC_MESSAGES/kiwi.po
index a0757a2..f796cfb 100644
--- a/locale/el/LC_MESSAGES/kiwi.po
+++ b/locale/el/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;&#206;&#136;&#206;&#179;&#206;&#185;&#206;&#189;&#206;&#181; &#206;&#181;&#207;&#128;&#206;&#177;&#206;&#189;&#206;&#177;&#207;&#134;&#206;&#191;&#207;&#129;&#206;&#172; %1 &#206;&#177;&#207;&#129;&#207;&#135;&#206;&#181;&#206;&#175;&#207;&#137;&#206;&#189; &#206;&#177;&#207;&#128;&#207;&#140; %2...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#206;&#157;&#206;&#177;&#206;&#185;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/es/LC_MESSAGES/kiwi.po b/locale/es/LC_MESSAGES/kiwi.po
index 84ee262..6a197bc 100644
--- a/locale/es/LC_MESSAGES/kiwi.po
+++ b/locale/es/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 de %2 archivos restaurados...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;S&#195;&#173;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/fi/LC_MESSAGES/kiwi.po b/locale/fi/LC_MESSAGES/kiwi.po
index 4f84b14..1f708e3 100644
--- a/locale/fi/LC_MESSAGES/kiwi.po
+++ b/locale/fi/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;Palautettiin %1 tiedostoa kohteesta %2...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Kyll&#195;&#164;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/fr/LC_MESSAGES/kiwi.po b/locale/fr/LC_MESSAGES/kiwi.po
index cd6f300..fffed29 100644
--- a/locale/fr/LC_MESSAGES/kiwi.po
+++ b/locale/fr/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 fichiers de %2 restaur&#195;&#169;s...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Oui&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/hu/LC_MESSAGES/kiwi.po b/locale/hu/LC_MESSAGES/kiwi.po
index 43d35df..cbc8115 100644
--- a/locale/hu/LC_MESSAGES/kiwi.po
+++ b/locale/hu/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 f&#195;&#161;jl helyre&#195;&#161;ll&#195;&#173;tva (&#195;&#182;sszesen: %2)...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Igen&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/it/LC_MESSAGES/kiwi.po b/locale/it/LC_MESSAGES/kiwi.po
index abe0509..e0714c9 100644
--- a/locale/it/LC_MESSAGES/kiwi.po
+++ b/locale/it/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 file su %2 ripristinati...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;S&#195;&#172;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/ja/LC_MESSAGES/kiwi.po b/locale/ja/LC_MESSAGES/kiwi.po
index 65802b8..4aa834f 100644
--- a/locale/ja/LC_MESSAGES/kiwi.po
+++ b/locale/ja/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%2 &#227;&#129;&#139;&#227;&#130;&#137;&#227;&#129;&#174; %1  &#229;&#128;&#139;&#227;&#129;&#174;&#227;&#131;&#149;&#227;&#130;&#161;&#227;&#130;&#164;&#227;&#131;&#171;&#227;&#129;&#140;&#229;&#190;&#169;&#229;&#133;&#131;&#227;&#129;&#149;&#227;&#130;&#140;&#227;&#129;&#190;&#227;&#129;&#151;&#227;&#129;&#159;...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#227;&#129;&#175;&#227;&#129;&#132;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/kiwi-template/kiwi.pot b/locale/kiwi-template/kiwi.pot
index e307a3b..58db0f4 100644
--- a/locale/kiwi-template/kiwi.pot
+++ b/locale/kiwi-template/kiwi.pot
@@ -47,6 +47,9 @@ msgstr &quot;&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&quot;
 
@@ -67,3 +70,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/ko/LC_MESSAGES/kiwi.po b/locale/ko/LC_MESSAGES/kiwi.po
index 2bfdd10..aaaa0c8 100644
--- a/locale/ko/LC_MESSAGES/kiwi.po
+++ b/locale/ko/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%2&#236;&#151;&#144;&#236;&#132;&#156; %1&#234;&#176;&#156;&#236;&#157;&#152; &#237;&#140;&#140;&#236;&#157;&#188;&#236;&#157;&#180; &#235;&#179;&#181;&#236;&#155;&#144;&#235;&#144;&#152;&#236;&#151;&#136;&#236;&#138;&#181;&#235;&#139;&#136;&#235;&#139;&#164;&#226;&#128;&#166;&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#236;&#152;&#136;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/nl/LC_MESSAGES/kiwi.po b/locale/nl/LC_MESSAGES/kiwi.po
index 29843f4..ec318c4 100644
--- a/locale/nl/LC_MESSAGES/kiwi.po
+++ b/locale/nl/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 bestanden van %2 hersteld&#226;&#128;&#166;&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Ja&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/pl/LC_MESSAGES/kiwi.po b/locale/pl/LC_MESSAGES/kiwi.po
index 0f18e27..e3e6f7b 100644
--- a/locale/pl/LC_MESSAGES/kiwi.po
+++ b/locale/pl/LC_MESSAGES/kiwi.po
@@ -46,6 +46,9 @@ msgstr &quot;Liczba przywr&#195;&#179;conych plik&#195;&#179;w: %1 z %2...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Tak&quot;
 
@@ -66,3 +69,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/pt_BR/LC_MESSAGES/kiwi.po b/locale/pt_BR/LC_MESSAGES/kiwi.po
index 3e89f25..f003d50 100644
--- a/locale/pt_BR/LC_MESSAGES/kiwi.po
+++ b/locale/pt_BR/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 arquivos de %2 foram recuperados...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Sim&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/ru/LC_MESSAGES/kiwi.po b/locale/ru/LC_MESSAGES/kiwi.po
index ee72553..717f06f 100644
--- a/locale/ru/LC_MESSAGES/kiwi.po
+++ b/locale/ru/LC_MESSAGES/kiwi.po
@@ -46,6 +46,9 @@ msgstr &quot;&#208;&#146;&#208;&#190;&#209;&#129;&#209;&#129;&#209;&#130;&#208;&#176;&#208;&#189;&#208;&#190;&#208;&#178;&#208;&#187;&#208;&#181;&#208;&#189;&#208;&#190; &#209;&#132;&#208;&#176;&#208;&#185;&#208;&#187;&#208;&#190;&#208;&#178; &#208;&#184;&#208;&#183; &#208;&#184;&#209;&#129;&#209;&#130;&#208;&#190;&#209;&#135;&#208;&#189;&#208;&#184;&#208;&#186;&#208;&#176; %2: %1.&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#208;&#148;&#208;&#176;&quot;
 
@@ -66,3 +69,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/sv/LC_MESSAGES/kiwi.po b/locale/sv/LC_MESSAGES/kiwi.po
index 76dc835..8e8edb9 100644
--- a/locale/sv/LC_MESSAGES/kiwi.po
+++ b/locale/sv/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1 filer fr&#195;&#165;n %2 har &#195;&#165;terst&#195;&#164;llts...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Ja&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/tr/LC_MESSAGES/kiwi.po b/locale/tr/LC_MESSAGES/kiwi.po
index ba19f8f..c4fa996 100644
--- a/locale/tr/LC_MESSAGES/kiwi.po
+++ b/locale/tr/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;%1/%2 dosya geri y&#195;&#188;klendi...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;Evet&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/uk/LC_MESSAGES/kiwi.po b/locale/uk/LC_MESSAGES/kiwi.po
index 8cd5f4e..26bcbde 100644
--- a/locale/uk/LC_MESSAGES/kiwi.po
+++ b/locale/uk/LC_MESSAGES/kiwi.po
@@ -46,6 +46,9 @@ msgstr &quot;%1 &#209;&#132;&#208;&#176;&#208;&#185;&#208;&#187;&#209;&#150;&#208;&#178; &#209;&#150;&#208;&#183; %2 &#208;&#178;&#209;&#150;&#208;&#180;&#208;&#189;&#208;&#190;&#208;&#178;&#208;&#187;&#208;&#181;&#208;&#189;&#208;&#190;...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#208;&#162;&#208;&#176;&#208;&#186;&quot;
 
@@ -66,3 +69,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/zh_CN/LC_MESSAGES/kiwi.po b/locale/zh_CN/LC_MESSAGES/kiwi.po
index 6e67bd8..4948ef3 100644
--- a/locale/zh_CN/LC_MESSAGES/kiwi.po
+++ b/locale/zh_CN/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;&#229;&#183;&#178;&#230;&#129;&#162;&#229;&#164;&#141; %1 &#228;&#184;&#170;&#230;&#150;&#135;&#228;&#187;&#182;&#239;&#188;&#140;&#229;&#133;&#177; %2 &#228;&#184;&#170;&#230;&#150;&#135;&#228;&#187;&#182;...&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#230;&#152;&#175;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/locale/zh_TW/LC_MESSAGES/kiwi.po b/locale/zh_TW/LC_MESSAGES/kiwi.po
index 1dcf749..ae1e276 100644
--- a/locale/zh_TW/LC_MESSAGES/kiwi.po
+++ b/locale/zh_TW/LC_MESSAGES/kiwi.po
@@ -45,6 +45,9 @@ msgstr &quot;&#229;&#183;&#178;&#233;&#130;&#132;&#229;&#142;&#159; %2 &#228;&#184;&#173;&#231;&#154;&#132; %1 &#229;&#128;&#139;&#230;&#170;&#148;&#230;&#161;&#136;&#226;&#128;&#166;&quot;
 msgid &quot;backing up: %1...&quot;
 msgstr &quot;&quot;
 
+msgid &quot;restoring: %1...&quot;
+msgstr &quot;&quot;
+
 msgid &quot;Yes&quot;
 msgstr &quot;&#230;&#152;&#175;&quot;
 
@@ -65,3 +68,9 @@ msgstr &quot;&quot;
 
 msgid &quot;Please pull out the install USB stick before continuing&quot;
 msgstr &quot;&quot;
+
+msgid &quot;Installation...&quot;
+msgstr &quot;&quot;
+
+msgid &quot;Loading %1&quot;
+msgstr &quot;&quot;
diff --git a/modules/KIWILinuxRC.sh b/modules/KIWILinuxRC.sh
index f8f427d..0697759 100644
--- a/modules/KIWILinuxRC.sh
+++ b/modules/KIWILinuxRC.sh
@@ -4806,6 +4806,8 @@ function selectLanguage {
 		getText &quot;Do you want to start the System-Recovery ?&quot;)
 	export TEXT_RECOVERYTITLE=$(
 		getText &quot;Restoring base operating system...&quot;)
+	export TEXT_INSTALLTITLE=$(
+		getText &quot;Installation...&quot;)
 	export TEXT_CDPULL=$(
 		getText &quot;Please eject the install CD/DVD before continuing&quot;)
 	export TEXT_USBPULL=$(
diff --git a/rpm/kiwi.changes b/rpm/kiwi.changes
index dde4010..82f9c0b 100644
--- a/rpm/kiwi.changes
+++ b/rpm/kiwi.changes
@@ -1,4 +1,12 @@
 -------------------------------------------------------------------
+Mon Dec 14 11:17:31 CET 2009 - <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>
+
+- show disk size value in MB and only if &gt; 0 (bnc #562190)
+- put install progress information into dialog (bnc #562185)
+- track restored files in percentage (bnc #562188)
+- fixed password salt creation
+
+-------------------------------------------------------------------
 Fri Dec 11 15:07:52 CET 2009 - <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>
 
 - added adaptec-firmware to iso/net and oemboot (bnc #562224)
diff --git a/system/boot/ix86/oemboot/suse-dump b/system/boot/ix86/oemboot/suse-dump
index 9222c96..dde7a40 100755
--- a/system/boot/ix86/oemboot/suse-dump
+++ b/system/boot/ix86/oemboot/suse-dump
@@ -78,10 +78,13 @@ function OEMInstall {
 	count=0
 	for i in $deviceDisks;do
 		dsize=`partitionSize $i`
-		Echo -b &quot;Disk $count -&gt; $i [ $dsize KByte ]&quot;
-		deviceArray[$count]=$i
-		deviceDSize[$count]=$dsize
-		count=`expr $count + 1`
+		dsizeMB=`expr $dsize / 1024`
+		if [ &quot;$dsizeMB&quot; -gt 0 ];then
+			Echo -b &quot;Disk $count -&gt; $i [ $dsizeMB MB ]&quot;
+			deviceArray[$count]=$i
+			deviceDSize[$count]=$dsize
+			count=`expr $count + 1`
+		fi
 	done
 	if [ &quot;$count&quot; = &quot;1&quot; ];then
 		#======================================
@@ -100,13 +103,16 @@ function OEMInstall {
 			count=0
 			for i in $deviceDisks;do
 				dsize=`partitionSize $i`
-				dname=`getDiskID $i`
-				dname=`basename $dname | cut -c1-20`&quot;...&quot;
-				if [ $count = 0 ];then
-					dpara=&quot;$i \&quot;$dname [ $dsize KByte ]\&quot; on&quot;
-					count=1
-				else
-					dpara=&quot;$dpara $i \&quot;$dname [ $dsize KByte ]\&quot; off&quot;
+				dsizeMB=`expr $dsize / 1024`
+				if [ &quot;$dsizeMB&quot; -gt 0 ];then
+					dname=`getDiskID $i`
+					dname=`basename $dname | cut -c1-20`&quot;...&quot;
+					if [ $count = 0 ];then
+						dpara=&quot;$i \&quot;$dname [ $dsizeMB MB ]\&quot; on&quot;
+						count=1
+					else
+						dpara=&quot;$dpara $i \&quot;$dname [ $dsizeMB MB ]\&quot; off&quot;
+					fi
 				fi
 			done
 			instDisk=$(runInteractive \
@@ -233,16 +239,39 @@ function OEMInstall {
 		dump=&quot;gzip -cd $imageName&quot;
 	fi
 	if [ -x /usr/bin/dcounter ];then
-		errorLogStop
-		dump=&quot;$dump | dcounter -s $needMByte&quot;
+		progressBaseName=$(basename $imageName)
+		TEXT_LOAD=$(getText &quot;Loading %1&quot; $progressBaseName)
+		dump=&quot;$dump | dcounter -s $needMByte -l \&quot;$TEXT_LOAD \&quot;&quot;
 	fi
-	Echo -n &quot;Loading $imageName [$imageDevice] &quot;
-	if ! eval $dump | dd bs=32k of=$imageDevice &amp;&gt;/dev/null; then
-		systemException \
-			&quot;Failed to install image: $imageName -&gt; $imageDevice&quot; \
-		&quot;reboot&quot;
+	Echo &quot;Loading $imageName [$imageDevice] &quot;
+	if [ -x /usr/bin/dcounter ];then
+		mkfifo /progress; errorLogStop
+		(
+			if ! eval $dump 2&gt;/progress | dd bs=32k of=$imageDevice &amp;&gt;/dev/null
+			then
+				errorLogContinue
+				systemException \
+					&quot;Failed to install image: $imageName -&gt; $imageDevice&quot; \
+				&quot;reboot&quot;
+			fi
+		)&amp;
+		echo &quot;cat /progress | dialog \
+			--backtitle \&quot;$TEXT_INSTALLTITLE\&quot; \
+			--progressbox 3 65
+		&quot; &gt; /tmp/progress.sh
+		if [ -e /dev/fb0 ];then
+			fbiterm -m $UFONT -- bash -e /tmp/progress.sh
+		else
+			bash -e /tmp/progress.sh
+		fi
+		clear
+	else
+		if ! eval $dump | dd bs=32k of=$imageDevice &amp;&gt;/dev/null; then
+			systemException \
+				&quot;Failed to install image: $imageName -&gt; $imageDevice&quot; \
+			&quot;reboot&quot;
+		fi
 	fi
-	echo
 	if [ -x /usr/bin/dcounter ];then
 		errorLogContinue
 	fi
diff --git a/system/boot/ix86/oemboot/suse-linuxrc b/system/boot/ix86/oemboot/suse-linuxrc
index 7d2cb13..fffa785 100755
--- a/system/boot/ix86/oemboot/suse-linuxrc
+++ b/system/boot/ix86/oemboot/suse-linuxrc
@@ -449,7 +449,10 @@ if [ ! -z &quot;$KIWI_RECOVERY&quot; ];then
 		while kill -0 $rPID &amp;&gt;/dev/null;do
 			rReady=$(cat /tmp/rFiles | wc -l)
 			#Echo -e -n &quot;$rReady files from $rFiles restored...\r&quot;
-			getText &quot;%1 files from %2 restored...&quot; $rReady $rFiles &gt; /progress
+			rFDone=$(echo &quot;scale=4; $rFiles / $rReady&quot; | bc)
+			rFDone=$(echo &quot;scale=0; 100 / $rFDone&quot; | bc)
+			getText &quot;restoring: %1...&quot; &quot;$rFDone%&quot; &gt; /progress
+			#getText &quot;%1 files from %2 restored...&quot; $rReady $rFiles &gt; /progress
 			sleep 1
 		done
 		#======================================
diff --git a/system/suse-repo/suse-sle11-repo/kiwi-tools-3.74-5.4.i586.rpm b/system/suse-repo/suse-sle11-repo/kiwi-tools-3.85-0.1.i586.rpm
similarity index 89%
rename from system/suse-repo/suse-sle11-repo/kiwi-tools-3.74-5.4.i586.rpm
rename to system/suse-repo/suse-sle11-repo/kiwi-tools-3.85-0.1.i586.rpm
index a152c50..81c657f 100644
Binary files a/system/suse-repo/suse-sle11-repo/kiwi-tools-3.74-5.4.i586.rpm and b/system/suse-repo/suse-sle11-repo/kiwi-tools-3.85-0.1.i586.rpm differ
diff --git a/system/suse-repo/suse-sle11-repo/kiwi-tools-3.74-5.4.x86_64.rpm b/system/suse-repo/suse-sle11-repo/kiwi-tools-3.85-0.1.x86_64.rpm
similarity index 89%
rename from system/suse-repo/suse-sle11-repo/kiwi-tools-3.74-5.4.x86_64.rpm
rename to system/suse-repo/suse-sle11-repo/kiwi-tools-3.85-0.1.x86_64.rpm
index 5052e29..97ef1a4 100644
Binary files a/system/suse-repo/suse-sle11-repo/kiwi-tools-3.74-5.4.x86_64.rpm and b/system/suse-repo/suse-sle11-repo/kiwi-tools-3.85-0.1.x86_64.rpm differ
diff --git a/tools/dcounter/dcounter.c b/tools/dcounter/dcounter.c
index 1e9ad1a..d091378 100644
--- a/tools/dcounter/dcounter.c
+++ b/tools/dcounter/dcounter.c
@@ -5,11 +5,14 @@
 
 int main(int argc, char **argv) {
 	int i, percent = -1;
+	int newline = 0;
+	char prefix[512];
 	unsigned cnt = 0, blk_size = 1024*1024, blk_cnt = 0, size = 0;
 	ssize_t r, w, p;
 	char buf[1024*1024];
 	argv++; argc--;
-	if (argc &gt; 1 &amp;&amp; !strcmp(*argv, &quot;-s&quot;)) {
+	memset (prefix,'\0',512);
+	if (argc &gt; 1 &amp;&amp; strstr(*argv, &quot;-s&quot;)) {
 		i = atoi(argv[1]);
 		if (i) {
 			size = i;
@@ -17,6 +20,12 @@ int main(int argc, char **argv) {
 		argv += 2;
 		argc -= 2;
 	}
+	if (argc == 2 &amp;&amp; strstr(*argv, &quot;-l&quot;)) {
+		newline = 1;
+		strncpy (prefix,*(argv+1),strlen(*(argv+1)));
+		argv += 2;
+		argc -= 2;
+	}
 	if (!size) {
 		fprintf(stderr, &quot;no size in MB set\n&quot;);
 		return 1;
@@ -41,7 +50,11 @@ int main(int argc, char **argv) {
 			i = percent;
 			percent = (blk_cnt * 100) / size;
 			if(percent != i) {
-				fprintf(stderr, &quot;\x08\x08\x08\x08\x08\x08(%3d%%)&quot;, percent);
+				if (newline) {
+					fprintf(stderr, &quot;%s(%3d%%)\n&quot;,prefix, percent);
+				} else {
+					fprintf(stderr, &quot;\x08\x08\x08\x08\x08\x08(%3d%%)&quot;, percent);
+				}
 			}
 		}
 	}


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001693.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 42cbf60d78be7aed683957087405d1ca6eb48c94
</A></li>
	<LI>Next message: <A HREF="001695.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 5ff6a383f15ed7acfe07ade488e388d91188668b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1694">[ date ]</a>
              <a href="thread.html#1694">[ thread ]</a>
              <a href="subject.html#1694">[ subject ]</a>
              <a href="author.html#1694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
