<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. fdc499667973dc67c661b2d22d8c7b7141657f1e
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-April/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20fdc499667973dc67c661b2d22d8c7b7141657f1e&In-Reply-To=%3C20110405072929.AEF08480CFD%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003297.html">
   <LINK REL="Next"  HREF="003299.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. fdc499667973dc67c661b2d22d8c7b7141657f1e</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20fdc499667973dc67c661b2d22d8c7b7141657f1e&In-Reply-To=%3C20110405072929.AEF08480CFD%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. fdc499667973dc67c661b2d22d8c7b7141657f1e">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Tue Apr  5 09:29:29 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003297.html">[Kiwi-devel] alpha sort options for command line arg processing
</A></li>
        <LI>Next message: <A HREF="003299.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. b9e41c5c00137db6efef35ba9465debfa363d827
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3298">[ date ]</a>
              <a href="thread.html#3298">[ thread ]</a>
              <a href="subject.html#3298">[ subject ]</a>
              <a href="author.html#3298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, master has been updated
       via  fdc499667973dc67c661b2d22d8c7b7141657f1e (commit)
       via  642e2e61b07234ece31d759fc886fd99f49068dd (commit)
      from  ba8ac290984e01ff41a652ba2ce13dcfc9b29b30 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit fdc499667973dc67c661b2d22d8c7b7141657f1e
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Tue Apr 5 09:28:47 2011 +0200

    - alpha sort the option parser

commit 642e2e61b07234ece31d759fc886fd99f49068dd
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Tue Apr 5 09:27:58 2011 +0200

    - fixed kiwiCommandLine unit test according to the changes
      done in commit: 7954bf3bed5845f4ece4991ef17f8f2978c8fbee

-----------------------------------------------------------------------

Summary of changes:
diff --git a/kiwi.pl b/kiwi.pl
index 10674bf..c52653c 100755
--- a/kiwi.pl
+++ b/kiwi.pl
@@ -1170,83 +1170,83 @@ sub init {
 	# get options and call non-root tasks
 	#------------------------------------------
 	my $result = GetOptions(
-		&quot;version&quot;               =&gt; \$Version,
-		&quot;recycle-root&quot;          =&gt; \$RecycleRoot,
-		&quot;targetdevice=s&quot;        =&gt; \$targetDevice,
-		&quot;v|verbose+&quot;            =&gt; \$Verbosity,
-		&quot;logfile=s&quot;             =&gt; \$LogFile,
-		&quot;build|b=s&quot;             =&gt; \$Build,
-		&quot;init-cache=s&quot;          =&gt; \$InitCache,
-		&quot;prepare|p=s&quot;           =&gt; \$Prepare,
+		&quot;add-package=s&quot;         =&gt; \@AddPackage,
+		&quot;add-pattern=s&quot;         =&gt; \@AddPattern,
 		&quot;add-profile=s&quot;         =&gt; \@Profiles,
-		&quot;migrate|m=s&quot;           =&gt; \$Migrate,
-		&quot;notemplate&quot;            =&gt; \$MigrateNoTemplate,
-		&quot;nofiles&quot;               =&gt; \$MigrateNoFiles,
-		&quot;exclude|e=s&quot;           =&gt; \@Exclude,
-		&quot;skip=s&quot;                =&gt; \@Skip,
-		&quot;list|l&quot;                =&gt; \&amp;listImage,
-		&quot;create|c=s&quot;            =&gt; \$Create,
-		&quot;create-instsource=s&quot;   =&gt; \$CreateInstSource,
-		&quot;ignore-repos&quot;          =&gt; \$IgnoreRepos,
 		&quot;add-repo=s&quot;            =&gt; \@AddRepository,
-		&quot;add-repotype=s&quot;        =&gt; \@AddRepositoryType,
 		&quot;add-repoalias=s&quot;       =&gt; \@AddRepositoryAlias,
 		&quot;add-repopriority=i&quot;    =&gt; \@AddRepositoryPriority,
-		&quot;add-package=s&quot;         =&gt; \@AddPackage,
-		&quot;add-pattern=s&quot;         =&gt; \@AddPattern,
+		&quot;add-repotype=s&quot;        =&gt; \@AddRepositoryType,
+		&quot;bootcd=s&quot;              =&gt; \$BootCD,
+		&quot;bootusb=s&quot;             =&gt; \$BootUSB,
+		&quot;bootvm=s&quot;              =&gt; \$BootVMDisk,
+		&quot;bootvm-disksize=s&quot;     =&gt; \$BootVMSize,
+		&quot;bootvm-system=s&quot;       =&gt; \$BootVMSystem,
+		&quot;build|b=s&quot;             =&gt; \$Build,
 		&quot;cache=s&quot;               =&gt; \$ImageCache,
+		&quot;check-config=s&quot;        =&gt; \$CheckConfig,
+		&quot;check-kernel&quot;          =&gt; \$CheckKernel,
+		&quot;clone|o=s&quot;             =&gt; \$Clone,
+		&quot;convert=s&quot;             =&gt; \$Convert,
+		&quot;create|c=s&quot;            =&gt; \$Create,
+		&quot;create-instsource=s&quot;   =&gt; \$CreateInstSource,
+		&quot;createhash=s&quot;          =&gt; \$CreateHash,
+		&quot;createpassword&quot;        =&gt; \$CreatePassword,
+		&quot;debug&quot;                 =&gt; \$Debug,
 		&quot;del-package=s&quot;         =&gt; \@RemovePackage,
-		&quot;set-repo=s&quot;            =&gt; \$SetRepository,
-		&quot;set-repotype=s&quot;        =&gt; \$SetRepositoryType,
-		&quot;set-repoalias=s&quot;       =&gt; \$SetRepositoryAlias,
-		&quot;set-repopriority=i&quot;    =&gt; \$SetRepositoryPriority,
-		&quot;type|t=s&quot;              =&gt; \$SetImageType,
-		&quot;upgrade|u=s&quot;           =&gt; \$Upgrade,
 		&quot;destdir|d=s&quot;           =&gt; \$Destination,
-		&quot;root|r=s&quot;              =&gt; \$RootTree,
-		&quot;bootvm=s&quot;              =&gt; \$BootVMDisk,
-		&quot;bootvm-system=s&quot;       =&gt; \$BootVMSystem,
-		&quot;bootvm-disksize=s&quot;     =&gt; \$BootVMSize,
+		&quot;exclude|e=s&quot;           =&gt; \@Exclude,
+		&quot;fat-storage=i&quot;         =&gt; \$FatStorage,
+		&quot;force-new-root&quot;        =&gt; \$ForceNewRoot,
+		&quot;format|f=s&quot;            =&gt; \$Format,
+		&quot;fs-blocksize=i&quot;        =&gt; \$FSBlockSize,
+		&quot;fs-check-interval=i&quot;   =&gt; \$FSCheckInterval,
+		&quot;fs-inoderatio=i&quot;       =&gt; \$FSInodeRatio,
+		&quot;fs-inodesize=i&quot;        =&gt; \$FSInodeSize,
+		&quot;fs-journalsize=i&quot;      =&gt; \$FSJournalSize,
+		&quot;fs-max-mount-count=i&quot;  =&gt; \$FSMaxMountCount,
+		&quot;grub-chainload&quot;        =&gt; \$GrubChainload,
+		&quot;gzip-cmd=s&quot;            =&gt; \$GzipCmd,
+		&quot;help|h&quot;                =&gt; \$Help,
+		&quot;ignore-repos&quot;          =&gt; \$IgnoreRepos,
+		&quot;info|i=s&quot;              =&gt; \$ListXMLInfo,
+		&quot;init-cache=s&quot;          =&gt; \$InitCache,
 		&quot;installcd=s&quot;           =&gt; \$InstallCD,
 		&quot;installcd-system=s&quot;    =&gt; \$InstallCDSystem,
-		&quot;bootcd=s&quot;              =&gt; \$BootCD,
-		&quot;bootusb=s&quot;             =&gt; \$BootUSB,
 		&quot;installstick=s&quot;        =&gt; \$InstallStick,
 		&quot;installstick-system=s&quot; =&gt; \$InstallStickSystem,
-		&quot;strip|s&quot;               =&gt; \$StripImage,
-		&quot;createpassword&quot;        =&gt; \$CreatePassword,
 		&quot;isocheck&quot;              =&gt; \$ISOCheck,
-		&quot;createhash=s&quot;          =&gt; \$CreateHash,
-		&quot;setup-splash=s&quot;        =&gt; \$SetupSplash,
-		&quot;force-new-root&quot;        =&gt; \$ForceNewRoot,
-		&quot;nocolor&quot;               =&gt; \$NoColor,
+		&quot;list|l&quot;                =&gt; \&amp;listImage,
 		&quot;log-port=i&quot;            =&gt; \$LogPort,
-		&quot;gzip-cmd=s&quot;            =&gt; \$GzipCmd,
+		&quot;logfile=s&quot;             =&gt; \$LogFile,
+		&quot;lvm&quot;                   =&gt; \$LVM,
+		&quot;mbrid=o&quot;               =&gt; \$MBRID,
+		&quot;migrate|m=s&quot;           =&gt; \$Migrate,
+		&quot;nocolor&quot;               =&gt; \$NoColor,
+		&quot;nofiles&quot;               =&gt; \$MigrateNoFiles,
+		&quot;notemplate&quot;            =&gt; \$MigrateNoTemplate,
 		&quot;package-manager=s&quot;     =&gt; \$PackageManager,
+		&quot;partitioner=s&quot;         =&gt; \$Partitioner,
 		&quot;prebuiltbootimage=s&quot;   =&gt; \$PrebuiltBootImage,
 		&quot;prechroot-call=s&quot;      =&gt; \$PreChrootCall,
-		&quot;info|i=s&quot;              =&gt; \$ListXMLInfo,
+		&quot;prepare|p=s&quot;           =&gt; \$Prepare,
+		&quot;recycle-root&quot;          =&gt; \$RecycleRoot,
+		&quot;root|r=s&quot;              =&gt; \$RootTree,
 		&quot;select=s&quot;              =&gt; \@ListXMLInfoSelection,
-		&quot;fs-blocksize=i&quot;        =&gt; \$FSBlockSize,
-		&quot;fs-journalsize=i&quot;      =&gt; \$FSJournalSize,
-		&quot;fs-inodesize=i&quot;        =&gt; \$FSInodeSize,
-		&quot;fs-inoderatio=i&quot;       =&gt; \$FSInodeRatio,
-		&quot;fs-max-mount-count=i&quot;  =&gt; \$FSMaxMountCount,
-		&quot;fs-check-interval=i&quot;   =&gt; \$FSCheckInterval,
-		&quot;fat-storage=i&quot;         =&gt; \$FatStorage,
-		&quot;partitioner=s&quot;         =&gt; \$Partitioner,
+		&quot;set-repo=s&quot;            =&gt; \$SetRepository,
+		&quot;set-repoalias=s&quot;       =&gt; \$SetRepositoryAlias,
+		&quot;set-repopriority=i&quot;    =&gt; \$SetRepositoryPriority,
+		&quot;set-repotype=s&quot;        =&gt; \$SetRepositoryType,
+		&quot;setup-splash=s&quot;        =&gt; \$SetupSplash,
+		&quot;skip=s&quot;                =&gt; \@Skip,
+		&quot;strip|s&quot;               =&gt; \$StripImage,
 		&quot;target-arch=s&quot;         =&gt; \$TargetArch,
-		&quot;check-kernel&quot;          =&gt; \$CheckKernel,
-		&quot;clone|o=s&quot;             =&gt; \$Clone,
-		&quot;lvm&quot;                   =&gt; \$LVM,
-		&quot;grub-chainload&quot;        =&gt; \$GrubChainload,
-		&quot;format|f=s&quot;            =&gt; \$Format,
-		&quot;convert=s&quot;             =&gt; \$Convert,
-		&quot;check-config=s&quot;        =&gt; \$CheckConfig,
+		&quot;targetdevice=s&quot;        =&gt; \$targetDevice,
+		&quot;type|t=s&quot;              =&gt; \$SetImageType,
+		&quot;upgrade|u=s&quot;           =&gt; \$Upgrade,
+		&quot;v|verbose+&quot;            =&gt; \$Verbosity,
+		&quot;version&quot;               =&gt; \$Version,
 		&quot;yes|y&quot;                 =&gt; \$defaultAnswer,
-		&quot;debug&quot;                 =&gt; \$Debug,
-		&quot;mbrid=o&quot;               =&gt; \$MBRID,
-		&quot;help|h&quot;                =&gt; \$Help
 	);
 	#========================================
 	# check if repositories are to be added
diff --git a/tests/unit/lib/Test/kiwiCommandLine.pm b/tests/unit/lib/Test/kiwiCommandLine.pm
index f40fed0..50a8173 100644
--- a/tests/unit/lib/Test/kiwiCommandLine.pm
+++ b/tests/unit/lib/Test/kiwiCommandLine.pm
@@ -183,6 +183,30 @@ sub test_cmdAddRepos_mismatchRepoAli {
 }
 
 #==========================================
+# test_cmdAddRepos_mismatchRepoAli_empty
+#------------------------------------------
+sub test_cmdAddRepos_mismatchRepoAli_empty {
+	# ...
+	# Test the AdditionalRepo storage
+	# ---
+	my $this = shift;
+	my $kiwi = $this -&gt; {kiwi};
+	my $cmd = $this -&gt; __getCmdObj();
+	# Provide improper argument
+	my @repos = ('os11.3', 'os11.3-non-oss');
+	my @alias = ();
+	my @types = ('yast2', 'rpm-md');
+	my $res = $cmd -&gt; setAdditionalRepos(\@repos, \@alias, undef, \@types);
+	my $msg = $kiwi -&gt; getMessage();
+	$this -&gt; assert_str_equals('No messages set', $msg);
+	my $msgT = $kiwi -&gt; getMessageType();
+	$this -&gt; assert_str_equals('none', $msgT);
+	my $state = $kiwi -&gt; getState();
+	$this -&gt; assert_str_equals('No state set', $state);
+	$this -&gt; assert_not_null($res);
+}
+
+#==========================================
 # test_cmdAddRepos_mismatchRepoPrio
 #------------------------------------------
 sub test_cmdAddRepos_mismatchRepoPrio {
@@ -209,6 +233,30 @@ sub test_cmdAddRepos_mismatchRepoPrio {
 }
 
 #==========================================
+# test_cmdAddRepos_mismatchRepoPrio_empty
+#------------------------------------------
+sub test_cmdAddRepos_mismatchRepoPrio_empty {
+	# ...
+	# Test the AdditionalRepo storage
+	# ---
+	my $this = shift;
+	my $kiwi = $this -&gt; {kiwi};
+	my $cmd = $this -&gt; __getCmdObj();
+	# Provide improper argument
+	my @repos = ('os11.3', 'os11.3-non-oss');
+	my @prio = ();
+	my @types = ('yast2', 'rpm-dir');
+	my $res = $cmd -&gt; setAdditionalRepos(\@repos, undef, \@prio, \@types);
+	my $msg = $kiwi -&gt; getMessage();
+	$this -&gt; assert_str_equals('No messages set', $msg);
+	my $msgT = $kiwi -&gt; getMessageType();
+	$this -&gt; assert_str_equals('none', $msgT);
+	my $state = $kiwi -&gt; getState();
+	$this -&gt; assert_str_equals('No state set', $state);
+	$this -&gt; assert_not_null($res);
+}
+
+#==========================================
 # test_cmdAddRepos_mismatchRepoTypes
 #------------------------------------------
 sub test_cmdAddRepos_mismatchRepoTypes {


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003297.html">[Kiwi-devel] alpha sort options for command line arg processing
</A></li>
	<LI>Next message: <A HREF="003299.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. b9e41c5c00137db6efef35ba9465debfa363d827
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3298">[ date ]</a>
              <a href="thread.html#3298">[ thread ]</a>
              <a href="subject.html#3298">[ subject ]</a>
              <a href="author.html#3298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
