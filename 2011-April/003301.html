<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-480-SuSE-11.4-Devel,	updated. 63b171ee477a63681c518136492e718df49b32b2
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-April/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-480-SuSE-11.4-Devel%2C%0A%09updated.%2063b171ee477a63681c518136492e718df49b32b2&In-Reply-To=%3C20110405131803.15D62480D01%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003300.html">
   <LINK REL="Next"  HREF="003302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-480-SuSE-11.4-Devel,	updated. 63b171ee477a63681c518136492e718df49b32b2</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%0A%09KIWI-480-SuSE-11.4-Devel%2C%0A%09updated.%2063b171ee477a63681c518136492e718df49b32b2&In-Reply-To=%3C20110405131803.15D62480D01%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-480-SuSE-11.4-Devel,	updated. 63b171ee477a63681c518136492e718df49b32b2">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Tue Apr  5 15:18:02 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003300.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 3bbc82d010ae217c05722848a9a27c9d1cf06fca
</A></li>
        <LI>Next message: <A HREF="003302.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 08ae07ae91b04f2236424a3d4509b7524867a0db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3301">[ date ]</a>
              <a href="thread.html#3301">[ thread ]</a>
              <a href="subject.html#3301">[ subject ]</a>
              <a href="author.html#3301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, KIWI-480-SuSE-11.4-Devel has been updated
       via  63b171ee477a63681c518136492e718df49b32b2 (commit)
      from  3edc4aa1bbb54caa49d3bd558c8d53d39b361a17 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 63b171ee477a63681c518136492e718df49b32b2
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Tue Apr 5 15:12:49 2011 +0200

    - if the target-device option is used kiwi normally doesn't
      create a disk image file until the image file is created
      by a dump off from the target device. SuSE studio requires
      the size information of the target disk before the dump off
      happens, because it creates that target device internally.
      Therefore this patch makes sure that a image disk file is
      created before the dump off happens

-----------------------------------------------------------------------

Summary of changes:
diff --git a/modules/KIWIBoot.pm b/modules/KIWIBoot.pm
index 95dc0cf..3cb4458 100644
--- a/modules/KIWIBoot.pm
+++ b/modules/KIWIBoot.pm
@@ -1763,6 +1763,13 @@ sub setupBootDisk {
 			}
 		} else {
 			$kiwi -&gt; info (&quot;Using disk device $haveDiskDevice...&quot;);
+			# /.../
+			# the following is required for suse studio to determine the
+			# size of the image target disk. It has no relevance for the
+			# standard build process and is therefore called without any
+			# return value check. 
+			qxx (&quot;qemu-img create $diskname $vmsize 2&gt;&amp;1&quot;);
+			# ----
 			$this-&gt;{loop} = $haveDiskDevice;
 			if (! -b $this-&gt;{loop}) {
 				$kiwi -&gt; failed ();


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003300.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 3bbc82d010ae217c05722848a9a27c9d1cf06fca
</A></li>
	<LI>Next message: <A HREF="003302.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 08ae07ae91b04f2236424a3d4509b7524867a0db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3301">[ date ]</a>
              <a href="thread.html#3301">[ thread ]</a>
              <a href="subject.html#3301">[ subject ]</a>
              <a href="author.html#3301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
