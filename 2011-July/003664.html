<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. ebd8893921c64778cfbbfc49f1a949aeeb024ac7
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20ebd8893921c64778cfbbfc49f1a949aeeb024ac7&In-Reply-To=%3C20110729100013.9FD5C481291%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003663.html">
   <LINK REL="Next"  HREF="003665.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. ebd8893921c64778cfbbfc49f1a949aeeb024ac7</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20ebd8893921c64778cfbbfc49f1a949aeeb024ac7&In-Reply-To=%3C20110729100013.9FD5C481291%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. ebd8893921c64778cfbbfc49f1a949aeeb024ac7">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Fri Jul 29 12:00:13 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003663.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. bc50e69543a06052fbada19fe2be510b95ab8d7e
</A></li>
        <LI>Next message: <A HREF="003665.html">[Kiwi-devel] kiwi build dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3664">[ date ]</a>
              <a href="thread.html#3664">[ thread ]</a>
              <a href="subject.html#3664">[ subject ]</a>
              <a href="author.html#3664">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, master has been updated
       via  ebd8893921c64778cfbbfc49f1a949aeeb024ac7 (commit)
       via  5f2f4cb84a956baf436977bbaaa184277ea67f73 (commit)
       via  3dca1baf854f23cca6ce80c39b677e615708b321 (commit)
      from  bc50e69543a06052fbada19fe2be510b95ab8d7e (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit ebd8893921c64778cfbbfc49f1a949aeeb024ac7
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Fri Jul 29 11:23:00 2011 +0200

    - v4.94.1 released

commit 5f2f4cb84a956baf436977bbaaa184277ea67f73
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Fri Jul 29 11:36:58 2011 +0200

    - cleanup splash directory in case of call interruption

commit 3dca1baf854f23cca6ce80c39b677e615708b321
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Fri Jul 29 11:19:22 2011 +0200

    - added support for download and verification progress
      information for pxe (netboot) images (bnc #708711)

-----------------------------------------------------------------------

Summary of changes:
diff --git a/doc/KIWI::config.sh.1 b/doc/KIWI::config.sh.1
index a60b417..1ed97e0 100644
--- a/doc/KIWI::config.sh.1
+++ b/doc/KIWI::config.sh.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi::config.sh
 .\&quot;    Author: Marcus Sch&#195;&#164;fer &lt;ms (AT) suse.de&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 07/26/2011
+.\&quot;      Date: Created: 07/29/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: KIWI 4.93
+.\&quot;    Source: KIWI 4.94
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI::CONFIG\&amp;.SH&quot; &quot;1&quot; &quot;Created: 07/26/2011&quot; &quot;KIWI 4\&amp;.93&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI::CONFIG\&amp;.SH&quot; &quot;1&quot; &quot;Created: 07/29/2011&quot; &quot;KIWI 4\&amp;.94&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/KIWI::images.sh.1 b/doc/KIWI::images.sh.1
index 85bbdca..765b945 100644
--- a/doc/KIWI::images.sh.1
+++ b/doc/KIWI::images.sh.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi::images.sh
 .\&quot;    Author: Marcus Sch&#195;&#164;fer &lt;ms (AT) suse.de&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 07/26/2011
+.\&quot;      Date: Created: 07/29/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: KIWI 4.93
+.\&quot;    Source: KIWI 4.94
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI::IMAGES\&amp;.SH&quot; &quot;1&quot; &quot;Created: 07/26/2011&quot; &quot;KIWI 4\&amp;.93&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI::IMAGES\&amp;.SH&quot; &quot;1&quot; &quot;Created: 07/29/2011&quot; &quot;KIWI 4\&amp;.94&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/KIWI::kiwirc.1 b/doc/KIWI::kiwirc.1
index ededf3a..ab43716 100644
--- a/doc/KIWI::kiwirc.1
+++ b/doc/KIWI::kiwirc.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi::kiwirc
 .\&quot;    Author: Robert Schweikert &lt;rschweikert (AT) novell.com&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 07/26/2011
+.\&quot;      Date: Created: 07/29/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: &gt;KIWI 4.93
+.\&quot;    Source: &gt;KIWI 4.94
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI::KIWIRC&quot; &quot;1&quot; &quot;Created: 07/26/2011&quot; &quot;&gt;KIWI 4\&amp;.93&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI::KIWIRC&quot; &quot;1&quot; &quot;Created: 07/29/2011&quot; &quot;&gt;KIWI 4\&amp;.94&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/docbook/Revision.txt b/doc/docbook/Revision.txt
index 21165a1..c596bfc 100644
--- a/doc/docbook/Revision.txt
+++ b/doc/docbook/Revision.txt
@@ -1 +1 @@
-4.93
\ No newline at end of file
+4.94
\ No newline at end of file
diff --git a/doc/kiwi.1 b/doc/kiwi.1
index b8d1650..f4203b9 100644
--- a/doc/kiwi.1
+++ b/doc/kiwi.1
@@ -2,12 +2,12 @@
 .\&quot;     Title: kiwi
 .\&quot;    Author: Marcus Schaefer &lt;ms (AT) suse.de&gt;
 .\&quot; Generator: DocBook XSL Stylesheets v1.76.1-RC1 &lt;<A HREF="http://docbook.sf.net/">http://docbook.sf.net/</A>&gt;
-.\&quot;      Date: Created: 07/26/2011
+.\&quot;      Date: Created: 07/29/2011
 .\&quot;    Manual: KIWI Manualpage
-.\&quot;    Source: KIWI 4.93
+.\&quot;    Source: KIWI 4.94
 .\&quot;  Language: English
 .\&quot;
-.TH &quot;KIWI&quot; &quot;1&quot; &quot;Created: 07/26/2011&quot; &quot;KIWI 4\&amp;.93&quot; &quot;KIWI Manualpage&quot;
+.TH &quot;KIWI&quot; &quot;1&quot; &quot;Created: 07/29/2011&quot; &quot;KIWI 4\&amp;.94&quot; &quot;KIWI Manualpage&quot;
 .\&quot; -----------------------------------------------------------------
 .\&quot; * Define some portability stuff
 .\&quot; -----------------------------------------------------------------
diff --git a/doc/kiwi.html b/doc/kiwi.html
index fe056d6..92ec7b4 100644
--- a/doc/kiwi.html
+++ b/doc/kiwi.html
@@ -1,4 +1,4 @@
-&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;title&gt;openSUSE-KIWI Image System&lt;/title&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;susebooks.css&quot;&gt;&lt;meta name=&quot;generator&quot; content=&quot;DocBook XSL Stylesheets V1.76.1-RC1&quot;&gt;&lt;/head&gt;&lt;body bgcolor=&quot;white&quot; text=&quot;black&quot; link=&quot;#0000FF&quot; vlink=&quot;#840084&quot; alink=&quot;#0000FF&quot;&gt;&lt;div lang=&quot;en&quot; class=&quot;book&quot; title=&quot;openSUSE-KIWI Image System&quot;&gt;&lt;div class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h1 class=&quot;title&quot;&gt;&lt;a name=&quot;id2491810&quot;&gt;&lt;/a&gt;openSUSE-KIWI Image System&lt;/h1&gt;&lt;/div&gt;&lt;div&gt;&lt;h2 class=&quot;subtitle&quot;&gt;Cookbook&lt;/h2&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;authorgroup&quot;&gt;&lt;div class=&quot;author&quot;&gt;&lt;h3 class=&quot;author&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Marcus&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Sch&#195;&#164;fer&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Project, Design and Implementation&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Software Engineer&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&lt;/
 a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;div class=&quot;othercredit&quot;&gt;&lt;h3 class=&quot;othercredit&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Thomas&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Schraitle&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Various text improvements, migration to DocBook&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Documentation Specialist&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&lt;/a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p class=&quot;releaseinfo&quot;&gt;KIWI Version 4.93&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;legalnotice&quot; title=&quot;License&quot;&gt;&lt;a name=&quot;id2527071&quot;&gt;&lt;/a&gt;&lt;p class=&quot;legalnotice-title&quot;&gt;&lt;b&gt;License&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Permission is granted to copy, distribute and/or modify this
+&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&lt;title&gt;openSUSE-KIWI Image System&lt;/title&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;susebooks.css&quot;&gt;&lt;meta name=&quot;generator&quot; content=&quot;DocBook XSL Stylesheets V1.76.1-RC1&quot;&gt;&lt;/head&gt;&lt;body bgcolor=&quot;white&quot; text=&quot;black&quot; link=&quot;#0000FF&quot; vlink=&quot;#840084&quot; alink=&quot;#0000FF&quot;&gt;&lt;div lang=&quot;en&quot; class=&quot;book&quot; title=&quot;openSUSE-KIWI Image System&quot;&gt;&lt;div class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h1 class=&quot;title&quot;&gt;&lt;a name=&quot;id2491810&quot;&gt;&lt;/a&gt;openSUSE-KIWI Image System&lt;/h1&gt;&lt;/div&gt;&lt;div&gt;&lt;h2 class=&quot;subtitle&quot;&gt;Cookbook&lt;/h2&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;authorgroup&quot;&gt;&lt;div class=&quot;author&quot;&gt;&lt;h3 class=&quot;author&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Marcus&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Sch&#195;&#164;fer&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Project, Design and Implementation&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Software Engineer&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at suse.de</A>&lt;/
 a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;div class=&quot;othercredit&quot;&gt;&lt;h3 class=&quot;othercredit&quot;&gt;&lt;span class=&quot;firstname&quot;&gt;Thomas&lt;/span&gt; &lt;span class=&quot;surname&quot;&gt;Schraitle&lt;/span&gt;&lt;/h3&gt;&lt;span class=&quot;contrib&quot;&gt;Various text improvements, migration to DocBook&lt;/span&gt;&#194;&#160;&lt;div class=&quot;affiliation&quot;&gt;&lt;span class=&quot;jobtitle&quot;&gt;Documentation Specialist&lt;br&gt;&lt;/span&gt;&lt;span class=&quot;orgname&quot;&gt;SUSE LINUX Products GmbH&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;code class=&quot;email&quot;&gt;&lt;&lt;a class=&quot;email&quot; href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">toms at suse.de</A>&lt;/a&gt;&gt;&lt;/code&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p class=&quot;releaseinfo&quot;&gt;KIWI Version 4.94&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;div class=&quot;legalnotice&quot; title=&quot;License&quot;&gt;&lt;a name=&quot;id2527071&quot;&gt;&lt;/a&gt;&lt;p class=&quot;legalnotice-title&quot;&gt;&lt;b&gt;License&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or (at your option) version 1.3; with the Invariant
     Section being this copyright notice and license. A copy of the
diff --git a/doc/kiwi.pdf b/doc/kiwi.pdf
index 183b1e1..0147c51 100644
Binary files a/doc/kiwi.pdf and b/doc/kiwi.pdf differ
diff --git a/modules/KIWIGlobals.pm b/modules/KIWIGlobals.pm
index 6d297a2..50b6fbc 100644
--- a/modules/KIWIGlobals.pm
+++ b/modules/KIWIGlobals.pm
@@ -40,7 +40,7 @@ sub new {
 	# Globals (generic)
 	#------------------------------------------
 	my %data;
-	$data{Version}         = &quot;4.93.3&quot;;
+	$data{Version}         = &quot;4.94.1&quot;;
 	$data{Publisher}       = &quot;SUSE LINUX Products GmbH&quot;;
 	$data{Preparer}        = &quot;KIWI - <A HREF="http://kiwi.berlios.de">http://kiwi.berlios.de</A>&quot;;
 	$data{ConfigName}      = &quot;config.xml&quot;;
diff --git a/modules/KIWIImage.pm b/modules/KIWIImage.pm
index 101f4f8..5ea058f 100644
--- a/modules/KIWIImage.pm
+++ b/modules/KIWIImage.pm
@@ -4383,9 +4383,14 @@ sub makeLabel {
 sub DESTROY {
 	my $this = shift;
 	my $dirs = $this-&gt;{tmpdirs};
+	my $imageDest = $this-&gt;{imageDest};
+	my $spldir    = $imageDest.&quot;/splash&quot;;
 	foreach my $dir (@{$dirs}) {
 		qxx (&quot;rm -rf $dir 2&gt;&amp;1&quot;);
 	}
+	if (-d $spldir) {
+		qxx (&quot;rm -rf $spldir 2&gt;&amp;1&quot;);
+	}
 	return $this;
 }
 
diff --git a/modules/KIWILinuxRC.sh b/modules/KIWILinuxRC.sh
index aba978d..fe6b208 100644
--- a/modules/KIWILinuxRC.sh
+++ b/modules/KIWILinuxRC.sh
@@ -5046,6 +5046,8 @@ function fetchFile {
 	local host=$4
 	local type=$5
 	local chunk=$6
+	local dump
+	local call
 	if test -z &quot;$chunk&quot;;then
 		chunk=4k
 	fi
@@ -5069,36 +5071,50 @@ function fetchFile {
 		path=$(echo $path | sed -e s@\\.gz@@)
 		path=&quot;$path.gz&quot;
 	fi
+	#======================================
+	# setup progress meta information
+	#--------------------------------------
+	dump=&quot;dd bs=$chunk of=$dest&quot;
+	showProgress=0
+	if [ -x /usr/bin/dcounter ] &amp;&amp; [ -f /etc/image.md5 ];then
+		showProgress=1
+		read sum1 blocks blocksize zblocks zblocksize &lt; /etc/image.md5
+		needBytes=`expr $blocks \* $blocksize`
+		needMByte=`expr $needBytes / 1048576`
+		progressBaseName=$(basename $path)
+		TEXT_LOAD=$(getText &quot;Loading %1&quot; &quot;$progressBaseName&quot;)
+		dump=&quot;dcounter -s $needMByte -l \&quot;$TEXT_LOAD \&quot; 2&gt;/progress | $dump&quot;
+	fi
+	#======================================
+	# build download command
+	#--------------------------------------
 	case &quot;$type&quot; in
 		&quot;http&quot;)
 			if test &quot;$izip&quot; = &quot;compressed&quot;; then
-				curl -f <A HREF="http://$host/$path">http://$host/$path</A> 2&gt;$TRANSFER_ERRORS_FILE |\
-					gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | dd bs=$chunk of=$dest
+				call=&quot;curl -f <A HREF="http://$host/$path">http://$host/$path</A> 2&gt;$TRANSFER_ERRORS_FILE |\
+					gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | $dump&quot;
 			else
-				curl -f <A HREF="http://$host/$path">http://$host/$path</A> 2&gt; $TRANSFER_ERRORS_FILE |\
-					dd bs=$chunk of=$dest
+				call=&quot;curl -f <A HREF="http://$host/$path">http://$host/$path</A> 2&gt; $TRANSFER_ERRORS_FILE |\
+					$dump&quot;
 			fi
-			loadCode=$?
 			;;
 		&quot;https&quot;)
 			if test &quot;$izip&quot; = &quot;compressed&quot;; then
-				curl -f -k <A HREF="https://$host/$path">https://$host/$path</A> 2&gt;$TRANSFER_ERRORS_FILE |\
-					gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | dd bs=$chunk of=$dest
+				call=&quot;curl -f -k <A HREF="https://$host/$path">https://$host/$path</A> 2&gt;$TRANSFER_ERRORS_FILE |\
+					gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | $dump&quot;
 			else
-				curl -f -k <A HREF="https://$host/$path">https://$host/$path</A> 2&gt; $TRANSFER_ERRORS_FILE |\
-					dd bs=$chunk of=$dest
+				call=&quot;curl -f -k <A HREF="https://$host/$path">https://$host/$path</A> 2&gt; $TRANSFER_ERRORS_FILE |\
+					$dump&quot;
 			fi
-			loadCode=$?
 			;;
 		&quot;ftp&quot;)
 			if test &quot;$izip&quot; = &quot;compressed&quot;; then
-				curl <A HREF="ftp://$host/$path">ftp://$host/$path</A> 2&gt;$TRANSFER_ERRORS_FILE |\
-					gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | dd bs=$chunk of=$dest
+				call=&quot;curl <A HREF="ftp://$host/$path">ftp://$host/$path</A> 2&gt;$TRANSFER_ERRORS_FILE |\
+					gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | $dump&quot;
 			else
-				curl <A HREF="ftp://$host/$path">ftp://$host/$path</A> 2&gt; $TRANSFER_ERRORS_FILE |\
-					dd bs=$chunk of=$dest
+				call=&quot;curl <A HREF="ftp://$host/$path">ftp://$host/$path</A> 2&gt; $TRANSFER_ERRORS_FILE |\
+					$dump&quot;
 			fi
-			loadCode=$?
 			;;
 		&quot;tftp&quot;)
 			validateBlockSize
@@ -5113,23 +5129,49 @@ function fetchFile {
 			if test &quot;$izip&quot; = &quot;compressed&quot;; then
 				# mutlicast is disabled because you can't seek in a pipe
 				# atftp is disabled because it doesn't work with pipes
-				busybox tftp \
+				call=&quot;busybox tftp \
 					-b $imageBlkSize -g -r $path \
-					-l &gt;(gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | dd bs=$chunk of=$dest) \
-					$host 2&gt;&gt;$TRANSFER_ERRORS_FILE
+					-l &gt;(gzip -d 2&gt;&gt;$TRANSFER_ERRORS_FILE | $dump) \
+					$host 2&gt;&gt;$TRANSFER_ERRORS_FILE&quot;
 			else
-				atftp \
-					--option &quot;$multicast_atftp&quot;  \
-					--option &quot;blksize $imageBlkSize&quot; \
-					-g -r $path -l &gt;(dd bs=$chunk of=$dest) \
-					$host &amp;&gt; $TRANSFER_ERRORS_FILE
+				call=&quot;atftp \
+					--option \&quot;$multicast_atftp\&quot;  \
+					--option \&quot;blksize $imageBlkSize\&quot; \
+					-g -r $path -l &gt;($dump) \
+					$host &amp;&gt; $TRANSFER_ERRORS_FILE&quot;
 			fi
-			loadCode=$?
 			;;
 		*)
 			systemException &quot;Unknown download type: $type&quot; &quot;reboot&quot;
 			;;
 	esac
+	#======================================
+	# run the download
+	#--------------------------------------
+	if [ $showProgress -eq 1 ];then
+		test -e /progress || mkfifo /progress
+		errorLogStop
+		(
+			eval $call &amp;&gt;/dev/null
+			loadCode=$?
+		)&amp;
+		echo &quot;cat /progress | dialog \
+			--backtitle \&quot;$TEXT_INSTALLTITLE\&quot; \
+			--progressbox 3 65
+		&quot; &gt; /tmp/progress.sh
+		if [ -e /dev/fb0 ];then
+			fbiterm -m $UFONT -- bash -e /tmp/progress.sh
+		else
+			bash -e /tmp/progress.sh
+		fi
+		clear
+	else
+		eval $call
+		loadCode=$?
+	fi
+	if [ $showProgress -eq 1 ];then
+		errorLogContinue
+	fi
 	loadStatus=`cat $TRANSFER_ERRORS_FILE`
 	return $loadCode
 }
diff --git a/rpm/kiwi.spec b/rpm/kiwi.spec
index 30c8a77..6d909e5 100644
--- a/rpm/kiwi.spec
+++ b/rpm/kiwi.spec
@@ -1,5 +1,5 @@
 #
-# spec file for package kiwi (Version 4.93.3)
+# spec file for package kiwi (Version 4.94.1)
 #
 # Copyright (c) 2010 SUSE LINUX Products GmbH, Nuernberg, Germany.
 #
@@ -68,7 +68,7 @@ Requires:       clicfs &gt;= 1.3.9
 %endif
 %endif
 Summary:        OpenSuSE - KIWI Image System
-Version:        4.93.3
+Version:        4.94.1
 Release:        1
 Group:          System/Management
 License:        GPLv2
diff --git a/system/boot/ix86/netboot/suse-11.3/config.xml b/system/boot/ix86/netboot/suse-11.3/config.xml
index 2da633c..33b1cba 100644
--- a/system/boot/ix86/netboot/suse-11.3/config.xml
+++ b/system/boot/ix86/netboot/suse-11.3/config.xml
@@ -222,6 +222,9 @@
 		&lt;package name=&quot;filesystem&quot;/&gt;
 		&lt;package name=&quot;glibc&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext-runtime&quot;/&gt;
 	&lt;/packages&gt;
 	&lt;packages type=&quot;delete&quot; profiles=&quot;default,diskless,xen&quot;&gt;
 		&lt;package name=&quot;cracklib-dict-small&quot;/&gt;
diff --git a/system/boot/ix86/netboot/suse-11.4/config.xml b/system/boot/ix86/netboot/suse-11.4/config.xml
index 2df557a..066d587 100644
--- a/system/boot/ix86/netboot/suse-11.4/config.xml
+++ b/system/boot/ix86/netboot/suse-11.4/config.xml
@@ -226,6 +226,9 @@
 		&lt;package name=&quot;filesystem&quot;/&gt;
 		&lt;package name=&quot;glibc&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext-runtime&quot;/&gt;
 	&lt;/packages&gt;
 	&lt;packages type=&quot;delete&quot; profiles=&quot;default,diskless,xen&quot;&gt;
 		&lt;package name=&quot;cracklib-dict-small&quot;/&gt;
diff --git a/system/boot/ix86/netboot/suse-12.1/config.xml b/system/boot/ix86/netboot/suse-12.1/config.xml
index 52a19d6..42f70dd 100644
--- a/system/boot/ix86/netboot/suse-12.1/config.xml
+++ b/system/boot/ix86/netboot/suse-12.1/config.xml
@@ -226,6 +226,9 @@
 		&lt;package name=&quot;filesystem&quot;/&gt;
 		&lt;package name=&quot;glibc&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext-runtime&quot;/&gt;
 	&lt;/packages&gt;
 	&lt;packages type=&quot;delete&quot; profiles=&quot;default,diskless,xen&quot;&gt;
 		&lt;package name=&quot;cracklib-dict-small&quot;/&gt;
diff --git a/system/boot/ix86/netboot/suse-SLED10/config.xml b/system/boot/ix86/netboot/suse-SLED10/config.xml
index 2534066..4fdcb03 100644
--- a/system/boot/ix86/netboot/suse-SLED10/config.xml
+++ b/system/boot/ix86/netboot/suse-SLED10/config.xml
@@ -67,6 +67,9 @@
 	&lt;packages type=&quot;bootstrap&quot;&gt;
 		&lt;package name=&quot;bc&quot;/&gt;
 		&lt;package name=&quot;curl&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext&quot;/&gt;
 		&lt;package name=&quot;psmisc&quot;/&gt;
 		&lt;package name=&quot;iputils&quot;/&gt;
 		&lt;package name=&quot;atftp&quot;/&gt;
diff --git a/system/boot/ix86/netboot/suse-SLED11/config.xml b/system/boot/ix86/netboot/suse-SLED11/config.xml
index 84f925d..fe11cdb 100644
--- a/system/boot/ix86/netboot/suse-SLED11/config.xml
+++ b/system/boot/ix86/netboot/suse-SLED11/config.xml
@@ -211,6 +211,9 @@
 		&lt;package name=&quot;glibc&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
 		&lt;package name=&quot;openssl-certs&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext-runtime&quot;/&gt;
 	&lt;/packages&gt;
 	&lt;packages type=&quot;delete&quot; profiles=&quot;default,diskless,xen&quot;&gt;
 		&lt;package name=&quot;cracklib-dict-small&quot;/&gt;
diff --git a/system/boot/ix86/netboot/suse-SLES10/config.xml b/system/boot/ix86/netboot/suse-SLES10/config.xml
index 717e017..a089ee9 100644
--- a/system/boot/ix86/netboot/suse-SLES10/config.xml
+++ b/system/boot/ix86/netboot/suse-SLES10/config.xml
@@ -68,6 +68,9 @@
 		&lt;package name=&quot;bc&quot;/&gt;
 		&lt;package name=&quot;adaptec-firmware&quot;/&gt;
 		&lt;package name=&quot;curl&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext&quot;/&gt;
 		&lt;package name=&quot;psmisc&quot;/&gt;
 		&lt;package name=&quot;iputils&quot;/&gt;
 		&lt;package name=&quot;atftp&quot;/&gt;
diff --git a/system/boot/ix86/netboot/suse-SLES11/config.xml b/system/boot/ix86/netboot/suse-SLES11/config.xml
index abd3491..aaea6d7 100644
--- a/system/boot/ix86/netboot/suse-SLES11/config.xml
+++ b/system/boot/ix86/netboot/suse-SLES11/config.xml
@@ -212,6 +212,9 @@
 		&lt;package name=&quot;glibc&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
 		&lt;package name=&quot;openssl-certs&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext-runtime&quot;/&gt;
 	&lt;/packages&gt;
 	&lt;packages type=&quot;delete&quot; profiles=&quot;default,diskless,xen&quot;&gt;
 		&lt;package name=&quot;cracklib-dict-small&quot;/&gt;
diff --git a/system/boot/ix86/netboot/suse-linuxrc b/system/boot/ix86/netboot/suse-linuxrc
index 3c1c5d7..ce11fdc 100755
--- a/system/boot/ix86/netboot/suse-linuxrc
+++ b/system/boot/ix86/netboot/suse-linuxrc
@@ -458,13 +458,13 @@ then
 			# get image md5sum to be able to check for the size
 			# requirements if we are loading into RAM
 			# ---
+			IFS=$IFS_ORIG
 			fetchFile $imageMD5s /etc/image.md5 uncomp $imageServer
 			if test $loadCode != 0 || ! loadOK &quot;$loadStatus&quot;; then
 				systemException \
 					&quot;Download of $imageMD5s failed: $loadStatus&quot; \
 				&quot;reboot&quot;
 			fi
-			IFS=&quot; &quot;
 			read sum1 blocks blocksize zblocks zblocksize &lt; /etc/image.md5
 			if ! validateSize;then
 				systemException \
@@ -492,9 +492,35 @@ then
 			# check the md5sum of the downloaded data records
 			# ----
 			Echo &quot;Download complete, checking data...&quot;
-			dd if=$imageDevice bs=1024 2&gt;/dev/null |\
-				head --bytes=$((blocks * blocksize)) |\
-				md5sum - &gt; /etc/ireal.md5
+			verifyBytes=$((blocks * blocksize))
+			verifyMByte=$((verifyBytes / 1048576))
+			if [ -x /usr/bin/dcounter ];then
+				test -e /progress || mkfifo /progress
+				TEXT_VERIFY=$(getText &quot;Verifying %1&quot; $imageDevice)
+				echo &quot;$TEXT_VERIFY ( 0% )&quot; &gt; /progress &amp;
+				dump=&quot;cat $imageDevice&quot;
+				dump=&quot;$dump | dcounter -s $verifyMByte -l \&quot;$TEXT_VERIFY \&quot;&quot;
+				errorLogStop
+				(
+					eval $dump 2&gt;/progress |\
+						head --bytes=$verifyBytes | md5sum - &gt; /etc/ireal.md5
+				)&amp;
+				echo &quot;cat /progress | dialog \
+					--backtitle \&quot;$TEXT_INSTALLTITLE\&quot; \
+					--progressbox 3 65
+				&quot; &gt; /tmp/progress.sh
+				if [ -e /dev/fb0 ];then
+					fbiterm -m $UFONT -- bash -e /tmp/progress.sh
+				else
+					bash -e /tmp/progress.sh
+				fi
+				clear
+				errorLogContinue
+			else
+				dd if=$imageDevice bs=1024 |\
+					head --bytes=$verifyBytes |\
+					md5sum - &gt; /etc/ireal.md5
+			fi
 			read sum2 dumy &lt; /etc/ireal.md5
 			if test $sum1 = $sum2;then
 				Echo &quot;Image checksum test: fine :-)&quot;
@@ -514,7 +540,7 @@ then
 			Echo -b &quot;   TFTP server provides the same md5 sum as included&quot;
 			Echo -b &quot;   within the appropriate .md5 file for this image&quot;
 			echo
-			if test -z $DISK;then
+			if [ -z &quot;$DISK&quot; ];then
 			Echo -b &quot;4) ramdisk size is too small for the image:&quot;
 			Echo -b &quot;   check the ramdisk_size parameter of the PXE&quot;
 			Echo -b &quot;   configuration file on the TFTP server&quot;
@@ -527,7 +553,7 @@ then
 			Echo &quot;Retry to load image...&quot;
 			sleep 15
 		done
-		if test ! -z $DISK;then
+		if [ ! -z &quot;$DISK&quot; ];then
 			probeFileSystem $imageDevice
 			resizeFilesystem $imageDevice
 		fi
diff --git a/system/boot/ppc/netboot/suse-SLES11/config.xml b/system/boot/ppc/netboot/suse-SLES11/config.xml
index afcd033..316b788 100644
--- a/system/boot/ppc/netboot/suse-SLES11/config.xml
+++ b/system/boot/ppc/netboot/suse-SLES11/config.xml
@@ -212,6 +212,9 @@
 		&lt;package name=&quot;glibc&quot;/&gt;
 		&lt;package name=&quot;glibc-locale&quot;/&gt;
 		&lt;package name=&quot;openssl-certs&quot;/&gt;
+		&lt;package name=&quot;dialog&quot;/&gt;
+		&lt;package name=&quot;fbiterm&quot;/&gt;
+		&lt;package name=&quot;gettext-runtime&quot;/&gt;
 	&lt;/packages&gt;
 	&lt;packages type=&quot;delete&quot; profiles=&quot;default,diskless,xen,ppc64&quot;&gt;
 		&lt;package name=&quot;cracklib-dict-small&quot;/&gt;
diff --git a/system/boot/ppc/netboot/suse-linuxrc b/system/boot/ppc/netboot/suse-linuxrc
index f24fca3..cc5c3d7 100755
--- a/system/boot/ppc/netboot/suse-linuxrc
+++ b/system/boot/ppc/netboot/suse-linuxrc
@@ -458,13 +458,13 @@ then
 			# get image md5sum to be able to check for the size
 			# requirements if we are loading into RAM
 			# ---
+			IFS=$IFS_ORIG
 			fetchFile $imageMD5s /etc/image.md5 uncomp $imageServer
 			if test $loadCode != 0 || ! loadOK &quot;$loadStatus&quot;; then
 				systemException \
 					&quot;Download of $imageMD5s failed: $loadStatus&quot; \
 				&quot;reboot&quot;
 			fi
-			IFS=&quot; &quot;
 			read sum1 blocks blocksize zblocks zblocksize &lt; /etc/image.md5
 			if ! validateSize;then
 				systemException \
@@ -492,9 +492,35 @@ then
 			# check the md5sum of the downloaded data records
 			# ----
 			Echo &quot;Download complete, checking data...&quot;
-			dd if=$imageDevice bs=1024 2&gt;/dev/null |\
-				head --bytes=$((blocks * blocksize)) |\
-				md5sum - &gt; /etc/ireal.md5
+			verifyBytes=$((blocks * blocksize))
+			verifyMByte=$((verifyBytes / 1048576))
+			if [ -x /usr/bin/dcounter ];then
+				test -e /progress || mkfifo /progress
+				TEXT_VERIFY=$(getText &quot;Verifying %1&quot; $imageDevice)
+				echo &quot;$TEXT_VERIFY ( 0% )&quot; &gt; /progress &amp;
+				dump=&quot;cat $imageDevice&quot;
+				dump=&quot;$dump | dcounter -s $verifyMByte -l \&quot;$TEXT_VERIFY \&quot;&quot;
+				errorLogStop
+				(
+					eval $dump 2&gt;/progress |\
+						head --bytes=$verifyBytes | md5sum - &gt; /etc/ireal.md5
+				)&amp;
+				echo &quot;cat /progress | dialog \
+					--backtitle \&quot;$TEXT_INSTALLTITLE\&quot; \
+					--progressbox 3 65
+				&quot; &gt; /tmp/progress.sh
+				if [ -e /dev/fb0 ];then
+					fbiterm -m $UFONT -- bash -e /tmp/progress.sh
+				else
+					bash -e /tmp/progress.sh
+				fi
+				clear
+				errorLogContinue
+			else
+				dd if=$imageDevice bs=1024 |\
+					head --bytes=$verifyBytes |\
+					md5sum - &gt; /etc/ireal.md5
+			fi
 			read sum2 dumy &lt; /etc/ireal.md5
 			if test $sum1 = $sum2;then
 				Echo &quot;Image checksum test: fine :-)&quot;
@@ -514,7 +540,7 @@ then
 			Echo -b &quot;   TFTP server provides the same md5 sum as included&quot;
 			Echo -b &quot;   within the appropriate .md5 file for this image&quot;
 			echo
-			if test -z $DISK;then
+			if [ -z &quot;$DISK&quot; ];then
 			Echo -b &quot;4) ramdisk size is too small for the image:&quot;
 			Echo -b &quot;   check the ramdisk_size parameter of the PXE&quot;
 			Echo -b &quot;   configuration file on the TFTP server&quot;
@@ -527,7 +553,7 @@ then
 			Echo &quot;Retry to load image...&quot;
 			sleep 15
 		done
-		if test ! -z $DISK;then
+		if [ ! -z &quot;$DISK&quot; ];then
 			probeFileSystem $imageDevice
 			resizeFilesystem $imageDevice
 		fi


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003663.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. bc50e69543a06052fbada19fe2be510b95ab8d7e
</A></li>
	<LI>Next message: <A HREF="003665.html">[Kiwi-devel] kiwi build dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3664">[ date ]</a>
              <a href="thread.html#3664">[ thread ]</a>
              <a href="subject.html#3664">[ subject ]</a>
              <a href="author.html#3664">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
