<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] Guard against system impacting rm operation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-May/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20Guard%20against%20system%20impacting%20rm%20operation&In-Reply-To=%3C4DCAC617.9070208%40novell.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003403.html">
   <LINK REL="Next"  HREF="003405.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] Guard against system impacting rm operation</H1>
    <B>Robert Schweikert</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20Guard%20against%20system%20impacting%20rm%20operation&In-Reply-To=%3C4DCAC617.9070208%40novell.com%3E"
       TITLE="[Kiwi-devel] Guard against system impacting rm operation">rschweikert at novell.com
       </A><BR>
    <I>Wed May 11 19:23:35 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003403.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. c9c797b47cb4f785174dec004853d21d511fd090
</A></li>
        <LI>Next message: <A HREF="003405.html">[Kiwi-devel] CommandLine unit test fix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3404">[ date ]</a>
              <a href="thread.html#3404">[ thread ]</a>
              <a href="subject.html#3404">[ subject ]</a>
              <a href="author.html#3404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

The attached patch to the test framework fixes a problem that occurs 
when the test build directory is remove but mount points still exist. 
While most rm operations this attempts fail, some unfortunately succeed 
and have a negative impact on the running system. Unfortunately I 
learned about this the hard way :( .

The patch implements code that looks in /proc/mounts to see if mount 
points exist into the test directory. If yes an attempt is made to 
umount. The test directory is only removed if no mount points exist.

Robert


-- 
Robert Schweikert                           MAY THE SOURCE BE WITH YOU
SUSE-IBM Software Integration Center                   LINUX
Tech Lead
<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at novell.com</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">rschweikert at ca.ibm.com</A>
781-464-8147
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0005-test-directory-removal-only-if-no-mounts-exist.patch
Type: text/x-patch
Size: 1360 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/kiwi-devel/attachments/20110511/9b8dd44a/attachment.bin">https://lists.berlios.de/pipermail/kiwi-devel/attachments/20110511/9b8dd44a/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003403.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. c9c797b47cb4f785174dec004853d21d511fd090
</A></li>
	<LI>Next message: <A HREF="003405.html">[Kiwi-devel] CommandLine unit test fix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3404">[ date ]</a>
              <a href="thread.html#3404">[ thread ]</a>
              <a href="subject.html#3404">[ subject ]</a>
              <a href="author.html#3404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
