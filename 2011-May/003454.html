<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. fa903ac89ab2c1ca682988f602ce5ff1afcad6b5
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-devel/2011-May/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20fa903ac89ab2c1ca682988f602ce5ff1afcad6b5&In-Reply-To=%3C20110523085756.090744814E7%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003453.html">
   <LINK REL="Next"  HREF="003455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. fa903ac89ab2c1ca682988f602ce5ff1afcad6b5</H1>
    <B>marcus_schaefer at BerliOS</B> 
    <A HREF="mailto:kiwi-devel%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-devel%5D%20%5BGit%5DProject%20kiwi%20at%20BerliOS%20branch%2C%20master%2C%0A%09updated.%20fa903ac89ab2c1ca682988f602ce5ff1afcad6b5&In-Reply-To=%3C20110523085756.090744814E7%40sheep.berlios.de%3E"
       TITLE="[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. fa903ac89ab2c1ca682988f602ce5ff1afcad6b5">marcus_schaefer at mail.berlios.de
       </A><BR>
    <I>Mon May 23 10:57:55 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003453.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 17220572a86c4b66f3c03e72cd8194f696b1559b
</A></li>
        <LI>Next message: <A HREF="003455.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-485-SuSE-11-1-SLE-SP-Devel,	updated. 73120cd7a6f29eb743f81d8b0d359aaea476894f
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3454">[ date ]</a>
              <a href="thread.html#3454">[ thread ]</a>
              <a href="subject.html#3454">[ subject ]</a>
              <a href="author.html#3454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Project kiwi at BerliOS&quot;.

The branch, master has been updated
       via  fa903ac89ab2c1ca682988f602ce5ff1afcad6b5 (commit)
      from  17220572a86c4b66f3c03e72cd8194f696b1559b (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit fa903ac89ab2c1ca682988f602ce5ff1afcad6b5
Author: Marcus Sch&#195;&#164;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-devel">ms at novell.com</A>&gt;
Date:   Mon May 23 10:57:26 2011 +0200

    - cleanup kiwiExit calls

-----------------------------------------------------------------------

Summary of changes:
diff --git a/kiwi.pl b/kiwi.pl
index 81f9ffb..2309fa2 100755
--- a/kiwi.pl
+++ b/kiwi.pl
@@ -185,7 +185,7 @@ sub main {
 	if (defined $NoColor) {
 		$kiwi -&gt; info (&quot;Switching off colored output\n&quot;);
 		if (! $kiwi -&gt; setColorOff ()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 	}
 	#==========================================
@@ -194,7 +194,7 @@ sub main {
 	if (defined $LogFile) {
 		$kiwi -&gt; info (&quot;Setting log file to: $LogFile\n&quot;);
 		if (! $kiwi -&gt; setLogFile ( $LogFile )) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 	}
 	#========================================
@@ -208,7 +208,7 @@ sub main {
 			$Destination, $defaultAnswer
 		);
 		if (! defined $dirCreated) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Setup prepare 
@@ -220,7 +220,7 @@ sub main {
 		mkdir $imageTarget;
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic -&gt; prepareImage()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Setup create 
@@ -231,7 +231,7 @@ sub main {
 		$cmdL -&gt; setForceNewRoot (0);
 		$kic  -&gt; initialize();
 		if (! $kic -&gt; createImage ($kiwi,$cmdL)) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -248,7 +248,7 @@ sub main {
 			$kiwi,$InitCache,undef,\@Profiles
 		);
 		if (! defined $xml) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		my $pkgMgr = $cmdL -&gt; getPackageManager();
 		if ($pkgMgr) {
@@ -265,14 +265,14 @@ sub main {
 			$kiwi,$xml,$cdir,$gdata-&gt;{BasePath},\@Profiles,$InitCache
 		);
 		if (! $icache) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		my $cacheInit = $icache -&gt; initializeCache ($cmdL);
 		if (! $cacheInit) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $icache -&gt; createCache ($cacheInit)) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -283,10 +283,10 @@ sub main {
 	if (defined $Prepare) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; prepareImage()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -297,10 +297,10 @@ sub main {
 	if (defined $Create) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createImage()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -311,10 +311,10 @@ sub main {
 	if (defined $Upgrade) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; upgradeImage()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -335,11 +335,11 @@ sub main {
 		# Check object and repo setup, mandatory
 		#------------------------------------------
 		if (! defined $migrate) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $migrate -&gt; getRepos()) {
 			$migrate -&gt; cleanMount();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Create report HTML file, errors allowed
@@ -352,15 +352,15 @@ sub main {
 		if (! $MigrateNoTemplate) {
 			if (! $migrate -&gt; setTemplate()) {
 				$migrate -&gt; cleanMount();
-				my $code = kiwiExit (1); return $code;
+				kiwiExit (1);
 			}
 			if (! $migrate -&gt; setPrepareConfigSkript()) {
 				$migrate -&gt; cleanMount();
-				my $code = kiwiExit (1); return $code;
+				kiwiExit (1);
 			}
 			if (! $migrate -&gt; setInitialSetup()) {
 				$migrate -&gt; cleanMount();
-				my $code = kiwiExit (1); return $code;
+				kiwiExit (1);
 			}
 		}
 		$migrate -&gt; cleanMount();
@@ -373,10 +373,10 @@ sub main {
 	if (defined $SetupSplash) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createSplash()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -387,10 +387,10 @@ sub main {
 	if (defined $BootUSB) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createImageBootUSB()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -401,10 +401,10 @@ sub main {
 	if (defined $BootCD) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createImageBootCD()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -415,10 +415,10 @@ sub main {
 	if (defined $InstallCD) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createImageInstallCD()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -429,10 +429,10 @@ sub main {
 	if (defined $InstallStick) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createImageInstallStick()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -443,10 +443,10 @@ sub main {
 	if (defined $BootVMDisk) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createImageDisk()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -457,10 +457,10 @@ sub main {
 	if (defined $Convert) {
 		$kic = new KIWIImageCreator ($kiwi, $cmdL);
 		if (! $kic) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! $kic -&gt; createImageFormat()) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		kiwiExit (0);
 	}
@@ -479,37 +479,37 @@ sub main {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error (&quot;Required os-autoinst test-suite not installed&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! -f $TestImage) {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error (&quot;Test image $TestImage doesn't exist&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! defined $SetImageType) {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error (&quot;No test image type specified&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! defined $TestCase) {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error (&quot;No test test case specified&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! -d $TestCase.&quot;/&quot;.$SetImageType) {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error (&quot;Test case $SetImageType does not exist&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (! -f $TestCase.&quot;/env.sh&quot;) {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error (&quot;Can't find environment for this test&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Turn parameters into absolute pathes
@@ -526,7 +526,7 @@ sub main {
 			$kiwi -&gt; failed ();
 			$kiwi -&gt; error  (&quot;Can't create distri link: $data&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Create result mktemp directory
@@ -537,7 +537,7 @@ sub main {
 			$kiwi -&gt; error  (&quot;Couldn't create result directory: $out: $!&quot;);
 			$kiwi -&gt; failed ();
 			qxx (&quot;rm -f $suite/distri/$distri&quot;);
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		qxx (&quot;chmod 755 $out 2&gt;&amp;1&quot;);
 		#==========================================
@@ -551,7 +551,7 @@ sub main {
 			$kiwi -&gt; failed ();
 			qxx (&quot;rm -f $suite/distri/$distri&quot;);
 			qxx (&quot;rm -rf $out&quot;);
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Create call file
@@ -568,7 +568,7 @@ sub main {
 			$kiwi -&gt; failed ();
 			qxx (&quot;rm -f $suite/distri/$distri&quot;);
 			qxx (&quot;rm -rf $out&quot;);
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Create screen ctrl file
@@ -582,7 +582,7 @@ sub main {
 			$kiwi -&gt; failed ();
 			qxx (&quot;rm -f $suite/distri/$distri&quot;);
 			qxx (&quot;rm -rf $out&quot;);
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		#==========================================
 		# Call the test
@@ -625,6 +625,9 @@ sub init {
 
 	$kiwi = new KIWILog(&quot;tiny&quot;);
 	$cmdL = new KIWICommandLine($kiwi);
+	if (! $cmdL) {
+		kiwiExit (1);
+	}
 	#==========================================
 	# get options and call non-root tasks
 	#------------------------------------------
@@ -810,7 +813,7 @@ sub init {
 			\@AddRepositoryType
 		);
 		if (! $res) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 	}
 	#========================================
@@ -849,7 +852,7 @@ sub init {
 	if (defined $PackageManager) {
 		my $result = $cmdL -&gt; setPackageManager ($PackageManager);
 		if (! $result) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 	}
 	#========================================
@@ -863,7 +866,7 @@ sub init {
 			$SetRepositoryType
 		);
 		if (! $result) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 	}
 	#========================================
@@ -877,7 +880,7 @@ sub init {
 			\@AddRepositoryType
 		);
 		if (! $result) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 	}
 	#========================================
@@ -1031,7 +1034,7 @@ sub init {
 	) {
 		$kiwi -&gt; error (&quot;No operation specified&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	if (($InitCache) &amp;&amp; ($LogFile)) {
 		$kiwi -&gt; warning (&quot;Logfile set to terminal in init-cache mode&quot;);
@@ -1042,12 +1045,12 @@ sub init {
 	if (($targetDevice) &amp;&amp; (! -b $targetDevice)) {
 		$kiwi -&gt; error (&quot;Target device $targetDevice doesn't exist&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	if ((defined $IgnoreRepos) &amp;&amp; (defined $SetRepository)) {
 		$kiwi -&gt; error (&quot;Can't use ignore repos together with set repos&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	if (defined $RootTree) {
 		$cmdL -&gt; setRootTargetDir($RootTree)
@@ -1065,7 +1068,7 @@ sub init {
 	if ((defined $BootVMDisk) &amp;&amp; (! defined $BootVMSystem)) {
 		$kiwi -&gt; error (&quot;Virtual Disk setup must specify a bootvm-system&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	if (defined $Partitioner) {
 		if (
@@ -1074,13 +1077,13 @@ sub init {
 		) {
 			$kiwi -&gt; error (&quot;Invalid partitioner, expected parted|fdasd&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 	}
 	if ((defined $Build) &amp;&amp; (! defined $Destination)) {
 		$kiwi -&gt; error  (&quot;No destination directory specified&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	} elsif (defined $Build) {
 		$cmdL -&gt; setTargetDirsForBuild();
 	}
@@ -1095,7 +1098,7 @@ sub init {
 		$cmdL -&gt; setConfigDir($ListXMLInfo);
 		my $res = $cmdL -&gt; setIgnoreRepos($IgnoreRepos);
 		if (! $res) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		if (defined $LogFile) {
 			$res = $cmdL -&gt; setLogFile($LogFile);
@@ -1112,17 +1115,17 @@ sub init {
 			);
 		}
 		if (! $res) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		my $info = new KIWIXMLInfo($kiwi, $cmdL);
 		if (! $info) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		$res = $info -&gt; printXMLInfo(\@ListXMLInfoSelection);
 		if (! $res) {
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
-		my $code = kiwiExit (0); return $code;
+		kiwiExit (0);
 	}
 	if (defined $SetImageType) {
 		$cmdL -&gt; setBuildType($SetImageType);
@@ -1131,7 +1134,7 @@ sub init {
 		if ($MBRID &lt; 0 || $MBRID &gt; 0xffffffff) {
 			$kiwi -&gt; error (&quot;Invalid mbrid&quot;);
 			$kiwi -&gt; failed ();
-			my $code = kiwiExit (1); return $code;
+			kiwiExit (1);
 		}
 		$MBRID = sprintf (&quot;0x%08x&quot;, $MBRID);
 	}
@@ -1670,7 +1673,7 @@ sub createPassword {
 	}
 	$kiwi -&gt; done ();
 	$kiwi -&gt; info (&quot;Your password:\n\t$encrypted\n&quot;);
-	my $code = kiwiExit (0); return $code;
+	kiwiExit (0);
 }
 
 #==========================================
@@ -1690,13 +1693,13 @@ sub createHash {
 		$kiwi -&gt; failed ();
 		$kiwi -&gt; error  (&quot;Not a directory: $CreateHash: $!&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	if (! $locator -&gt; getControlFile ($CreateHash)) {
 		$kiwi -&gt; failed ();
 		$kiwi -&gt; error  (&quot;Not a kiwi description: no xml description found&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	my $cmd  = &quot;find -L -type f | grep -v .svn | grep -v .checksum.md5&quot;;
 	my $status = qxx (
@@ -1708,7 +1711,7 @@ sub createHash {
 		$kiwi -&gt; failed ();
 	}
 	$kiwi -&gt; done();
-	my $code = kiwiExit (0); return $code;
+	kiwiExit (0);
 }
 
 #==========================================
@@ -1726,8 +1729,7 @@ sub createInstSource {
 	eval &quot;require $mod&quot;;
 	if($@) {
 		$kiwi-&gt;error(&quot;Module &lt;$mod&gt; is not available!&quot;);
-		my $code = kiwiExit (3);
-		return $code;
+		kiwiExit (3);
 	}
 	else {
 		$kiwi-&gt;info(&quot;Module KIWICollect loaded successfully...&quot;);
@@ -1738,7 +1740,7 @@ sub createInstSource {
 		$kiwi,$CreateInstSource,undef,undef
 	);
 	if (! defined $xml) {
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	my $pkgMgr = $cmdL -&gt; getPackageManager();
 	if ($pkgMgr) {
@@ -1751,7 +1753,7 @@ sub createInstSource {
 	if (! defined $root) {
 		$kiwi -&gt; error (&quot;Couldn't create instsource root&quot;);
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit (1); return $code;
+		kiwiExit (1);
 	}
 	#==========================================
 	# Create object...
@@ -1760,12 +1762,12 @@ sub createInstSource {
 	if (! defined( $collect) ) {
 		$kiwi -&gt; error( &quot;Unable to create KIWICollect module.&quot; );
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit( 1 ); return $code;
+		kiwiExit( 1 );
 	}
 	if (! defined( $collect -&gt; Init () ) ) {
 		$kiwi -&gt; error( &quot;Object initialisation failed!&quot; );
 		$kiwi -&gt; failed ();
-		my $code = kiwiExit( 1 ); return $code;
+		kiwiExit( 1 );
 	}
 	#==========================================
 	# Call the *CENTRAL* method for it...
@@ -1774,7 +1776,7 @@ sub createInstSource {
 	if ( $ret != 0 ) {
 		$kiwi -&gt; warning( &quot;KIWICollect had runtime error.&quot; );
 		$kiwi -&gt; skipped ();
-		my $code = kiwiExit ( $ret ); return $code;
+		kiwiExit ( $ret );
 	}
 	$kiwi-&gt;info( &quot;KIWICollect completed successfully.&quot; );
 	$kiwi-&gt;done();
diff --git a/modules/KIWIImageCreator.pm b/modules/KIWIImageCreator.pm
index 624e15e..457816e 100644
--- a/modules/KIWIImageCreator.pm
+++ b/modules/KIWIImageCreator.pm
@@ -399,6 +399,9 @@ sub createImage {
 	#==========================================
 	# Check the tree first...
 	#------------------------------------------
+	if (! defined $configDir) {
+		return undef;
+	}
 	if (-f &quot;$configDir/.broken&quot;) {
 		$kiwi -&gt; error  (&quot;Image root tree $configDir is broken&quot;);
 		$kiwi -&gt; failed ();


hooks/post-receive
-- 
Project kiwi at BerliOS

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003453.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch, master,	updated. 17220572a86c4b66f3c03e72cd8194f696b1559b
</A></li>
	<LI>Next message: <A HREF="003455.html">[Kiwi-devel] [Git]Project kiwi at BerliOS branch,	KIWI-485-SuSE-11-1-SLE-SP-Devel,	updated. 73120cd7a6f29eb743f81d8b0d359aaea476894f
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3454">[ date ]</a>
              <a href="thread.html#3454">[ thread ]</a>
              <a href="subject.html#3454">[ subject ]</a>
              <a href="author.html#3454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-devel">More information about the Kiwi-devel
mailing list</a><br>
</body></html>
